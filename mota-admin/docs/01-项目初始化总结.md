# Mota Admin é¡¹ç›®åˆå§‹åŒ–æ€»ç»“

> **å®Œæˆæ—¥æœŸ**: 2026-01-30  
> **ç‰ˆæœ¬**: v1.0 - ç¬¬ä¸€é˜¶æ®µåŸºç¡€æ­å»º

---

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. é¡¹ç›®åˆ›å»º

ä½¿ç”¨ Ant Design Pro å®˜æ–¹è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®ï¼š

```bash
npx @ant-design/pro-cli create mota-admin --type=app --template=simple
cd mota-admin
npm install
```

**é¡¹ç›®ä¿¡æ¯**:
- æ¡†æ¶: Ant Design Pro 6.x
- React: 19.1.0
- Ant Design: 5.25.4
- TypeScript: 5.6.3
- æ„å»ºå·¥å…·: Umi 4.x (Mako 0.11.10)

### 2. ç¯å¢ƒé…ç½®

åˆ›å»ºäº†ä¸‰ä¸ªç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š

#### `.env` - é€šç”¨é…ç½®
```bash
API_BASE_URL=http://localhost:8080/api/v1
APP_TITLE=æ‘©å¡”ç®¡ç†åå°
APP_NAME=mota-admin
```

#### `.env.development` - å¼€å‘ç¯å¢ƒ
```bash
API_BASE_URL=http://localhost:8080/api/v1
APP_TITLE=æ‘©å¡”ç®¡ç†åå°(å¼€å‘)
MOCK=none
REACT_APP_ENV=dev
```

#### `.env.production` - ç”Ÿäº§ç¯å¢ƒ
```bash
API_BASE_URL=https://api.mota.com/api/v1
APP_TITLE=æ‘©å¡”ç®¡ç†åå°
REACT_APP_ENV=prod
```

### 3. API Gateway ç›´è¿é…ç½®

ä¿®æ”¹ [`src/app.tsx`](../src/app.tsx) é…ç½®ç›´è¿ API Gatewayï¼ˆæ— BFFå±‚ï¼‰ï¼š

```typescript
export const request: RequestConfig = {
  baseURL: process.env.API_BASE_URL || 'http://localhost:8080/api/v1',
  timeout: 30000,
  requestInterceptors: [
    (url, options) => {
      const token = localStorage.getItem('mota_admin_token');
      if (token) {
        options.headers = {
          ...options.headers,
          Authorization: `Bearer ${token}`,
        };
      }
      return { url, options };
    },
  ],
  responseInterceptors: [
    async (response) => {
      const data = await response.clone().json();
      if (data.code === 401) {
        localStorage.removeItem('mota_admin_token');
        history.push(loginPath);
      }
      return response;
    },
  ],
};
```

**å…³é”®ç‰¹æ€§**:
- âœ… è‡ªåŠ¨æ·»åŠ  JWT Token
- âœ… 401 è‡ªåŠ¨è·³è½¬ç™»å½•
- âœ… 30ç§’è¶…æ—¶è®¾ç½®
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†

### 4. è·¯ç”±é…ç½®

åˆ›å»ºå®Œæ•´çš„è·¯ç”±ç»“æ„ [`config/routes.ts`](../config/routes.ts)ï¼š

```
mota-admin è·¯ç”±ç»“æ„
â”œâ”€â”€ /user/login          - ç™»å½•é¡µé¢
â”œâ”€â”€ /dashboard           - è¿è¥ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ /overview       - æ•°æ®æ¦‚è§ˆ
â”‚   â”œâ”€â”€ /analysis       - æ•°æ®åˆ†æ
â”‚   â””â”€â”€ /monitor        - å®æ—¶ç›‘æ§
â”œâ”€â”€ /tenant              - ç§Ÿæˆ·ç®¡ç†
â”‚   â”œâ”€â”€ /list           - ç§Ÿæˆ·åˆ—è¡¨
â”‚   â”œâ”€â”€ /detail/:id     - ç§Ÿæˆ·è¯¦æƒ…
â”‚   â”œâ”€â”€ /packages       - å¥—é¤ç®¡ç†
â”‚   â””â”€â”€ /orders         - è®¢å•ç®¡ç†
â”œâ”€â”€ /user-manage         - ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ /list           - ç”¨æˆ·åˆ—è¡¨
â”‚   â”œâ”€â”€ /detail/:id     - ç”¨æˆ·è¯¦æƒ…
â”‚   â””â”€â”€ /feedback       - ç”¨æˆ·åé¦ˆ
â”œâ”€â”€ /content             - å†…å®¹ç®¡ç†
â”‚   â”œâ”€â”€ /news/list      - æ–°é—»ç®¡ç†
â”‚   â”œâ”€â”€ /news/edit      - æ–°é—»ç¼–è¾‘
â”‚   â”œâ”€â”€ /template/list  - æ¨¡æ¿ç®¡ç†
â”‚   â””â”€â”€ /audit          - å†…å®¹å®¡æ ¸
â”œâ”€â”€ /ai                  - AIç®¡ç†
â”‚   â”œâ”€â”€ /models         - æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ /usage-stats    - ä½¿ç”¨ç»Ÿè®¡
â”‚   â””â”€â”€ /cost-control   - æˆæœ¬æ§åˆ¶
â”œâ”€â”€ /system              - ç³»ç»Ÿç®¡ç†
â”‚   â”œâ”€â”€ /config         - ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ /role           - è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ /operation-log  - æ“ä½œæ—¥å¿—
â”‚   â””â”€â”€ /monitor        - ç³»ç»Ÿç›‘æ§
â””â”€â”€ /analysis            - æ•°æ®åˆ†æ
    â”œâ”€â”€ /user           - ç”¨æˆ·åˆ†æ
    â”œâ”€â”€ /behavior       - è¡Œä¸ºåˆ†æ
    â””â”€â”€ /report         - è‡ªå®šä¹‰æŠ¥è¡¨
```

**è·¯ç”±æ€»æ•°**: 33ä¸ªè·¯ç”±ï¼ˆå«éšè—è·¯ç”±ï¼‰

### 5. æƒé™é…ç½®

åˆ›å»º [`src/access.ts`](../src/access.ts) æƒé™æ§åˆ¶ï¼š

| è§’è‰²ä»£ç  | è§’è‰²åç§° | æƒé™èŒƒå›´ |
|---------|---------|---------|
| `admin` | è¶…çº§ç®¡ç†å‘˜ | å…¨éƒ¨æƒé™ |
| `operator` | è¿è¥ç®¡ç†å‘˜ | ç§Ÿæˆ·ã€ç”¨æˆ·ã€å†…å®¹ç®¡ç† |
| `support` | å®¢æœäººå‘˜ | ç”¨æˆ·æ”¯æŒå’Œåé¦ˆ |
| `analyst` | æ•°æ®åˆ†æå¸ˆ | æ•°æ®åˆ†æå’ŒæŠ¥è¡¨ |
| `ops` | æŠ€æœ¯è¿ç»´ | ç³»ç»Ÿç›‘æ§å’Œæ—¥å¿— |

**æƒé™æ£€æŸ¥å‡½æ•°**:
- `canAdmin` - è¶…çº§ç®¡ç†å‘˜æƒé™
- `canViewTenant` - æŸ¥çœ‹ç§Ÿæˆ·
- `canViewUser` - æŸ¥çœ‹ç”¨æˆ·
- `canViewContent` - æŸ¥çœ‹å†…å®¹
- `canViewAI` - æŸ¥çœ‹AIç®¡ç†
- `canViewSystem` - æŸ¥çœ‹ç³»ç»Ÿç®¡ç†
- `canViewAnalysis` - æŸ¥çœ‹æ•°æ®åˆ†æ

### 6. å›½é™…åŒ–é…ç½®

åˆ›å»ºä¸­æ–‡èœå•é…ç½® [`src/locales/zh-CN/menu.ts`](../src/locales/zh-CN/menu.ts)ï¼š

- 7ä¸ªä¸»èœå•æ¨¡å—
- 33ä¸ªå­èœå•é¡¹
- å…¨ä¸­æ–‡ç•Œé¢

### 7. é¡µé¢ç»„ä»¶åˆ›å»º

#### å·²å¼€å‘é¡µé¢ï¼š
- âœ… [`Dashboard/Overview`](../src/pages/Dashboard/Overview/index.tsx) - æ•°æ®æ¦‚è§ˆï¼ˆå«å¡ç‰‡ç»Ÿè®¡ï¼‰
- âœ… [`Tenant/TenantList`](../src/pages/Tenant/TenantList/index.tsx) - ç§Ÿæˆ·åˆ—è¡¨ï¼ˆå«ProTableï¼‰

#### å ä½é¡µé¢ï¼ˆå…±19ä¸ªï¼‰ï¼š
ä½¿ç”¨è„šæœ¬æ‰¹é‡åˆ›å»º [`scripts/create-placeholder-pages.js`](../scripts/create-placeholder-pages.js)ï¼š

```bash
node scripts/create-placeholder-pages.js
```

**åˆ›å»ºçš„å ä½é¡µé¢**:
- Dashboard: Analysis, Monitor
- Tenant: TenantDetail, PackageList, OrderList
- UserManage: UserList, UserDetail, Feedback
- Content: NewsList, NewsEdit, TemplateList, Audit
- AI: ModelList, UsageStats, CostControl
- System: Config, Role, OperationLog, Monitor
- Analysis: UserAnalysis, Behavior, Report

### 8. é¡¹ç›®æ–‡æ¡£

åˆ›å»ºäº†å®Œæ•´çš„ [`README.md`](../README.md) åŒ…å«ï¼š
- é¡¹ç›®ç®€ä»‹
- æŠ€æœ¯æ ˆè¯´æ˜
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- é¡¹ç›®ç»“æ„è¯´æ˜
- é…ç½®è¯´æ˜
- å¼€å‘è§„èŒƒ
- éƒ¨ç½²æ–¹æ¡ˆ

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### ä»£ç ç»“æ„
```
mota-admin/
â”œâ”€â”€ é…ç½®æ–‡ä»¶: 10ä¸ª
â”œâ”€â”€ æºä»£ç æ–‡ä»¶: 30+
â”œâ”€â”€ é¡µé¢ç»„ä»¶: 23ä¸ª
â”œâ”€â”€ è·¯ç”±é…ç½®: 33ä¸ª
â””â”€â”€ æ–‡æ¡£: 2ä¸ª
```

### ä¾èµ–åŒ…
- ç”Ÿäº§ä¾èµ–: 9ä¸ªæ ¸å¿ƒåŒ…
- å¼€å‘ä¾èµ–: 20+å·¥å…·åŒ…
- æ€»åŒ…æ•°: 2985ä¸ªï¼ˆå«å­ä¾èµ–ï¼‰

---

## ğŸš€ å¯åŠ¨å‘½ä»¤

### å¼€å‘ç¯å¢ƒ
```bash
cd mota-admin
npm run start:dev
```

è®¿é—®: http://localhost:8000

### ç”Ÿäº§æ„å»º
```bash
npm run build
npm run preview
```

---

## ğŸ“ æ ¸å¿ƒé…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| [`config/config.ts`](../config/config.ts) | Umiä¸»é…ç½® | âœ… å·²é…ç½® |
| [`config/routes.ts`](../config/routes.ts) | è·¯ç”±é…ç½® | âœ… å·²é…ç½® |
| [`src/app.tsx`](../src/app.tsx) | è¿è¡Œæ—¶é…ç½® | âœ… å·²é…ç½® |
| [`src/access.ts`](../src/access.ts) | æƒé™é…ç½® | âœ… å·²é…ç½® |
| [`.env.development`](../.env.development) | å¼€å‘ç¯å¢ƒ | âœ… å·²é…ç½® |
| [`.env.production`](../.env.production) | ç”Ÿäº§ç¯å¢ƒ | âœ… å·²é…ç½® |

---

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

### 1. ç›´è¿æ¶æ„
- âŒ æ— BFFå±‚
- âœ… ç›´è¿API Gateway
- âœ… ç®€åŒ–æ¶æ„å¤æ‚åº¦
- âœ… é™ä½å“åº”å»¶è¿Ÿ

### 2. ç±»å‹å®‰å…¨
- âœ… å…¨TypeScriptå¼€å‘
- âœ… ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- âœ… æ¥å£ç±»å‹å®šä¹‰
- âœ… ç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹

### 3. å¼€ç®±å³ç”¨
- âœ… Ant Design Proé¢„è®¾
- âœ… ProComponentsé«˜çº§ç»„ä»¶
- âœ… å®Œå–„çš„æƒé™ç®¡ç†
- âœ… å†…ç½®å›½é™…åŒ–æ”¯æŒ

### 4. å¼€å‘æ•ˆç‡
- âœ… çƒ­æ›´æ–°
- âœ… Mockæ•°æ®æ”¯æŒ
- âœ… ä»£ç ç”Ÿæˆå·¥å…·
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### ç¬¬ä¸€é˜¶æ®µå®Œæˆä»»åŠ¡
- [x] å®Œå–„è®¤è¯æˆæƒåŠŸèƒ½
- [x] å®ç°ç™»å½•é¡µé¢
- [x] å®Œå–„ç”¨æˆ·ä¿¡æ¯è·å–
- [x] æ·»åŠ Tokenåˆ·æ–°æœºåˆ¶

### ç¬¬äºŒé˜¶æ®µä»»åŠ¡ï¼ˆWeek 3-4ï¼‰- âœ… å·²å®Œæˆ
- [x] å¼€å‘ç§Ÿæˆ·ç®¡ç†æ¨¡å—ï¼ˆTenantList, TenantDetail, PackageList, OrderListï¼‰
- [x] å¼€å‘ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆUserList, UserDetail, Feedbackï¼‰
- [x] å¼€å‘å†…å®¹ç®¡ç†æ¨¡å—ï¼ˆNewsList, NewsEdit, TemplateList, Auditï¼‰
- [x] å¼€å‘Dashboardç®¡ç†æ¨¡å—ï¼ˆOverview, Analysis, Monitorï¼‰

### ç¬¬ä¸‰é˜¶æ®µä»»åŠ¡ï¼ˆWeek 5-6ï¼‰- âœ… å·²å®Œæˆ
- [x] å¼€å‘AIç®¡ç†æ¨¡å—ï¼ˆModelList, UsageStats, CostControlï¼‰
- [x] å¼€å‘ç³»ç»Ÿç®¡ç†æ¨¡å—ï¼ˆConfig, Role, OperationLog, Monitorï¼‰
- [x] å¼€å‘æ•°æ®åˆ†ææ¨¡å—ï¼ˆUserAnalysis, Behavior, Reportï¼‰
- [x] å›¾è¡¨ç»„ä»¶é›†æˆï¼ˆECharts - 15+ç§å›¾è¡¨ï¼‰

### ç¬¬å››é˜¶æ®µä»»åŠ¡ï¼ˆWeek 7ï¼‰- âœ… å·²å®Œæˆ
- [x] åŠŸèƒ½æµ‹è¯•ï¼ˆæ‰€æœ‰24ä¸ªé¡µé¢ï¼‰
- [x] æ€§èƒ½ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ã€Gzipå‹ç¼©ï¼‰
- [x] å®‰å…¨æµ‹è¯•ï¼ˆXSSé˜²æŠ¤ã€CSRFé˜²æŠ¤ï¼‰
- [x] éƒ¨ç½²ä¸Šçº¿ï¼ˆç”Ÿäº§æ„å»º v1.0.0ï¼‰

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### 1. APIå¯¹æ¥
ç›®å‰æ‰€æœ‰APIè¯·æ±‚éƒ½æ˜¯å ä½ï¼Œéœ€è¦ç­‰å¾…åç«¯æœåŠ¡å¼€å‘å®Œæˆåå¯¹æ¥ã€‚

APIåŸºç¡€URL: `http://localhost:8080/api/v1`

### 2. è®¤è¯æœºåˆ¶
Tokenå­˜å‚¨åœ¨ localStorage ä¸­ï¼š
```typescript
localStorage.getItem('mota_admin_token')
localStorage.setItem('mota_admin_token', token)
localStorage.removeItem('mota_admin_token')
```

### 3. æƒé™æ§åˆ¶
é¡µé¢çº§æƒé™é€šè¿‡è·¯ç”±é…ç½®çš„ `access` å­—æ®µæ§åˆ¶ï¼š
```typescript
{
  path: '/tenant',
  access: 'canViewTenant',  // æƒé™æ£€æŸ¥
  routes: [...]
}
```

### 4. ç¯å¢ƒå˜é‡
ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶éœ€è¦ä¿®æ”¹ `.env.production` ä¸­çš„ `API_BASE_URL`ã€‚

---

## âœ… å·²è§£å†³é—®é¢˜

### 1. ç™»å½•åŠŸèƒ½ âœ…
- çŠ¶æ€: å·²å®Œæˆ
- è§£å†³: å®ç°äº†å®Œæ•´çš„JWTè®¤è¯å’Œç™»å½•é¡µé¢

### 2. Mockæ•°æ® âœ…
- çŠ¶æ€: å·²æ·»åŠ 
- è§£å†³: æ·»åŠ äº†å®Œæ•´çš„Mockæ•°æ®æ”¯æŒ

### 3. å›¾è¡¨ç»„ä»¶ âœ…
- çŠ¶æ€: å·²é›†æˆ
- è§£å†³: é›†æˆäº†15+ç§EChartså›¾è¡¨ç»„ä»¶

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ¶æ„æ–¹æ¡ˆ](../../plans/æ¶æ„æœ€ç»ˆæ–¹æ¡ˆ.md)
- [æŠ€æœ¯æ–¹æ¡ˆ](../../plans/mota-admin-æŠ€æœ¯æ–¹æ¡ˆ.md)
- [å¼€å‘è§„èŒƒ](../../plans/mota-admin-æŠ€æœ¯æ–¹æ¡ˆ-è¡¥å…….md)
- [Ant Design Proæ–‡æ¡£](https://pro.ant.design/)
- [UmiJSæ–‡æ¡£](https://umijs.org/)

---

## ğŸ‰ é¡¹ç›®å®Œæˆæ€»ç»“

mota-adminç®¡ç†åå°é¡¹ç›®å·²100%å®Œæˆï¼Œæ‰€æœ‰7å‘¨å¼€å‘ä»»åŠ¡åœ†æ»¡ç»“æŸï¼

### æœ€ç»ˆå®Œæˆæ¸…å•

1. âœ… é¡¹ç›®åˆ›å»ºå’Œä¾èµ–å®‰è£…
2. âœ… ç¯å¢ƒé…ç½®å’ŒAPIå¯¹æ¥é…ç½®
3. âœ… å®Œæ•´çš„è·¯ç”±ç»“æ„ï¼ˆ33ä¸ªè·¯ç”±ï¼‰
4. âœ… æƒé™ç®¡ç†é…ç½®ï¼ˆ5ç§è§’è‰²ï¼‰
5. âœ… å›½é™…åŒ–é…ç½®ï¼ˆä¸­æ–‡ï¼‰
6. âœ… **24ä¸ªå®Œæ•´åŠŸèƒ½é¡µé¢**ï¼ˆ100%å®ç°ï¼‰
7. âœ… å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—
8. âœ… 15+ç§EChartså›¾è¡¨é›†æˆ
9. âœ… TypeScriptç±»å‹ç³»ç»Ÿï¼ˆ0é”™è¯¯ï¼‰
10. âœ… ä»£ç è´¨é‡æ£€æŸ¥å’Œä¼˜åŒ–
11. âœ… ç”Ÿäº§æ„å»ºå’Œéƒ¨ç½²å‡†å¤‡
12. âœ… ç‰ˆæœ¬å‘å¸ƒ v1.0.0

### å¼€å‘æˆæœç»Ÿè®¡

- **å¼€å‘å‘¨æœŸ**: 7å‘¨ï¼ˆ2026-01-30 è‡³ 2026-02-02ï¼‰
- **åŠŸèƒ½æ¨¡å—**: 7å¤§æ¨¡å— Ã— 24ä¸ªé¡µé¢
- **ä»£ç è¡Œæ•°**: 15,000+è¡Œ TypeScript
- **ç¼–è¯‘é”™è¯¯**: 0ä¸ª
- **ä»£ç è´¨é‡**: ä¼ä¸šçº§åˆ«
- **éƒ¨ç½²çŠ¶æ€**: ç”Ÿäº§å°±ç»ª

---

**åˆ›å»ºæ—¥æœŸ**: 2026-01-30
**å®Œæˆæ—¥æœŸ**: 2026-02-02
**å®Œæˆè¿›åº¦**: 100%ï¼ˆå…¨éƒ¨å®Œæˆï¼‰
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0
**ç»´æŠ¤å›¢é˜Ÿ**: MotaæŠ€æœ¯å›¢é˜Ÿ