import{r as u,w as Se,n as de,_ as we,R as d,a as ve,c as w,p as be,o as ge,u as Ee,I as Ne,v as _e}from"./index-jJjkrASA.js";import{u as Fe,o as Re,i as Oe,e as Ie}from"./compact-item-CfP0ZfjF.js";import{aa as Pe,B as $e,t as Be,ab as Ce,m as Ae,ac as je,a9 as ze,F as Ke,ad as De,n as Ve,o as pe,C as xe,p as ke}from"./getAllowClear-DijkFjz0.js";var Te=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Le=u.forwardRef(function(e,b){var m=e.autoComplete,s=e.onChange,o=e.onFocus,c=e.onBlur,v=e.onPressEnter,f=e.onKeyDown,_=e.onKeyUp,$=e.prefixCls,g=$===void 0?"rc-input":$,F=e.disabled,M=e.htmlSize,ee=e.className,te=e.maxLength,B=e.suffix,U=e.showCount,A=e.count,R=e.type,ne=R===void 0?"text":R,me=e.classes,x=e.classNames,h=e.styles,y=e.onCompositionStart,j=e.onCompositionEnd,ae=Se(e,Te),oe=u.useState(!1),W=de(oe,2),H=W[0],z=W[1],n=u.useRef(!1),C=u.useRef(!1),r=u.useRef(null),q=u.useRef(null),E=function(t){r.current&&Be(r.current,t)},se=Fe(e.defaultValue,{value:e.value}),G=de(se,2),K=G[0],J=G[1],p=K==null?"":String(K),re=u.useState(null),Q=de(re,2),D=Q[0],I=Q[1],i=Pe(A,U),N=i.max||te,V=i.strategy(p),k=!!N&&V>N;u.useImperativeHandle(b,function(){var a;return{focus:E,blur:function(){var l;(l=r.current)===null||l===void 0||l.blur()},setSelectionRange:function(l,L,P){var O;(O=r.current)===null||O===void 0||O.setSelectionRange(l,L,P)},select:function(){var l;(l=r.current)===null||l===void 0||l.select()},input:r.current,nativeElement:((a=q.current)===null||a===void 0?void 0:a.nativeElement)||r.current}}),u.useEffect(function(){C.current&&(C.current=!1),z(function(a){return a&&F?!1:a})},[F]);var X=function(t,l,L){var P=l;if(!n.current&&i.exceedFormatter&&i.max&&i.strategy(l)>i.max){if(P=i.exceedFormatter(l,{max:i.max}),l!==P){var O,fe;I([((O=r.current)===null||O===void 0?void 0:O.selectionStart)||0,((fe=r.current)===null||fe===void 0?void 0:fe.selectionEnd)||0])}}else if(L.source==="compositionEnd")return;J(P),r.current&&Ce(r.current,t,s,P)};u.useEffect(function(){if(D){var a;(a=r.current)===null||a===void 0||a.setSelectionRange.apply(a,we(D))}},[D]);var le=function(t){X(t,t.target.value,{source:"change"})},ue=function(t){n.current=!1,X(t,t.currentTarget.value,{source:"compositionEnd"}),j?.(t)},ie=function(t){v&&t.key==="Enter"&&!C.current&&(C.current=!0,v(t)),f?.(t)},ce=function(t){t.key==="Enter"&&(C.current=!1),_?.(t)},Y=function(t){z(!0),o?.(t)},Z=function(t){C.current&&(C.current=!1),z(!1),c?.(t)},S=function(t){J(""),E(),r.current&&Ce(r.current,t,s)},T=k&&"".concat(g,"-out-of-range"),he=function(){var t=Re(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return d.createElement("input",ve({autoComplete:m},t,{onChange:le,onFocus:Y,onBlur:Z,onKeyDown:ie,onKeyUp:ce,className:w(g,ge({},"".concat(g,"-disabled"),F),x?.input),style:h?.input,ref:r,size:M,type:ne,onCompositionStart:function(L){n.current=!0,y?.(L)},onCompositionEnd:ue}))},ye=function(){var t=Number(N)>0;if(B||i.show){var l=i.showFormatter?i.showFormatter({value:p,count:V,maxLength:N}):"".concat(V).concat(t?" / ".concat(N):"");return d.createElement(d.Fragment,null,i.show&&d.createElement("span",{className:w("".concat(g,"-show-count-suffix"),ge({},"".concat(g,"-show-count-has-suffix"),!!B),x?.count),style:be({},h?.count)},l),B)}return null};return d.createElement($e,ve({},ae,{prefixCls:g,className:w(ee,T),handleReset:S,value:p,focused:H,triggerFocus:E,suffix:ye(),disabled:F,classes:me,classNames:x,styles:h,ref:q}),he())});function Me(e,b){const m=u.useRef([]),s=()=>{m.current.push(setTimeout(()=>{var o,c,v,f;!((o=e.current)===null||o===void 0)&&o.input&&((c=e.current)===null||c===void 0?void 0:c.input.getAttribute("type"))==="password"&&(!((v=e.current)===null||v===void 0)&&v.input.hasAttribute("value"))&&((f=e.current)===null||f===void 0||f.input.removeAttribute("value"))}))};return u.useEffect(()=>(b&&s(),()=>m.current.forEach(o=>{o&&clearTimeout(o)})),[]),s}function Ue(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var We=function(e,b){var m={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&b.indexOf(s)<0&&(m[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)b.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(m[s[o]]=e[s[o]]);return m};const Je=u.forwardRef((e,b)=>{const{prefixCls:m,bordered:s=!0,status:o,size:c,disabled:v,onBlur:f,onFocus:_,suffix:$,allowClear:g,addonAfter:F,addonBefore:M,className:ee,style:te,styles:B,rootClassName:U,onChange:A,classNames:R,variant:ne,_skipAddonWarning:me}=e,x=We(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant","_skipAddonWarning"]),{getPrefixCls:h,direction:y,allowClear:j,autoComplete:ae,className:oe,style:W,classNames:H,styles:z}=Ee("input"),n=h("input",m),C=u.useRef(null),r=Ae(n),[q,E,se]=je(n,U),[G]=ze(n,r),{compactSize:K,compactItemClassnames:J}=Oe(n,y),p=Ie(S=>{var T;return(T=c??K)!==null&&T!==void 0?T:S}),re=d.useContext(Ne),Q=v??re,{status:D,hasFeedback:I,feedbackIcon:i}=u.useContext(Ke),N=ke(D,o),V=Ue(e)||!!I;u.useRef(V);const k=Me(C,!0),X=S=>{k(),f?.(S)},le=S=>{k(),_?.(S)},ue=S=>{k(),A?.(S)},ie=(I||$)&&d.createElement(d.Fragment,null,$,I&&i),ce=De(g??j),[Y,Z]=Ve("input",ne,s);return q(G(d.createElement(Le,Object.assign({ref:_e(b,C),prefixCls:n,autoComplete:ae},x,{disabled:Q,onBlur:X,onFocus:le,style:Object.assign(Object.assign({},W),te),styles:Object.assign(Object.assign({},z),B),suffix:ie,allowClear:ce,className:w(ee,U,se,r,J,oe),onChange:ue,addonBefore:M&&d.createElement(xe,{form:!0,space:!0},M),addonAfter:F&&d.createElement(xe,{form:!0,space:!0},F),classNames:Object.assign(Object.assign(Object.assign({},R),H),{input:w({[`${n}-sm`]:p==="small",[`${n}-lg`]:p==="large",[`${n}-rtl`]:y==="rtl"},R?.input,H.input,E),variant:w({[`${n}-${Y}`]:Z},pe(n,N)),affixWrapper:w({[`${n}-affix-wrapper-sm`]:p==="small",[`${n}-affix-wrapper-lg`]:p==="large",[`${n}-affix-wrapper-rtl`]:y==="rtl"},E),wrapper:w({[`${n}-group-rtl`]:y==="rtl"},E),groupWrapper:w({[`${n}-group-wrapper-sm`]:p==="small",[`${n}-group-wrapper-lg`]:p==="large",[`${n}-group-wrapper-rtl`]:y==="rtl",[`${n}-group-wrapper-${Y}`]:Z},pe(`${n}-group-wrapper`,N,I),E)})}))))});export{Je as I,Me as u};
