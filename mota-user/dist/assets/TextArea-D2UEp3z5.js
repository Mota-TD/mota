import{r as i,w as we,n as K,x as De,s as be,p as B,a as ze,c as M,o as he,E as Ce,R as A,_ as Fe,f as Pe,m as He,u as je,I as Le}from"./index-jJjkrASA.js";import{K as Be,aa as Ke,B as We,ab as ye,b as Ye,a as Ze,F as qe,t as Ge,m as Xe,ac as Ue,n as Je,ad as Qe,o as ke,p as et}from"./getAllowClear-DijkFjz0.js";import{u as Re,i as tt,e as at}from"./compact-item-CfP0ZfjF.js";var nt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,rt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ve={},C;function ot(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(n&&ve[a])return ve[a];var t=window.getComputedStyle(e),d=t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),m=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),s=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),p=rt.map(function(c){return"".concat(c,":").concat(t.getPropertyValue(c))}).join(";"),h={sizingStyle:p,paddingSize:m,borderSize:s,boxSizing:d};return n&&a&&(ve[a]=h),h}function it(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;C||(C=document.createElement("textarea"),C.setAttribute("tab-index","-1"),C.setAttribute("aria-hidden","true"),C.setAttribute("name","hiddenTextarea"),document.body.appendChild(C)),e.getAttribute("wrap")?C.setAttribute("wrap",e.getAttribute("wrap")):C.removeAttribute("wrap");var d=ot(e,n),m=d.paddingSize,s=d.borderSize,p=d.boxSizing,h=d.sizingStyle;C.setAttribute("style","".concat(h,";").concat(nt)),C.value=e.value||e.placeholder||"";var c=void 0,v=void 0,y,S=C.scrollHeight;if(p==="border-box"?S+=s:p==="content-box"&&(S-=m),a!==null||t!==null){C.value=" ";var T=C.scrollHeight-m;a!==null&&(c=T*a,p==="border-box"&&(c=c+m+s),S=Math.max(c,S)),t!==null&&(v=T*t,p==="border-box"&&(v=v+m+s),y=S>v?"":"hidden",S=Math.min(v,S))}var g={height:S,overflowY:y,resize:"none"};return c&&(g.minHeight=c),v&&(g.maxHeight=v),g}var st=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],pe=0,ge=1,xe=2,lt=i.forwardRef(function(e,n){var a=e,t=a.prefixCls,d=a.defaultValue,m=a.value,s=a.autoSize,p=a.onResize,h=a.className,c=a.style,v=a.disabled,y=a.onChange;a.onInternalAutoSize;var S=we(a,st),T=Re(d,{value:m,postState:function(b){return b??""}}),g=K(T,2),_=g[0],W=g[1],Y=function(b){W(b.target.value),y?.(b)},I=i.useRef();i.useImperativeHandle(n,function(){return{textArea:I.current}});var D=i.useMemo(function(){return s&&De(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),Z=K(D,2),x=Z[0],z=Z[1],O=!!s,k=i.useState(xe),F=K(k,2),R=F[0],P=F[1],q=i.useState(),G=K(q,2),ee=G[0],X=G[1],H=function(){P(pe)};be(function(){O&&H()},[m,x,z,O]),be(function(){if(R===pe)P(ge);else if(R===ge){var w=it(I.current,!1,x,z);P(xe),X(w)}},[R]);var E=i.useRef(),o=function(){Ce.cancel(E.current)},U=function(b){R===xe&&(p?.(b),s&&(o(),E.current=Ce(function(){H()})))};i.useEffect(function(){return o},[]);var J=O?ee:null,j=B(B({},c),J);return(R===pe||R===ge)&&(j.overflowY="hidden",j.overflowX="hidden"),i.createElement(Be,{onResize:U,disabled:!(s||p)},i.createElement("textarea",ze({},S,{ref:I,style:j,className:M(t,h,he({},"".concat(t,"-disabled"),v)),disabled:v,value:_,onChange:Y})))}),ut=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],dt=A.forwardRef(function(e,n){var a,t=e.defaultValue,d=e.value,m=e.onFocus,s=e.onBlur,p=e.onChange,h=e.allowClear,c=e.maxLength,v=e.onCompositionStart,y=e.onCompositionEnd,S=e.suffix,T=e.prefixCls,g=T===void 0?"rc-textarea":T,_=e.showCount,W=e.count,Y=e.className,I=e.style,D=e.disabled,Z=e.hidden,x=e.classNames,z=e.styles,O=e.onResize,k=e.onClear,F=e.onPressEnter,R=e.readOnly,P=e.autoSize,q=e.onKeyDown,G=we(e,ut),ee=Re(t,{value:d,defaultValue:t}),X=K(ee,2),H=X[0],E=X[1],o=H==null?"":String(H),U=A.useState(!1),J=K(U,2),j=J[0],w=J[1],b=A.useRef(!1),ue=A.useState(null),oe=K(ue,2),Q=oe[0],de=oe[1],ie=i.useRef(null),te=i.useRef(null),$=function(){var r;return(r=te.current)===null||r===void 0?void 0:r.textArea},ae=function(){$().focus()};i.useImperativeHandle(n,function(){var f;return{resizableTextArea:te.current,focus:ae,blur:function(){$().blur()},nativeElement:((f=ie.current)===null||f===void 0?void 0:f.nativeElement)||$()}}),i.useEffect(function(){w(function(f){return!D&&f})},[D]);var ce=A.useState(null),se=K(ce,2),ne=se[0],fe=se[1];A.useEffect(function(){if(ne){var f;(f=$()).setSelectionRange.apply(f,Fe(ne))}},[ne]);var u=Ke(W,_),l=(a=u.max)!==null&&a!==void 0?a:c,V=Number(l)>0,N=u.strategy(o),Ee=!!l&&N>l,Se=function(r,L){var le=L;!b.current&&u.exceedFormatter&&u.max&&u.strategy(L)>u.max&&(le=u.exceedFormatter(L,{max:u.max}),L!==le&&fe([$().selectionStart||0,$().selectionEnd||0])),E(le),ye(r.currentTarget,r,p,le)},$e=function(r){b.current=!0,v?.(r)},Ae=function(r){b.current=!1,Se(r,r.currentTarget.value),y?.(r)},Ie=function(r){Se(r,r.target.value)},Ne=function(r){r.key==="Enter"&&F&&F(r),q?.(r)},Te=function(r){w(!0),m?.(r)},Oe=function(r){w(!1),s?.(r)},Ve=function(r){E(""),ae(),ye($(),r,p)},me=S,re;u.show&&(u.showFormatter?re=u.showFormatter({value:o,count:N,maxLength:l}):re="".concat(N).concat(V?" / ".concat(l):""),me=A.createElement(A.Fragment,null,me,A.createElement("span",{className:M("".concat(g,"-data-count"),x?.count),style:z?.count},re)));var Me=function(r){var L;O?.(r),(L=$())!==null&&L!==void 0&&L.style.height&&de(!0)},_e=!P&&!_&&!h;return A.createElement(We,{ref:ie,value:o,allowClear:h,handleReset:Ve,suffix:me,prefixCls:g,classNames:B(B({},x),{},{affixWrapper:M(x?.affixWrapper,he(he({},"".concat(g,"-show-count"),_),"".concat(g,"-textarea-allow-clear"),h))}),disabled:D,focused:j,className:M(Y,Ee&&"".concat(g,"-out-of-range")),style:B(B({},I),Q&&!_e?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof re=="string"?re:void 0}},hidden:Z,readOnly:R,onClear:k},A.createElement(lt,ze({},G,{autoSize:P,maxLength:c,onKeyDown:Ne,onChange:Ie,onFocus:Te,onBlur:Oe,onCompositionStart:$e,onCompositionEnd:Ae,className:M(x?.textarea),style:B(B({},z?.textarea),{},{resize:I?.resize}),disabled:D,prefixCls:g,onResize:Me,ref:te,readOnly:R})))});const ct=e=>{const{componentCls:n,paddingLG:a}=e,t=`${n}-textarea`;return{[`textarea${n}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${n}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${n}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[t]:{position:"relative","&-show-count":{[`${n}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${n},
        &-affix-wrapper${t}-has-feedback ${n}
      `]:{paddingInlineEnd:a},[`&-affix-wrapper${n}-affix-wrapper`]:{padding:0,[`> textarea${n}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${n}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${n}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${t}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${n}-affix-wrapper-rtl`]:{[`${n}-suffix`]:{[`${n}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${n}-affix-wrapper-sm`]:{[`${n}-suffix`]:{[`${n}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},ft=Pe(["Input","TextArea"],e=>{const n=He(e,Ye(e));return ct(n)},Ze,{resetFont:!1});var mt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(e);d<t.length;d++)n.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(e,t[d])&&(a[t[d]]=e[t[d]]);return a};const xt=i.forwardRef((e,n)=>{var a;const{prefixCls:t,bordered:d=!0,size:m,disabled:s,status:p,allowClear:h,classNames:c,rootClassName:v,className:y,style:S,styles:T,variant:g,showCount:_,onMouseDown:W,onResize:Y}=e,I=mt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:D,direction:Z,allowClear:x,autoComplete:z,className:O,style:k,classNames:F,styles:R}=je("textArea"),P=i.useContext(Le),q=s??P,{status:G,hasFeedback:ee,feedbackIcon:X}=i.useContext(qe),H=et(G,p),E=i.useRef(null);i.useImperativeHandle(n,()=>{var u;return{resizableTextArea:(u=E.current)===null||u===void 0?void 0:u.resizableTextArea,focus:l=>{var V,N;Ge((N=(V=E.current)===null||V===void 0?void 0:V.resizableTextArea)===null||N===void 0?void 0:N.textArea,l)},blur:()=>{var l;return(l=E.current)===null||l===void 0?void 0:l.blur()}}});const o=D("input",t),U=Xe(o),[J,j,w]=Ue(o,v),[b]=ft(o,U),{compactSize:ue,compactItemClassnames:oe}=tt(o,Z),Q=at(u=>{var l;return(l=m??ue)!==null&&l!==void 0?l:u}),[de,ie]=Je("textArea",g,d),te=Qe(h??x),[$,ae]=i.useState(!1),[ce,se]=i.useState(!1),ne=u=>{ae(!0),W?.(u);const l=()=>{ae(!1),document.removeEventListener("mouseup",l)};document.addEventListener("mouseup",l)},fe=u=>{var l,V;if(Y?.(u),$&&typeof getComputedStyle=="function"){const N=(V=(l=E.current)===null||l===void 0?void 0:l.nativeElement)===null||V===void 0?void 0:V.querySelector("textarea");N&&getComputedStyle(N).resize==="both"&&se(!0)}};return J(b(i.createElement(dt,Object.assign({autoComplete:z},I,{style:Object.assign(Object.assign({},k),S),styles:Object.assign(Object.assign({},R),T),disabled:q,allowClear:te,className:M(w,U,y,v,oe,O,ce&&`${o}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},c),F),{textarea:M({[`${o}-sm`]:Q==="small",[`${o}-lg`]:Q==="large"},j,c?.textarea,F.textarea,$&&`${o}-mouse-active`),variant:M({[`${o}-${de}`]:ie},ke(o,H)),affixWrapper:M(`${o}-textarea-affix-wrapper`,{[`${o}-affix-wrapper-rtl`]:Z==="rtl",[`${o}-affix-wrapper-sm`]:Q==="small",[`${o}-affix-wrapper-lg`]:Q==="large",[`${o}-textarea-show-count`]:_||((a=e.count)===null||a===void 0?void 0:a.show)},j)}),prefixCls:o,suffix:ee&&i.createElement("span",{className:`${o}-textarea-suffix`},X),showCount:_,ref:E,onResize:fe,onMouseDown:ne}))))});export{xt as T};
