import{r as s,a as p,j as e,S as V}from"./index-jJjkrASA.js";import{n as h}from"./api-DUmAbDc_.js";import{C as k}from"./index-CiIGZjGq.js";import{R as g}from"./BellOutlined-CtvpoGAM.js";import{B as v}from"./index-Bjq4HH94.js";import{S as E}from"./index-DEZvTLAg.js";import{B as l}from"./button-Bv8EyRxh.js";import{R as N}from"./CheckOutlined-CH83bvZX.js";import{R as T}from"./DeleteOutlined-KwwWlgLe.js";import{R as $}from"./SettingOutlined-CawUlI4j.js";import{T as w}from"./index-KYPfHnUh.js";import{E as y}from"./DownOutlined-CN1mv8sD.js";import{L as x}from"./index-BVlP_4fx.js";import{T as O}from"./index-CnGp7M1w.js";import{s as f}from"./index-C54hh6U9.js";import{I as u}from"./compact-item-CfP0ZfjF.js";import"./Skeleton-CpdpnCda.js";import"./getAllowClear-DijkFjz0.js";import"./CloseCircleFilled-DzUWwAnM.js";import"./RightOutlined-CFLGXWAw.js";import"./CloseOutlined-JFFLTca6.js";import"./EllipsisOutlined-Bct-hJoY.js";import"./PlusOutlined-Bh2Mv01n.js";import"./extendsObject-78o_rR5W.js";import"./index-DDqd5aTF.js";import"./PurePanel-BjAOE1jZ.js";import"./move-DCQK6w6D.js";import"./SearchOutlined-OiCr0NYv.js";import"./row-DbvWXo5m.js";import"./index-F9YRoaSd.js";import"./Pagination-4QOE6sQE.js";import"./LeftOutlined-DSxe2Naa.js";import"./EditOutlined-H6Ny8KCv.js";import"./styleChecker-apvlJGDR.js";import"./TextArea-D2UEp3z5.js";import"./CheckCircleFilled-C1tkfSYQ.js";import"./ExclamationCircleFilled-CjD5Kf6C.js";var S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"},H=function(c,a){return s.createElement(u,p({},c,{ref:a,icon:S}))},B=s.forwardRef(H),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},W=function(c,a){return s.createElement(u,p({},c,{ref:a,icon:L}))},P=s.forwardRef(W),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm72-112c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48zm400-188h-59.3c-2.6 0-5 1.2-6.5 3.3L763.7 538.1l-49.9-68.8a7.92 7.92 0 00-6.5-3.3H648c-6.5 0-10.3 7.4-6.5 12.7l109.2 150.7a16.1 16.1 0 0026 0l165.8-228.7c3.8-5.3 0-12.7-6.5-12.7zm-44 306h-64.2c-5.5 0-10.6 2.9-13.6 7.5a352.2 352.2 0 01-49.8 62.2A355.92 355.92 0 01651.1 840a355 355 0 01-138.7 27.9c-48.1 0-94.8-9.4-138.7-27.9a355.92 355.92 0 01-113.3-76.3A353.06 353.06 0 01184 650.5c-18.6-43.8-28-90.5-28-138.5s9.4-94.7 28-138.5c17.9-42.4 43.6-80.5 76.4-113.2 32.8-32.7 70.9-58.4 113.3-76.3a355 355 0 01138.7-27.9c48.1 0 94.8 9.4 138.7 27.9 42.4 17.9 80.5 43.6 113.3 76.3 19 19 35.6 39.8 49.8 62.2 2.9 4.7 8.1 7.5 13.6 7.5H892c6 0 9.8-6.3 7.2-11.6C828.8 178.5 684.7 82 517.7 80 278.9 77.2 80.5 272.5 80 511.2 79.5 750.1 273.3 944 512.4 944c169.2 0 315.6-97 386.7-238.4A8 8 0 00892 694z"}}]},name:"issues-close",theme:"outlined"},F=function(c,a){return s.createElement(u,p({},c,{ref:a,icon:D}))},G=s.forwardRef(F),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"},q=function(c,a){return s.createElement(u,p({},c,{ref:a,icon:K}))},J=s.forwardRef(q);const Q="_container_j0a4p_1",U="_loading_j0a4p_13",X="_header_j0a4p_27",Y="_title_j0a4p_41",Z="_notificationItem_j0a4p_69",ee="_unread_j0a4p_89",te="_iconWrapper_j0a4p_105",ae="_notificationTitle_j0a4p_127",se="_time_j0a4p_149",r={container:Q,loading:U,header:X,title:Y,notificationItem:Z,unread:ee,iconWrapper:te,notificationTitle:ae,time:se},{Text:ce}=O,Pe=()=>{const[i,c]=s.useState(!0),[a,o]=s.useState([]),[m,_]=s.useState("all");s.useEffect(()=>{I()},[]);const I=async()=>{c(!0);try{const t=await h.getNotifications();o(t.data)}catch(t){console.error("Failed to load notifications:",t)}finally{c(!1)}},z=t=>{switch(t){case"issue":return e.jsx(G,{style:{color:"#2b7de9"}});case"comment":return e.jsx(P,{style:{color:"#10b981"}});case"merge":return e.jsx(J,{style:{color:"#8b5cf6"}});case"system":return e.jsx(B,{style:{color:"#f59e0b"}});default:return e.jsx(g,{style:{color:"#999"}})}},R=async t=>{await h.markAsRead(t),o(a.map(n=>n.id===t?{...n,read:!0}:n)),f.success("已标记为已读")},b=async()=>{await h.markAllAsRead(),o(a.map(t=>({...t,read:!0}))),f.success("已全部标记为已读")},C=t=>{o(a.filter(n=>n.id!==t)),f.success("通知已删除")},M=()=>{o([]),f.success("已清空所有通知")},j=a.filter(t=>m==="all"?!0:m==="unread"?!t.read:t.type===m),d=a.filter(t=>!t.read).length,A=[{key:"all",label:"全部"},{key:"unread",label:e.jsx(v,{count:d,size:"small",offset:[8,0],children:"未读"})},{key:"issue",label:"事项"},{key:"comment",label:"评论"},{key:"system",label:"系统"}];return i?e.jsx("div",{className:r.loading,children:e.jsx(V,{size:"large"})}):e.jsx("div",{className:r.container,children:e.jsxs(k,{children:[e.jsxs("div",{className:r.header,children:[e.jsxs("div",{className:r.title,children:[e.jsxs("h2",{children:[e.jsx(g,{})," 通知中心"]}),d>0&&e.jsx(v,{count:d,style:{marginLeft:8}})]}),e.jsxs(E,{children:[e.jsx(l,{icon:e.jsx(N,{}),onClick:b,disabled:d===0,children:"全部已读"}),e.jsx(l,{icon:e.jsx(T,{}),onClick:M,disabled:a.length===0,children:"清空"}),e.jsx(l,{icon:e.jsx($,{}),children:"设置"})]})]}),e.jsx(w,{activeKey:m,onChange:_,items:A}),j.length===0?e.jsx(y,{description:"暂无通知",image:y.PRESENTED_IMAGE_SIMPLE}):e.jsx(x,{itemLayout:"horizontal",dataSource:j,renderItem:t=>e.jsx(x.Item,{className:`${r.notificationItem} ${t.read?"":r.unread}`,actions:[!t.read&&e.jsx(l,{type:"text",size:"small",onClick:()=>R(t.id),children:"标为已读"}),e.jsx(l,{type:"text",size:"small",danger:!0,onClick:()=>C(t.id),children:"删除"})].filter(Boolean),children:e.jsx(x.Item.Meta,{avatar:e.jsx("div",{className:r.iconWrapper,children:z(t.type)}),title:e.jsxs("a",{href:t.link,className:r.notificationTitle,children:[!t.read&&e.jsx(v,{status:"processing"}),t.title]}),description:e.jsx(ce,{type:"secondary",className:r.time,children:t.time})})})})]})})};export{Pe as default};
