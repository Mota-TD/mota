import{p as q,D as le,_ as J,x as Xe,w as _e,r as K,c as V,o as x,R as T,n as de,a as U,s as Le,t as wt,W as Dt,X as Ot,A as $t,B as Pt,Y as $,f as Tt,m as Rt,h as Mt,i as We,$ as It,y as Lt,l as tt,C as pt,I as _t,ak as At}from"./index-jJjkrASA.js";import{o as Ht,t as Bt,p as yt,K as Ne,I as pe,R as jt,s as Ft}from"./compact-item-CfP0ZfjF.js";import{L as zt}from"./DownOutlined-CN1mv8sD.js";import{g as qt}from"./index-DDCwCr0k.js";import{g as Vt}from"./button-Bv8EyRxh.js";function W(n,t){return n[t]}var Wt=["children"];function mt(n,t){return"".concat(n,"-").concat(t)}function Ut(n){return n&&n.type&&n.type.isTreeNode}function Re(n,t){return n??t}function Ce(n){var t=n||{},r=t.title,e=t._title,o=t.key,l=t.children,c=r||"title";return{title:c,_title:e||[c],key:o||"key",children:l||"children"}}function bt(n){function t(r){var e=Bt(r);return e.map(function(o){if(!Ut(o))return le(!o,"Tree/TreeNode can only accept TreeNode as children."),null;var l=o.key,c=o.props,a=c.children,d=_e(c,Wt),i=q({key:l},d),u=t(a);return u.length&&(i.children=u),i}).filter(function(o){return o})}return t(n)}function je(n,t,r){var e=Ce(r),o=e._title,l=e.key,c=e.children,a=new Set(t===!0?[]:t),d=[];function i(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(g,h){for(var p=mt(f?f.pos:"0",h),b=Re(g[l],p),v,y=0;y<o.length;y+=1){var N=o[y];if(g[N]!==void 0){v=g[N];break}}var m=Object.assign(Ht(g,[].concat(J(o),[l,c])),{title:v,key:b,parent:f,pos:p,children:null,data:g,isStart:[].concat(J(f?f.isStart:[]),[h===0]),isEnd:[].concat(J(f?f.isEnd:[]),[h===u.length-1])});return d.push(m),t===!0||a.has(b)?m.children=i(g[c]||[],m):m.children=[],m})}return i(n),d}function Gt(n,t,r){var e={};Xe(r)==="object"?e=r:e={externalGetKey:r},e=e||{};var o=e,l=o.childrenPropName,c=o.externalGetKey,a=o.fieldNames,d=Ce(a),i=d.key,u=d.children,f=l||u,g;c?typeof c=="string"?g=function(b){return b[c]}:typeof c=="function"&&(g=function(b){return c(b)}):g=function(b,v){return Re(b[i],v)};function h(p,b,v,y){var N=p?p[f]:n,m=p?mt(v.pos,b):"0",C=p?[].concat(J(y),[p]):[];if(p){var E=g(p,m),S={node:p,index:b,pos:m,key:E,parentPos:v.node?v.pos:null,level:v.level+1,nodes:C};t(S)}N&&N.forEach(function(D,w){h(D,w,{node:p,pos:m,level:v?v.level+1:-1},C)})}h(null)}function Kt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.initWrapper,e=t.processEntity,o=t.onProcessFinished,l=t.externalGetKey,c=t.childrenPropName,a=t.fieldNames,d=arguments.length>2?arguments[2]:void 0,i=l||d,u={},f={},g={posEntities:u,keyEntities:f};return r&&(g=r(g)||g),Gt(n,function(h){var p=h.node,b=h.index,v=h.pos,y=h.key,N=h.parentPos,m=h.level,C=h.nodes,E={node:p,nodes:C,index:b,key:y,pos:v,level:m},S=Re(y,v);u[v]=E,f[S]=E,E.parent=u[N],E.parent&&(E.parent.children=E.parent.children||[],E.parent.children.push(E)),e&&e(E,g)},{externalGetKey:i,childrenPropName:c,fieldNames:a}),o&&o(g),g}function Pe(n,t){var r=t.expandedKeys,e=t.selectedKeys,o=t.loadedKeys,l=t.loadingKeys,c=t.checkedKeys,a=t.halfCheckedKeys,d=t.dragOverNodeKey,i=t.dropPosition,u=t.keyEntities,f=W(u,n),g={eventKey:n,expanded:r.indexOf(n)!==-1,selected:e.indexOf(n)!==-1,loaded:o.indexOf(n)!==-1,loading:l.indexOf(n)!==-1,checked:c.indexOf(n)!==-1,halfChecked:a.indexOf(n)!==-1,pos:String(f?f.pos:""),dragOver:d===n&&i===0,dragOverGapTop:d===n&&i===-1,dragOverGapBottom:d===n&&i===1};return g}function j(n){var t=n.data,r=n.expanded,e=n.selected,o=n.checked,l=n.loaded,c=n.loading,a=n.halfChecked,d=n.dragOver,i=n.dragOverGapTop,u=n.dragOverGapBottom,f=n.pos,g=n.active,h=n.eventKey,p=q(q({},t),{},{expanded:r,selected:e,checked:o,loaded:l,loading:c,halfChecked:a,dragOver:d,dragOverGapTop:i,dragOverGapBottom:u,pos:f,active:g,key:h});return"props"in p||Object.defineProperty(p,"props",{get:function(){return le(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),p}function xt(n,t){var r=new Set;return n.forEach(function(e){t.has(e)||r.add(e)}),r}function Xt(n){var t=n||{},r=t.disabled,e=t.disableCheckbox,o=t.checkable;return!!(r||e)||o===!1}function Yt(n,t,r,e){for(var o=new Set(n),l=new Set,c=0;c<=r;c+=1){var a=t.get(c)||new Set;a.forEach(function(f){var g=f.key,h=f.node,p=f.children,b=p===void 0?[]:p;o.has(g)&&!e(h)&&b.filter(function(v){return!e(v.node)}).forEach(function(v){o.add(v.key)})})}for(var d=new Set,i=r;i>=0;i-=1){var u=t.get(i)||new Set;u.forEach(function(f){var g=f.parent,h=f.node;if(!(e(h)||!f.parent||d.has(f.parent.key))){if(e(f.parent.node)){d.add(g.key);return}var p=!0,b=!1;(g.children||[]).filter(function(v){return!e(v.node)}).forEach(function(v){var y=v.key,N=o.has(y);p&&!N&&(p=!1),!b&&(N||l.has(y))&&(b=!0)}),p&&o.add(g.key),b&&l.add(g.key),d.add(g.key)}})}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(xt(l,o))}}function Qt(n,t,r,e,o){for(var l=new Set(n),c=new Set(t),a=0;a<=e;a+=1){var d=r.get(a)||new Set;d.forEach(function(g){var h=g.key,p=g.node,b=g.children,v=b===void 0?[]:b;!l.has(h)&&!c.has(h)&&!o(p)&&v.filter(function(y){return!o(y.node)}).forEach(function(y){l.delete(y.key)})})}c=new Set;for(var i=new Set,u=e;u>=0;u-=1){var f=r.get(u)||new Set;f.forEach(function(g){var h=g.parent,p=g.node;if(!(o(p)||!g.parent||i.has(g.parent.key))){if(o(g.parent.node)){i.add(h.key);return}var b=!0,v=!1;(h.children||[]).filter(function(y){return!o(y.node)}).forEach(function(y){var N=y.key,m=l.has(N);b&&!m&&(b=!1),!v&&(m||c.has(N))&&(v=!0)}),b||l.delete(h.key),v&&c.add(h.key),i.add(h.key)}})}return{checkedKeys:Array.from(l),halfCheckedKeys:Array.from(xt(c,l))}}function Fe(n,t,r,e){var o=[],l;e?l=e:l=Xt;var c=new Set(n.filter(function(u){var f=!!W(r,u);return f||o.push(u),f})),a=new Map,d=0;Object.keys(r).forEach(function(u){var f=r[u],g=f.level,h=a.get(g);h||(h=new Set,a.set(g,h)),h.add(f),d=Math.max(d,g)}),le(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var i;return t===!0?i=Yt(c,a,d,l):i=Qt(c,t.halfCheckedKeys,a,d,l),i}var Ye=K.createContext(null),Jt=K.createContext({}),Zt=function(t){for(var r=t.prefixCls,e=t.level,o=t.isStart,l=t.isEnd,c="".concat(r,"-indent-unit"),a=[],d=0;d<e;d+=1)a.push(K.createElement("span",{key:d,className:V(c,x(x({},"".concat(c,"-start"),o[d]),"".concat(c,"-end"),l[d]))}));return K.createElement("span",{"aria-hidden":"true",className:"".concat(r,"-indent")},a)};const en=K.memo(Zt);var tn=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],nt="open",at="close",nn="---",Te=function(t){var r,e,o,l=t.eventKey,c=t.className,a=t.style,d=t.dragOver,i=t.dragOverGapTop,u=t.dragOverGapBottom,f=t.isLeaf,g=t.isStart,h=t.isEnd,p=t.expanded,b=t.selected,v=t.checked,y=t.halfChecked,N=t.loading,m=t.domRef,C=t.active,E=t.data,S=t.onMouseMove,D=t.selectable,w=_e(t,tn),s=T.useContext(Ye),O=T.useContext(Jt),R=T.useRef(null),M=T.useState(!1),A=de(M,2),P=A[0],_=A[1],I=!!(s.disabled||t.disabled||(r=O.nodeDisabled)!==null&&r!==void 0&&r.call(O,E)),H=T.useMemo(function(){return!s.checkable||t.checkable===!1?!1:s.checkable},[s.checkable,t.checkable]),F=function(k){I||s.onNodeSelect(k,j(t))},te=function(k){I||!H||t.disableCheckbox||s.onNodeCheck(k,j(t),!v)},z=T.useMemo(function(){return typeof D=="boolean"?D:s.selectable},[D,s.selectable]),ye=function(k){s.onNodeClick(k,j(t)),z?F(k):te(k)},se=function(k){s.onNodeDoubleClick(k,j(t))},X=function(k){s.onNodeMouseEnter(k,j(t))},ce=function(k){s.onNodeMouseLeave(k,j(t))},me=function(k){s.onNodeContextMenu(k,j(t))},G=T.useMemo(function(){return!!(s.draggable&&(!s.draggable.nodeDraggable||s.draggable.nodeDraggable(E)))},[s.draggable,E]),ke=function(k){k.stopPropagation(),_(!0),s.onNodeDragStart(k,t);try{k.dataTransfer.setData("text/plain","")}catch{}},ne=function(k){k.preventDefault(),k.stopPropagation(),s.onNodeDragEnter(k,t)},Se=function(k){k.preventDefault(),k.stopPropagation(),s.onNodeDragOver(k,t)},be=function(k){k.stopPropagation(),s.onNodeDragLeave(k,t)},ae=function(k){k.stopPropagation(),_(!1),s.onNodeDragEnd(k,t)},ue=function(k){k.preventDefault(),k.stopPropagation(),_(!1),s.onNodeDrop(k,t)},Ae=function(k){N||s.onNodeExpand(k,j(t))},Ke=T.useMemo(function(){var L=W(s.keyEntities,l)||{},k=L.children;return!!(k||[]).length},[s.keyEntities,l]),re=T.useMemo(function(){return f===!1?!1:f||!s.loadData&&!Ke||s.loadData&&t.loaded&&!Ke},[f,s.loadData,Ke,t.loaded]);T.useEffect(function(){N||typeof s.loadData=="function"&&p&&!re&&!t.loaded&&s.onNodeLoad(j(t))},[N,s.loadData,s.onNodeLoad,p,re,t]);var we=T.useMemo(function(){var L;return(L=s.draggable)!==null&&L!==void 0&&L.icon?T.createElement("span",{className:"".concat(s.prefixCls,"-draggable-icon")},s.draggable.icon):null},[s.draggable]),De=function(k){var Q=t.switcherIcon||s.switcherIcon;return typeof Q=="function"?Q(q(q({},t),{},{isLeaf:k})):Q},Oe=function(){if(re){var k=De(!0);return k!==!1?T.createElement("span",{className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher-noop"))},k):null}var Q=De(!1);return Q!==!1?T.createElement("span",{onClick:Ae,className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher_").concat(p?nt:at))},Q):null},He=T.useMemo(function(){if(!H)return null;var L=typeof H!="boolean"?H:null;return T.createElement("span",{className:V("".concat(s.prefixCls,"-checkbox"),x(x(x({},"".concat(s.prefixCls,"-checkbox-checked"),v),"".concat(s.prefixCls,"-checkbox-indeterminate"),!v&&y),"".concat(s.prefixCls,"-checkbox-disabled"),I||t.disableCheckbox)),onClick:te,role:"checkbox","aria-checked":y?"mixed":v,"aria-disabled":I||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},L)},[H,v,y,I,t.disableCheckbox,t.title]),fe=T.useMemo(function(){return re?null:p?nt:at},[re,p]),B=T.useMemo(function(){return T.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__").concat(fe||"docu"),x({},"".concat(s.prefixCls,"-icon_loading"),N))})},[s.prefixCls,fe,N]),Y=T.useMemo(function(){var L=!!s.draggable,k=!t.disabled&&L&&s.dragOverNodeKey===l;return k?s.dropIndicatorRender({dropPosition:s.dropPosition,dropLevelOffset:s.dropLevelOffset,indent:s.indent,prefixCls:s.prefixCls,direction:s.direction}):null},[s.dropPosition,s.dropLevelOffset,s.indent,s.prefixCls,s.direction,s.draggable,s.dragOverNodeKey,s.dropIndicatorRender]),Z=T.useMemo(function(){var L=t.title,k=L===void 0?nn:L,Q="".concat(s.prefixCls,"-node-content-wrapper"),Be;if(s.showIcon){var Me=t.icon||s.icon;Be=Me?T.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__customize"))},typeof Me=="function"?Me(t):Me):B}else s.loadData&&N&&(Be=B);var Ie;return typeof k=="function"?Ie=k(E):s.titleRender?Ie=s.titleRender(E):Ie=k,T.createElement("span",{ref:R,title:typeof k=="string"?k:"",className:V(Q,"".concat(Q,"-").concat(fe||"normal"),x({},"".concat(s.prefixCls,"-node-selected"),!I&&(b||P))),onMouseEnter:X,onMouseLeave:ce,onContextMenu:me,onClick:ye,onDoubleClick:se},Be,T.createElement("span",{className:"".concat(s.prefixCls,"-title")},Ie),Y)},[s.prefixCls,s.showIcon,t,s.icon,B,s.titleRender,E,fe,X,ce,me,ye,se]),xe=yt(w,{aria:!0,data:!0}),ve=W(s.keyEntities,l)||{},$e=ve.level,Ee=h[h.length-1],oe=!I&&G,ge=s.draggingNodeKey===l,et=D!==void 0?{"aria-selected":!!D}:void 0;return T.createElement("div",U({ref:m,role:"treeitem","aria-expanded":f?void 0:p,className:V(c,"".concat(s.prefixCls,"-treenode"),(o={},x(x(x(x(x(x(x(x(x(x(o,"".concat(s.prefixCls,"-treenode-disabled"),I),"".concat(s.prefixCls,"-treenode-switcher-").concat(p?"open":"close"),!f),"".concat(s.prefixCls,"-treenode-checkbox-checked"),v),"".concat(s.prefixCls,"-treenode-checkbox-indeterminate"),y),"".concat(s.prefixCls,"-treenode-selected"),b),"".concat(s.prefixCls,"-treenode-loading"),N),"".concat(s.prefixCls,"-treenode-active"),C),"".concat(s.prefixCls,"-treenode-leaf-last"),Ee),"".concat(s.prefixCls,"-treenode-draggable"),G),"dragging",ge),x(x(x(x(x(x(x(o,"drop-target",s.dropTargetKey===l),"drop-container",s.dropContainerKey===l),"drag-over",!I&&d),"drag-over-gap-top",!I&&i),"drag-over-gap-bottom",!I&&u),"filter-node",(e=s.filterTreeNode)===null||e===void 0?void 0:e.call(s,j(t))),"".concat(s.prefixCls,"-treenode-leaf"),re))),style:a,draggable:oe,onDragStart:oe?ke:void 0,onDragEnter:G?ne:void 0,onDragOver:G?Se:void 0,onDragLeave:G?be:void 0,onDrop:G?ue:void 0,onDragEnd:G?ae:void 0,onMouseMove:S},et,xe),T.createElement(en,{prefixCls:s.prefixCls,level:$e,isStart:g,isEnd:h}),we,Oe(),He,Z)};Te.isTreeNode=1;function ee(n,t){if(!n)return[];var r=n.slice(),e=r.indexOf(t);return e>=0&&r.splice(e,1),r}function ie(n,t){var r=(n||[]).slice();return r.indexOf(t)===-1&&r.push(t),r}function Qe(n){return n.split("-")}function an(n,t){var r=[],e=W(t,n);function o(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.forEach(function(c){var a=c.key,d=c.children;r.push(a),o(d)})}return o(e.children),r}function rn(n){if(n.parent){var t=Qe(n.pos);return Number(t[t.length-1])===n.parent.children.length-1}return!1}function on(n){var t=Qe(n.pos);return Number(t[t.length-1])===0}function rt(n,t,r,e,o,l,c,a,d,i){var u,f=n.clientX,g=n.clientY,h=n.target.getBoundingClientRect(),p=h.top,b=h.height,v=(i==="rtl"?-1:1)*((o?.x||0)-f),y=(v-12)/e,N=d.filter(function(I){var H;return(H=a[I])===null||H===void 0||(H=H.children)===null||H===void 0?void 0:H.length}),m=W(a,r.eventKey);if(g<p+b/2){var C=c.findIndex(function(I){return I.key===m.key}),E=C<=0?0:C-1,S=c[E].key;m=W(a,S)}var D=m.key,w=m,s=m.key,O=0,R=0;if(!N.includes(D))for(var M=0;M<y&&rn(m);M+=1)m=m.parent,R+=1;var A=t.data,P=m.node,_=!0;return on(m)&&m.level===0&&g<p+b/2&&l({dragNode:A,dropNode:P,dropPosition:-1})&&m.key===r.eventKey?O=-1:(w.children||[]).length&&N.includes(s)?l({dragNode:A,dropNode:P,dropPosition:0})?O=0:_=!1:R===0?y>-1.5?l({dragNode:A,dropNode:P,dropPosition:1})?O=1:_=!1:l({dragNode:A,dropNode:P,dropPosition:0})?O=0:l({dragNode:A,dropNode:P,dropPosition:1})?O=1:_=!1:l({dragNode:A,dropNode:P,dropPosition:1})?O=1:_=!1,{dropPosition:O,dropLevelOffset:R,dropTargetKey:m.key,dropTargetPos:m.pos,dragOverNodeKey:s,dropContainerKey:O===0?null:((u=m.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:_}}function ot(n,t){if(n){var r=t.multiple;return r?n.slice():n.length?[n[0]]:n}}function ze(n){if(!n)return null;var t;if(Array.isArray(n))t={checkedKeys:n,halfCheckedKeys:void 0};else if(Xe(n)==="object")t={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return le(!1,"`checkedKeys` is not an array or an object"),null;return t}function Ue(n,t){var r=new Set;function e(o){if(!r.has(o)){var l=W(t,o);if(l){r.add(o);var c=l.parent,a=l.node;a.disabled||c&&e(c.key)}}}return(n||[]).forEach(function(o){e(o)}),J(r)}var dn=function(t){var r=t.dropPosition,e=t.dropLevelOffset,o=t.indent,l={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case-1:l.top=0,l.left=-e*o;break;case 1:l.bottom=0,l.left=-e*o;break;case 0:l.bottom=0,l.left=o;break}return T.createElement("div",{style:l})};function Et(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function ln(n,t){var r=K.useState(!1),e=de(r,2),o=e[0],l=e[1];Le(function(){if(o)return n(),function(){t()}},[o]),Le(function(){return l(!0),function(){l(!1)}},[])}var sn=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],cn=K.forwardRef(function(n,t){var r=n.className,e=n.style,o=n.motion,l=n.motionNodes,c=n.motionType,a=n.onMotionStart,d=n.onMotionEnd,i=n.active,u=n.treeNodeRequiredProps,f=_e(n,sn),g=K.useState(!0),h=de(g,2),p=h[0],b=h[1],v=K.useContext(Ye),y=v.prefixCls,N=l&&c!=="hide";Le(function(){l&&N!==p&&b(N)},[l]);var m=function(){l&&a()},C=K.useRef(!1),E=function(){l&&!C.current&&(C.current=!0,d())};ln(m,E);var S=function(w){N===w&&E()};return l?K.createElement(wt,U({ref:t,visible:p},o,{motionAppear:c==="show",onVisibleChanged:S}),function(D,w){var s=D.className,O=D.style;return K.createElement("div",{ref:w,className:V("".concat(y,"-treenode-motion"),s),style:O},l.map(function(R){var M=Object.assign({},(Et(R.data),R.data)),A=R.title,P=R.key,_=R.isStart,I=R.isEnd;delete M.children;var H=Pe(P,u);return K.createElement(Te,U({},M,H,{title:A,active:i,data:R.data,key:P,isStart:_,isEnd:I}))}))}):K.createElement(Te,U({domRef:t,className:r,style:e},f,{active:i}))});function un(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n.length,e=t.length;if(Math.abs(r-e)!==1)return{add:!1,key:null};function o(l,c){var a=new Map;l.forEach(function(i){a.set(i,!0)});var d=c.filter(function(i){return!a.has(i)});return d.length===1?d[0]:null}return r<e?{add:!0,key:o(n,t)}:{add:!1,key:o(t,n)}}function it(n,t,r){var e=n.findIndex(function(a){return a.key===r}),o=n[e+1],l=t.findIndex(function(a){return a.key===r});if(o){var c=t.findIndex(function(a){return a.key===o.key});return t.slice(l+1,c)}return t.slice(l+1)}var fn=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],dt={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},vn=function(){},he="RC_TREE_MOTION_".concat(Math.random()),Ge={key:he},Nt={key:he,level:0,index:0,pos:"0",node:Ge,nodes:[Ge]},lt={parent:null,children:[],pos:Nt.pos,data:Ge,title:null,key:he,isStart:[],isEnd:[]};function st(n,t,r,e){return t===!1||!r?n:n.slice(0,Math.ceil(r/e)+1)}function ct(n){var t=n.key,r=n.pos;return Re(t,r)}function gn(n){for(var t=String(n.data.key),r=n;r.parent;)r=r.parent,t="".concat(r.data.key," > ").concat(t);return t}var hn=K.forwardRef(function(n,t){var r=n.prefixCls,e=n.data;n.selectable,n.checkable;var o=n.expandedKeys,l=n.selectedKeys,c=n.checkedKeys,a=n.loadedKeys,d=n.loadingKeys,i=n.halfCheckedKeys,u=n.keyEntities,f=n.disabled,g=n.dragging,h=n.dragOverNodeKey,p=n.dropPosition,b=n.motion,v=n.height,y=n.itemHeight,N=n.virtual,m=n.scrollWidth,C=n.focusable,E=n.activeItem,S=n.focused,D=n.tabIndex,w=n.onKeyDown,s=n.onFocus,O=n.onBlur,R=n.onActiveChange,M=n.onListChangeStart,A=n.onListChangeEnd,P=_e(n,fn),_=K.useRef(null),I=K.useRef(null);K.useImperativeHandle(t,function(){return{scrollTo:function(Y){_.current.scrollTo(Y)},getIndentWidth:function(){return I.current.offsetWidth}}});var H=K.useState(o),F=de(H,2),te=F[0],z=F[1],ye=K.useState(e),se=de(ye,2),X=se[0],ce=se[1],me=K.useState(e),G=de(me,2),ke=G[0],ne=G[1],Se=K.useState([]),be=de(Se,2),ae=be[0],ue=be[1],Ae=K.useState(null),Ke=de(Ae,2),re=Ke[0],we=Ke[1],De=K.useRef(e);De.current=e;function Oe(){var B=De.current;ce(B),ne(B),ue([]),we(null),A()}Le(function(){z(o);var B=un(te,o);if(B.key!==null)if(B.add){var Y=X.findIndex(function(oe){var ge=oe.key;return ge===B.key}),Z=st(it(X,e,B.key),N,v,y),xe=X.slice();xe.splice(Y+1,0,lt),ne(xe),ue(Z),we("show")}else{var ve=e.findIndex(function(oe){var ge=oe.key;return ge===B.key}),$e=st(it(e,X,B.key),N,v,y),Ee=e.slice();Ee.splice(ve+1,0,lt),ne(Ee),ue($e),we("hide")}else X!==e&&(ce(e),ne(e))},[o,e]),K.useEffect(function(){g||Oe()},[g]);var He=b?ke:e,fe={expandedKeys:o,selectedKeys:l,loadedKeys:a,loadingKeys:d,checkedKeys:c,halfCheckedKeys:i,dragOverNodeKey:h,dropPosition:p,keyEntities:u};return K.createElement(K.Fragment,null,S&&E&&K.createElement("span",{style:dt,"aria-live":"assertive"},gn(E)),K.createElement("div",null,K.createElement("input",{style:dt,disabled:C===!1||f,tabIndex:C!==!1?D:null,onKeyDown:w,onFocus:s,onBlur:O,value:"",onChange:vn,"aria-label":"for screen reader"})),K.createElement("div",{className:"".concat(r,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},K.createElement("div",{className:"".concat(r,"-indent")},K.createElement("div",{ref:I,className:"".concat(r,"-indent-unit")}))),K.createElement(zt,U({},P,{data:He,itemKey:ct,height:v,fullHeight:!1,virtual:N,itemHeight:y,scrollWidth:m,prefixCls:"".concat(r,"-list"),ref:_,role:"tree",onVisibleChange:function(Y){Y.every(function(Z){return ct(Z)!==he})&&Oe()}}),function(B){var Y=B.pos,Z=Object.assign({},(Et(B.data),B.data)),xe=B.title,ve=B.key,$e=B.isStart,Ee=B.isEnd,oe=Re(ve,Y);delete Z.key,delete Z.children;var ge=Pe(oe,fe);return K.createElement(cn,U({},Z,ge,{title:xe,active:!!E&&ve===E.key,pos:Y,data:B.data,isStart:$e,isEnd:Ee,motion:b,motionNodes:ve===he?ae:null,motionType:re,onMotionStart:M,onMotionEnd:Oe,treeNodeRequiredProps:fe,onMouseMove:function(){R(null)}}))}))}),pn=10,Je=(function(n){Dt(r,n);var t=Ot(r);function r(){var e;Pt(this,r);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l)),x($(e),"destroyed",!1),x($(e),"delayedDragEnterLogic",void 0),x($(e),"loadingRetryTimes",{}),x($(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ce()}),x($(e),"dragStartMousePosition",null),x($(e),"dragNodeProps",null),x($(e),"currentMouseOverDroppableNodeKey",null),x($(e),"listRef",K.createRef()),x($(e),"onNodeDragStart",function(a,d){var i=e.state,u=i.expandedKeys,f=i.keyEntities,g=e.props.onDragStart,h=d.eventKey;e.dragNodeProps=d,e.dragStartMousePosition={x:a.clientX,y:a.clientY};var p=ee(u,h);e.setState({draggingNodeKey:h,dragChildrenKeys:an(h,f),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(p),window.addEventListener("dragend",e.onWindowDragEnd),g?.({event:a,node:j(d)})}),x($(e),"onNodeDragEnter",function(a,d){var i=e.state,u=i.expandedKeys,f=i.keyEntities,g=i.dragChildrenKeys,h=i.flattenNodes,p=i.indent,b=e.props,v=b.onDragEnter,y=b.onExpand,N=b.allowDrop,m=b.direction,C=d.pos,E=d.eventKey;if(e.currentMouseOverDroppableNodeKey!==E&&(e.currentMouseOverDroppableNodeKey=E),!e.dragNodeProps){e.resetDragState();return}var S=rt(a,e.dragNodeProps,d,p,e.dragStartMousePosition,N,h,f,u,m),D=S.dropPosition,w=S.dropLevelOffset,s=S.dropTargetKey,O=S.dropContainerKey,R=S.dropTargetPos,M=S.dropAllowed,A=S.dragOverNodeKey;if(g.includes(s)||!M){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(P){clearTimeout(e.delayedDragEnterLogic[P])}),e.dragNodeProps.eventKey!==d.eventKey&&(a.persist(),e.delayedDragEnterLogic[C]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var P=J(u),_=W(f,d.eventKey);_&&(_.children||[]).length&&(P=ie(u,d.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(P),y?.(P,{node:j(d),expanded:!0,nativeEvent:a.nativeEvent})}},800)),e.dragNodeProps.eventKey===s&&w===0){e.resetDragState();return}e.setState({dragOverNodeKey:A,dropPosition:D,dropLevelOffset:w,dropTargetKey:s,dropContainerKey:O,dropTargetPos:R,dropAllowed:M}),v?.({event:a,node:j(d),expandedKeys:u})}),x($(e),"onNodeDragOver",function(a,d){var i=e.state,u=i.dragChildrenKeys,f=i.flattenNodes,g=i.keyEntities,h=i.expandedKeys,p=i.indent,b=e.props,v=b.onDragOver,y=b.allowDrop,N=b.direction;if(e.dragNodeProps){var m=rt(a,e.dragNodeProps,d,p,e.dragStartMousePosition,y,f,g,h,N),C=m.dropPosition,E=m.dropLevelOffset,S=m.dropTargetKey,D=m.dropContainerKey,w=m.dropTargetPos,s=m.dropAllowed,O=m.dragOverNodeKey;u.includes(S)||!s||(e.dragNodeProps.eventKey===S&&E===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():C===e.state.dropPosition&&E===e.state.dropLevelOffset&&S===e.state.dropTargetKey&&D===e.state.dropContainerKey&&w===e.state.dropTargetPos&&s===e.state.dropAllowed&&O===e.state.dragOverNodeKey||e.setState({dropPosition:C,dropLevelOffset:E,dropTargetKey:S,dropContainerKey:D,dropTargetPos:w,dropAllowed:s,dragOverNodeKey:O}),v?.({event:a,node:j(d)}))}}),x($(e),"onNodeDragLeave",function(a,d){e.currentMouseOverDroppableNodeKey===d.eventKey&&!a.currentTarget.contains(a.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var i=e.props.onDragLeave;i?.({event:a,node:j(d)})}),x($(e),"onWindowDragEnd",function(a){e.onNodeDragEnd(a,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),x($(e),"onNodeDragEnd",function(a,d){var i=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),i?.({event:a,node:j(d)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),x($(e),"onNodeDrop",function(a,d){var i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=e.state,g=f.dragChildrenKeys,h=f.dropPosition,p=f.dropTargetKey,b=f.dropTargetPos,v=f.dropAllowed;if(v){var y=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),p!==null){var N=q(q({},Pe(p,e.getTreeNodeRequiredProps())),{},{active:((i=e.getActiveItem())===null||i===void 0?void 0:i.key)===p,data:W(e.state.keyEntities,p).node}),m=g.includes(p);le(!m,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=Qe(b),E={event:a,node:j(N),dragNode:e.dragNodeProps?j(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(g),dropToGap:h!==0,dropPosition:h+Number(C[C.length-1])};u||y?.(E),e.dragNodeProps=null}}}),x($(e),"cleanDragState",function(){var a=e.state.draggingNodeKey;a!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),x($(e),"triggerExpandActionExpand",function(a,d){var i=e.state,u=i.expandedKeys,f=i.flattenNodes,g=d.expanded,h=d.key,p=d.isLeaf;if(!(p||a.shiftKey||a.metaKey||a.ctrlKey)){var b=f.filter(function(y){return y.key===h})[0],v=j(q(q({},Pe(h,e.getTreeNodeRequiredProps())),{},{data:b.data}));e.setExpandedKeys(g?ee(u,h):ie(u,h)),e.onNodeExpand(a,v)}}),x($(e),"onNodeClick",function(a,d){var i=e.props,u=i.onClick,f=i.expandAction;f==="click"&&e.triggerExpandActionExpand(a,d),u?.(a,d)}),x($(e),"onNodeDoubleClick",function(a,d){var i=e.props,u=i.onDoubleClick,f=i.expandAction;f==="doubleClick"&&e.triggerExpandActionExpand(a,d),u?.(a,d)}),x($(e),"onNodeSelect",function(a,d){var i=e.state.selectedKeys,u=e.state,f=u.keyEntities,g=u.fieldNames,h=e.props,p=h.onSelect,b=h.multiple,v=d.selected,y=d[g.key],N=!v;N?b?i=ie(i,y):i=[y]:i=ee(i,y);var m=i.map(function(C){var E=W(f,C);return E?E.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:i}),p?.(i,{event:"select",selected:N,node:d,selectedNodes:m,nativeEvent:a.nativeEvent})}),x($(e),"onNodeCheck",function(a,d,i){var u=e.state,f=u.keyEntities,g=u.checkedKeys,h=u.halfCheckedKeys,p=e.props,b=p.checkStrictly,v=p.onCheck,y=d.key,N,m={event:"check",node:d,checked:i,nativeEvent:a.nativeEvent};if(b){var C=i?ie(g,y):ee(g,y),E=ee(h,y);N={checked:C,halfChecked:E},m.checkedNodes=C.map(function(R){return W(f,R)}).filter(Boolean).map(function(R){return R.node}),e.setUncontrolledState({checkedKeys:C})}else{var S=Fe([].concat(J(g),[y]),!0,f),D=S.checkedKeys,w=S.halfCheckedKeys;if(!i){var s=new Set(D);s.delete(y);var O=Fe(Array.from(s),{halfCheckedKeys:w},f);D=O.checkedKeys,w=O.halfCheckedKeys}N=D,m.checkedNodes=[],m.checkedNodesPositions=[],m.halfCheckedKeys=w,D.forEach(function(R){var M=W(f,R);if(M){var A=M.node,P=M.pos;m.checkedNodes.push(A),m.checkedNodesPositions.push({node:A,pos:P})}}),e.setUncontrolledState({checkedKeys:D},!1,{halfCheckedKeys:w})}v?.(N,m)}),x($(e),"onNodeLoad",function(a){var d,i=a.key,u=e.state.keyEntities,f=W(u,i);if(!(f!=null&&(d=f.children)!==null&&d!==void 0&&d.length)){var g=new Promise(function(h,p){e.setState(function(b){var v=b.loadedKeys,y=v===void 0?[]:v,N=b.loadingKeys,m=N===void 0?[]:N,C=e.props,E=C.loadData,S=C.onLoad;if(!E||y.includes(i)||m.includes(i))return null;var D=E(a);return D.then(function(){var w=e.state.loadedKeys,s=ie(w,i);S?.(s,{event:"load",node:a}),e.setUncontrolledState({loadedKeys:s}),e.setState(function(O){return{loadingKeys:ee(O.loadingKeys,i)}}),h()}).catch(function(w){if(e.setState(function(O){return{loadingKeys:ee(O.loadingKeys,i)}}),e.loadingRetryTimes[i]=(e.loadingRetryTimes[i]||0)+1,e.loadingRetryTimes[i]>=pn){var s=e.state.loadedKeys;le(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:ie(s,i)}),h()}p(w)}),{loadingKeys:ie(m,i)}})});return g.catch(function(){}),g}}),x($(e),"onNodeMouseEnter",function(a,d){var i=e.props.onMouseEnter;i?.({event:a,node:d})}),x($(e),"onNodeMouseLeave",function(a,d){var i=e.props.onMouseLeave;i?.({event:a,node:d})}),x($(e),"onNodeContextMenu",function(a,d){var i=e.props.onRightClick;i&&(a.preventDefault(),i({event:a,node:d}))}),x($(e),"onFocus",function(){var a=e.props.onFocus;e.setState({focused:!0});for(var d=arguments.length,i=new Array(d),u=0;u<d;u++)i[u]=arguments[u];a?.apply(void 0,i)}),x($(e),"onBlur",function(){var a=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var d=arguments.length,i=new Array(d),u=0;u<d;u++)i[u]=arguments[u];a?.apply(void 0,i)}),x($(e),"getTreeNodeRequiredProps",function(){var a=e.state,d=a.expandedKeys,i=a.selectedKeys,u=a.loadedKeys,f=a.loadingKeys,g=a.checkedKeys,h=a.halfCheckedKeys,p=a.dragOverNodeKey,b=a.dropPosition,v=a.keyEntities;return{expandedKeys:d||[],selectedKeys:i||[],loadedKeys:u||[],loadingKeys:f||[],checkedKeys:g||[],halfCheckedKeys:h||[],dragOverNodeKey:p,dropPosition:b,keyEntities:v}}),x($(e),"setExpandedKeys",function(a){var d=e.state,i=d.treeData,u=d.fieldNames,f=je(i,a,u);e.setUncontrolledState({expandedKeys:a,flattenNodes:f},!0)}),x($(e),"onNodeExpand",function(a,d){var i=e.state.expandedKeys,u=e.state,f=u.listChanging,g=u.fieldNames,h=e.props,p=h.onExpand,b=h.loadData,v=d.expanded,y=d[g.key];if(!f){var N=i.includes(y),m=!v;if(le(v&&N||!v&&!N,"Expand state not sync with index check"),i=m?ie(i,y):ee(i,y),e.setExpandedKeys(i),p?.(i,{node:d,expanded:m,nativeEvent:a.nativeEvent}),m&&b){var C=e.onNodeLoad(d);C&&C.then(function(){var E=je(e.state.treeData,i,g);e.setUncontrolledState({flattenNodes:E})}).catch(function(){var E=e.state.expandedKeys,S=ee(E,y);e.setExpandedKeys(S)})}}}),x($(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),x($(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),x($(e),"onActiveChange",function(a){var d=e.state.activeKey,i=e.props,u=i.onActiveChange,f=i.itemScrollOffset,g=f===void 0?0:f;d!==a&&(e.setState({activeKey:a}),a!==null&&e.scrollTo({key:a,offset:g}),u?.(a))}),x($(e),"getActiveItem",function(){var a=e.state,d=a.activeKey,i=a.flattenNodes;return d===null?null:i.find(function(u){var f=u.key;return f===d})||null}),x($(e),"offsetActiveKey",function(a){var d=e.state,i=d.flattenNodes,u=d.activeKey,f=i.findIndex(function(p){var b=p.key;return b===u});f===-1&&a<0&&(f=i.length),f=(f+a+i.length)%i.length;var g=i[f];if(g){var h=g.key;e.onActiveChange(h)}else e.onActiveChange(null)}),x($(e),"onKeyDown",function(a){var d=e.state,i=d.activeKey,u=d.expandedKeys,f=d.checkedKeys,g=d.fieldNames,h=e.props,p=h.onKeyDown,b=h.checkable,v=h.selectable;switch(a.which){case Ne.UP:{e.offsetActiveKey(-1),a.preventDefault();break}case Ne.DOWN:{e.offsetActiveKey(1),a.preventDefault();break}}var y=e.getActiveItem();if(y&&y.data){var N=e.getTreeNodeRequiredProps(),m=y.data.isLeaf===!1||!!(y.data[g.children]||[]).length,C=j(q(q({},Pe(i,N)),{},{data:y.data,active:!0}));switch(a.which){case Ne.LEFT:{m&&u.includes(i)?e.onNodeExpand({},C):y.parent&&e.onActiveChange(y.parent.key),a.preventDefault();break}case Ne.RIGHT:{m&&!u.includes(i)?e.onNodeExpand({},C):y.children&&y.children.length&&e.onActiveChange(y.children[0].key),a.preventDefault();break}case Ne.ENTER:case Ne.SPACE:{b&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?e.onNodeCheck({},C,!f.includes(i)):!b&&v&&!C.disabled&&C.selectable!==!1&&e.onNodeSelect({},C);break}}}p?.(a)}),x($(e),"setUncontrolledState",function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var u=!1,f=!0,g={};Object.keys(a).forEach(function(h){if(e.props.hasOwnProperty(h)){f=!1;return}u=!0,g[h]=a[h]}),u&&(!d||f)&&e.setState(q(q({},g),i))}}),x($(e),"scrollTo",function(a){e.listRef.current.scrollTo(a)}),e}return $t(r,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var o=this.props,l=o.activeKey,c=o.itemScrollOffset,a=c===void 0?0:c;l!==void 0&&l!==this.state.activeKey&&(this.setState({activeKey:l}),l!==null&&this.scrollTo({key:l,offset:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var o=this.state,l=o.focused,c=o.flattenNodes,a=o.keyEntities,d=o.draggingNodeKey,i=o.activeKey,u=o.dropLevelOffset,f=o.dropContainerKey,g=o.dropTargetKey,h=o.dropPosition,p=o.dragOverNodeKey,b=o.indent,v=this.props,y=v.prefixCls,N=v.className,m=v.style,C=v.showLine,E=v.focusable,S=v.tabIndex,D=S===void 0?0:S,w=v.selectable,s=v.showIcon,O=v.icon,R=v.switcherIcon,M=v.draggable,A=v.checkable,P=v.checkStrictly,_=v.disabled,I=v.motion,H=v.loadData,F=v.filterTreeNode,te=v.height,z=v.itemHeight,ye=v.scrollWidth,se=v.virtual,X=v.titleRender,ce=v.dropIndicatorRender,me=v.onContextMenu,G=v.onScroll,ke=v.direction,ne=v.rootClassName,Se=v.rootStyle,be=yt(this.props,{aria:!0,data:!0}),ae;M&&(Xe(M)==="object"?ae=M:typeof M=="function"?ae={nodeDraggable:M}:ae={});var ue={prefixCls:y,selectable:w,showIcon:s,icon:O,switcherIcon:R,draggable:ae,draggingNodeKey:d,checkable:A,checkStrictly:P,disabled:_,keyEntities:a,dropLevelOffset:u,dropContainerKey:f,dropTargetKey:g,dropPosition:h,dragOverNodeKey:p,indent:b,direction:ke,dropIndicatorRender:ce,loadData:H,filterTreeNode:F,titleRender:X,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return K.createElement(Ye.Provider,{value:ue},K.createElement("div",{className:V(y,N,ne,x(x(x({},"".concat(y,"-show-line"),C),"".concat(y,"-focused"),l),"".concat(y,"-active-focused"),i!==null)),style:Se},K.createElement(hn,U({ref:this.listRef,prefixCls:y,style:m,data:c,disabled:_,selectable:w,checkable:!!A,motion:I,dragging:d!==null,height:te,itemHeight:z,virtual:se,focusable:E,focused:l,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:me,onScroll:G,scrollWidth:ye},this.getTreeNodeRequiredProps(),be))))}}],[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,a={prevProps:o};function d(D){return!c&&o.hasOwnProperty(D)||c&&c[D]!==o[D]}var i,u=l.fieldNames;if(d("fieldNames")&&(u=Ce(o.fieldNames),a.fieldNames=u),d("treeData")?i=o.treeData:d("children")&&(le(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=bt(o.children)),i){a.treeData=i;var f=Kt(i,{fieldNames:u});a.keyEntities=q(x({},he,Nt),f.keyEntities)}var g=a.keyEntities||l.keyEntities;if(d("expandedKeys")||c&&d("autoExpandParent"))a.expandedKeys=o.autoExpandParent||!c&&o.defaultExpandParent?Ue(o.expandedKeys,g):o.expandedKeys;else if(!c&&o.defaultExpandAll){var h=q({},g);delete h[he];var p=[];Object.keys(h).forEach(function(D){var w=h[D];w.children&&w.children.length&&p.push(w.key)}),a.expandedKeys=p}else!c&&o.defaultExpandedKeys&&(a.expandedKeys=o.autoExpandParent||o.defaultExpandParent?Ue(o.defaultExpandedKeys,g):o.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,i||a.expandedKeys){var b=je(i||l.treeData,a.expandedKeys||l.expandedKeys,u);a.flattenNodes=b}if(o.selectable&&(d("selectedKeys")?a.selectedKeys=ot(o.selectedKeys,o):!c&&o.defaultSelectedKeys&&(a.selectedKeys=ot(o.defaultSelectedKeys,o))),o.checkable){var v;if(d("checkedKeys")?v=ze(o.checkedKeys)||{}:!c&&o.defaultCheckedKeys?v=ze(o.defaultCheckedKeys)||{}:i&&(v=ze(o.checkedKeys)||{checkedKeys:l.checkedKeys,halfCheckedKeys:l.halfCheckedKeys}),v){var y=v,N=y.checkedKeys,m=N===void 0?[]:N,C=y.halfCheckedKeys,E=C===void 0?[]:C;if(!o.checkStrictly){var S=Fe(m,!0,g);m=S.checkedKeys,E=S.halfCheckedKeys}a.checkedKeys=m,a.halfCheckedKeys=E}}return d("loadedKeys")&&(a.loadedKeys=o.loadedKeys),a}}]),r})(K.Component);x(Je,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:dn,allowDrop:function(){return!0},expandAction:!1});x(Je,"TreeNode",Te);var yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},mn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:yn}))},Ct=K.forwardRef(mn),bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},Kn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:bn}))},xn=K.forwardRef(Kn),En={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Nn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:En}))},Cn=K.forwardRef(Nn),kn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},Sn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:kn}))},wn=K.forwardRef(Sn);const Dn=({treeCls:n,treeNodeCls:t,directoryNodeSelectedBg:r,directoryNodeSelectedColor:e,motionDurationMid:o,borderRadius:l,controlItemBgHover:c})=>({[`${n}${n}-directory ${t}`]:{[`${n}-node-content-wrapper`]:{position:"static",[`&:has(${n}-drop-indicator)`]:{position:"relative"},[`> *:not(${n}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${o}`,content:'""',borderRadius:l},"&:hover:before":{background:c}},[`${n}-switcher, ${n}-checkbox, ${n}-draggable-icon`]:{zIndex:1},"&-selected":{background:r,borderRadius:l,[`${n}-switcher, ${n}-draggable-icon`]:{color:e},[`${n}-node-content-wrapper`]:{color:e,background:"transparent","&, &:hover":{color:e},"&:before, &:hover:before":{background:r}}}}}),On=new It("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),$n=(n,t)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),Pn=(n,t)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${We(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),Tn=(n,t)=>{const{treeCls:r,treeNodeCls:e,treeNodePadding:o,titleHeight:l,indentSize:c,nodeSelectedBg:a,nodeHoverBg:d,colorTextQuaternary:i,controlItemBgActiveDisabled:u}=t;return{[r]:Object.assign(Object.assign({},Mt(t)),{"--rc-virtual-list-scrollbar-bg":t.colorSplit,background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${r}-rtl ${r}-switcher_close ${r}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${r}-active-focused)`]:Lt(t),[`${r}-list-holder-inner`]:{alignItems:"flex-start"},[`&${r}-block-node`]:{[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:On,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[e]:{display:"flex",alignItems:"flex-start",marginBottom:o,lineHeight:We(l),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:o},[`&-disabled ${r}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${r}-checkbox-disabled + ${r}-node-selected,&${e}-disabled${e}-selected ${r}-node-content-wrapper`]:{backgroundColor:u},[`${r}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${e}-disabled)`]:{[`${r}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${r}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${e}-disabled).filter-node ${r}-title`]:{color:t.colorPrimary,fontWeight:t.fontWeightStrong},"&-draggable":{cursor:"grab",[`${r}-draggable-icon`]:{flexShrink:0,width:l,textAlign:"center",visibility:"visible",color:i},[`&${e}-disabled ${r}-draggable-icon`]:{visibility:"hidden"}}},[`${r}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:c}},[`${r}-draggable-icon`]:{visibility:"hidden"},[`${r}-switcher, ${r}-checkbox`]:{marginInlineEnd:t.calc(t.calc(l).sub(t.controlInteractiveSize)).div(2).equal()},[`${r}-switcher`]:Object.assign(Object.assign({},$n(n,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:l,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:l,height:l,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${r}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${r}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(l).div(2).equal()).mul(.8).equal(),height:t.calc(l).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${r}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:l,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},Pn(n,t)),{"&:hover":{backgroundColor:d},[`&${r}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:a},[`${r}-iconEle`]:{display:"inline-block",width:l,height:l,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${r}-unselectable ${r}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${r}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${r}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last ${r}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${We(t.calc(l).div(2).equal())} !important`}})}},Rn=(n,t,r=!0)=>{const e=`.${n}`,o=`${e}-treenode`,l=t.calc(t.paddingXS).div(2).equal(),c=Rt(t,{treeCls:e,treeNodeCls:o,treeNodePadding:l});return[Tn(n,c),r&&Dn(c)].filter(Boolean)},Mn=n=>{const{controlHeightSM:t,controlItemBgHover:r,controlItemBgActive:e}=n,o=t;return{titleHeight:o,indentSize:o,nodeHoverBg:r,nodeHoverColor:n.colorText,nodeSelectedBg:e,nodeSelectedColor:n.colorText}},In=n=>{const{colorTextLightSolid:t,colorPrimary:r}=n;return Object.assign(Object.assign({},Mn(n)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:r})},Ln=Tt("Tree",(n,{prefixCls:t})=>[{[n.componentCls]:qt(`${t}-checkbox`,n)},Rn(t,n),Vt(n)],In),ut=4;function _n(n){const{dropPosition:t,dropLevelOffset:r,prefixCls:e,indent:o,direction:l="ltr"}=n,c=l==="ltr"?"left":"right",a=l==="ltr"?"right":"left",d={[c]:-r*o+ut,[a]:0};switch(t){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[c]=o+ut;break}return T.createElement("div",{style:d,className:`${e}-drop-indicator`})}var An={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},Hn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:An}))},Bn=K.forwardRef(Hn),jn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Fn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:jn}))},zn=K.forwardRef(Fn),qn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Vn=function(t,r){return K.createElement(pe,U({},t,{ref:r,icon:qn}))},Wn=K.forwardRef(Vn);const Un=n=>{var t,r;const{prefixCls:e,switcherIcon:o,treeNodeProps:l,showLine:c,switcherLoadingIcon:a}=n,{isLeaf:d,expanded:i,loading:u}=l;if(u)return K.isValidElement(a)?a:K.createElement(jt,{className:`${e}-switcher-loading-icon`});let f;if(c&&typeof c=="object"&&(f=c.showLeafIcon),d){if(!c)return null;if(typeof f!="boolean"&&f){const p=typeof f=="function"?f(l):f,b=`${e}-switcher-line-custom-icon`;return K.isValidElement(p)?tt(p,{className:V((t=p.props)===null||t===void 0?void 0:t.className,b)}):p}return f?K.createElement(Ct,{className:`${e}-switcher-line-icon`}):K.createElement("span",{className:`${e}-switcher-leaf-line`})}const g=`${e}-switcher-icon`,h=typeof o=="function"?o(l):o;return K.isValidElement(h)?tt(h,{className:V((r=h.props)===null||r===void 0?void 0:r.className,g)}):h!==void 0?h:c?i?K.createElement(zn,{className:`${e}-switcher-line-icon`}):K.createElement(Wn,{className:`${e}-switcher-line-icon`}):K.createElement(Bn,{className:g})},kt=T.forwardRef((n,t)=>{var r;const{getPrefixCls:e,direction:o,virtual:l,tree:c}=T.useContext(pt),{prefixCls:a,className:d,showIcon:i=!1,showLine:u,switcherIcon:f,switcherLoadingIcon:g,blockNode:h=!1,children:p,checkable:b=!1,selectable:v=!0,draggable:y,disabled:N,motion:m,style:C}=n,E=e("tree",a),S=e(),D=T.useContext(_t),w=N??D,s=m??Object.assign(Object.assign({},Ft(S)),{motionAppear:!1}),O=Object.assign(Object.assign({},n),{checkable:b,selectable:v,showIcon:i,motion:s,blockNode:h,disabled:w,showLine:!!u,dropIndicatorRender:_n}),[R,M,A]=Ln(E),[,P]=At(),_=P.paddingXS/2+(((r=P.Tree)===null||r===void 0?void 0:r.titleHeight)||P.controlHeightSM),I=T.useMemo(()=>{if(!y)return!1;let F={};switch(typeof y){case"function":F.nodeDraggable=y;break;case"object":F=Object.assign({},y);break}return F.icon!==!1&&(F.icon=F.icon||T.createElement(wn,null)),F},[y]),H=F=>T.createElement(Un,{prefixCls:E,switcherIcon:f,switcherLoadingIcon:g,treeNodeProps:F,showLine:u});return R(T.createElement(Je,Object.assign({itemHeight:_,ref:t,virtual:l},O,{style:Object.assign(Object.assign({},c?.style),C),prefixCls:E,className:V({[`${E}-icon-hide`]:!i,[`${E}-block-node`]:h,[`${E}-unselectable`]:!v,[`${E}-rtl`]:o==="rtl",[`${E}-disabled`]:w},c?.className,d,M,A),direction:o,checkable:b&&T.createElement("span",{className:`${E}-checkbox-inner`}),selectable:v,switcherIcon:H,draggable:I}),p))}),ft=0,qe=1,vt=2;function Ze(n,t,r){const{key:e,children:o}=r;function l(c){const a=c[e],d=c[o];t(a,c)!==!1&&Ze(d||[],t,r)}n.forEach(l)}function Gn({treeData:n,expandedKeys:t,startKey:r,endKey:e,fieldNames:o}){const l=[];let c=ft;if(r&&r===e)return[r];if(!r||!e)return[];function a(d){return d===r||d===e}return Ze(n,d=>{if(c===vt)return!1;if(a(d)){if(l.push(d),c===ft)c=qe;else if(c===qe)return c=vt,!1}else c===qe&&l.push(d);return t.includes(d)},Ce(o)),l}function Ve(n,t,r){const e=J(t),o=[];return Ze(n,(l,c)=>{const a=e.indexOf(l);return a!==-1&&(o.push(c),e.splice(a,1)),!!e.length},Ce(r)),o}var gt=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};function Xn(n){const{isLeaf:t,expanded:r}=n;return t?K.createElement(Ct,null):r?K.createElement(xn,null):K.createElement(Cn,null)}function ht({treeData:n,children:t}){return n||bt(t)}const Yn=(n,t)=>{var{defaultExpandAll:r,defaultExpandParent:e,defaultExpandedKeys:o}=n,l=gt(n,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const c=K.useRef(null),a=K.useRef(null),d=()=>{const{keyEntities:w}=Kt(ht(l),{fieldNames:l.fieldNames});let s;return r?s=Object.keys(w):e?s=Ue(l.expandedKeys||o||[],w):s=l.expandedKeys||o||[],s},[i,u]=K.useState(l.selectedKeys||l.defaultSelectedKeys||[]),[f,g]=K.useState(()=>d());K.useEffect(()=>{"selectedKeys"in l&&u(l.selectedKeys)},[l.selectedKeys]),K.useEffect(()=>{"expandedKeys"in l&&g(l.expandedKeys)},[l.expandedKeys]);const h=(w,s)=>{var O;return"expandedKeys"in l||g(w),(O=l.onExpand)===null||O===void 0?void 0:O.call(l,w,s)},p=(w,s)=>{var O;const{multiple:R,fieldNames:M}=l,{node:A,nativeEvent:P}=s,{key:_=""}=A,I=ht(l),H=Object.assign(Object.assign({},s),{selected:!0}),F=P?.ctrlKey||P?.metaKey,te=P?.shiftKey;let z;R&&F?(z=w,c.current=_,a.current=z,H.selectedNodes=Ve(I,z,M)):R&&te?(z=Array.from(new Set([].concat(J(a.current||[]),J(Gn({treeData:I,expandedKeys:f,startKey:_,endKey:c.current,fieldNames:M}))))),H.selectedNodes=Ve(I,z,M)):(z=[_],c.current=_,a.current=z,H.selectedNodes=Ve(I,z,M)),(O=l.onSelect)===null||O===void 0||O.call(l,z,H),"selectedKeys"in l||u(z)},{getPrefixCls:b,direction:v}=K.useContext(pt),{prefixCls:y,className:N,showIcon:m=!0,expandAction:C="click"}=l,E=gt(l,["prefixCls","className","showIcon","expandAction"]),S=b("tree",y),D=V(`${S}-directory`,{[`${S}-directory-rtl`]:v==="rtl"},N);return K.createElement(kt,Object.assign({icon:Xn,ref:t,blockNode:!0},E,{showIcon:m,expandAction:C,prefixCls:S,className:D,expandedKeys:f,selectedKeys:i,onSelect:p,onExpand:h}))},Qn=K.forwardRef(Yn),St=kt;St.DirectoryTree=Qn;St.TreeNode=Te;export{Cn as R,St as T,Fe as a,ee as b,Kt as c,ie as d};
