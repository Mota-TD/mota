import{r as c,a as p,j as e,S}from"./index-jJjkrASA.js";import{m as b}from"./api-DUmAbDc_.js";import{R as f,C as a}from"./row-DbvWXo5m.js";import{C as l}from"./index-CiIGZjGq.js";import{R}from"./RocketOutlined-BsuGE40H.js";import{T as h}from"./index-C-XfQ0lz.js";import{S as n}from"./index-XJKxwp2H.js";import{R as w}from"./ClockCircleOutlined-CiuAMI-C.js";import{R as C}from"./BugOutlined-CKjc4xeY.js";import{I as g}from"./compact-item-CfP0ZfjF.js";import{T as I}from"./index-CnGp7M1w.js";import{P as v}from"./progress-BfLFEfyG.js";import{R as L}from"./CheckCircleOutlined-CPk3538Q.js";import{R as T}from"./SyncOutlined-U0XDYDsF.js";import{R as $}from"./PauseCircleOutlined-CnIcW44N.js";import{T as F}from"./index-KYPfHnUh.js";import"./index-F9YRoaSd.js";import"./getAllowClear-DijkFjz0.js";import"./CloseCircleFilled-DzUWwAnM.js";import"./Skeleton-CpdpnCda.js";import"./useClosable-Dcdur4ya.js";import"./CloseOutlined-JFFLTca6.js";import"./extendsObject-78o_rR5W.js";import"./EditOutlined-H6Ny8KCv.js";import"./styleChecker-apvlJGDR.js";import"./TextArea-D2UEp3z5.js";import"./CheckOutlined-CH83bvZX.js";import"./CheckCircleFilled-C1tkfSYQ.js";import"./EllipsisOutlined-Bct-hJoY.js";import"./PlusOutlined-Bh2Mv01n.js";var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},D=function(i,s){return c.createElement(g,p({},i,{ref:s,icon:O}))},M=c.forwardRef(D),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},A=function(i,s){return c.createElement(g,p({},i,{ref:s,icon:z}))},V=c.forwardRef(A),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},H=function(i,s){return c.createElement(g,p({},i,{ref:s,icon:Q}))},U=c.forwardRef(H);const k="_container_mcrls_1",q="_loading_mcrls_13",E="_header_mcrls_27",P="_metricCard_mcrls_43",B="_metricHeader_mcrls_53",G="_metricIcon_mcrls_67",J="_trend_mcrls_75",K="_trendUp_mcrls_87",W="_trendDown_mcrls_95",X="_trendNeutral_mcrls_103",Y="_buildStats_mcrls_111",Z="_issueStats_mcrls_127",ee="_issueStat_mcrls_127",se="_issueValue_mcrls_151",re="_issueLabel_mcrls_163",r={container:k,loading:q,header:E,metricCard:P,metricHeader:B,metricIcon:G,trend:J,trendUp:K,trendDown:W,trendNeutral:X,buildStats:Y,issueStats:Z,issueStat:ee,issueValue:se,issueLabel:re},{Title:d,Text:j}=I,Oe=()=>{const[o,i]=c.useState(!0),[s,_]=c.useState(null);c.useEffect(()=>{N()},[]);const N=async()=>{i(!0);try{const t=await b.getMetrics();_(t.data)}catch(t){console.error("Failed to load metrics:",t)}finally{i(!1)}},m=t=>{switch(t){case"elite":return"#52c41a";case"high":return"#1890ff";case"medium":return"#faad14";case"low":return"#ff4d4f";default:return"#999"}},u=t=>{switch(t){case"elite":return"精英";case"high":return"高效";case"medium":return"中等";case"low":return"待改进";default:return t}},x=t=>t>0?e.jsxs("span",{className:r.trendUp,children:[e.jsx(V,{})," ",Math.abs(t),"%"]}):t<0?e.jsxs("span",{className:r.trendDown,children:[e.jsx(M,{})," ",Math.abs(t),"%"]}):e.jsx("span",{className:r.trendNeutral,children:"持平"});if(o||!s)return e.jsx("div",{className:r.loading,children:e.jsx(S,{size:"large"})});const y=[{key:"dora",label:"DORA 指标",children:e.jsxs(f,{gutter:[24,24],children:[e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsxs("div",{className:r.metricHeader,children:[e.jsx(R,{className:r.metricIcon,style:{color:"#2b7de9"}}),e.jsx(h,{color:m(s.dora.deploymentFrequency.level),children:u(s.dora.deploymentFrequency.level)})]}),e.jsx(n,{title:"部署频率",value:s.dora.deploymentFrequency.value,suffix:s.dora.deploymentFrequency.unit}),e.jsxs("div",{className:r.trend,children:["较上周 ",x(s.dora.deploymentFrequency.trend)]})]})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsxs("div",{className:r.metricHeader,children:[e.jsx(w,{className:r.metricIcon,style:{color:"#10b981"}}),e.jsx(h,{color:m(s.dora.leadTime.level),children:u(s.dora.leadTime.level)})]}),e.jsx(n,{title:"变更前置时间",value:s.dora.leadTime.value,suffix:s.dora.leadTime.unit}),e.jsxs("div",{className:r.trend,children:["较上周 ",x(s.dora.leadTime.trend)]})]})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsxs("div",{className:r.metricHeader,children:[e.jsx(C,{className:r.metricIcon,style:{color:"#f59e0b"}}),e.jsx(h,{color:m(s.dora.changeFailureRate.level),children:u(s.dora.changeFailureRate.level)})]}),e.jsx(n,{title:"变更失败率",value:s.dora.changeFailureRate.value,suffix:s.dora.changeFailureRate.unit}),e.jsxs("div",{className:r.trend,children:["较上周 ",x(s.dora.changeFailureRate.trend)]})]})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsxs("div",{className:r.metricHeader,children:[e.jsx(U,{className:r.metricIcon,style:{color:"#8b5cf6"}}),e.jsx(h,{color:m(s.dora.mttr.level),children:u(s.dora.mttr.level)})]}),e.jsx(n,{title:"平均恢复时间",value:s.dora.mttr.value,suffix:s.dora.mttr.unit}),e.jsxs("div",{className:r.trend,children:["较上周 ",x(s.dora.mttr.trend)]})]})})]})},{key:"quality",label:"代码质量",children:e.jsxs(f,{gutter:[24,24],children:[e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsx(d,{level:5,children:"测试覆盖率"}),e.jsx(v,{type:"circle",percent:s.codeQuality.coverage,strokeColor:s.codeQuality.coverage>=80?"#52c41a":s.codeQuality.coverage>=60?"#faad14":"#ff4d4f"})]})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsxs(l,{className:r.metricCard,children:[e.jsx(d,{level:5,children:"代码重复率"}),e.jsx(v,{type:"circle",percent:s.codeQuality.duplication,strokeColor:s.codeQuality.duplication<=5?"#52c41a":s.codeQuality.duplication<=10?"#faad14":"#ff4d4f",format:t=>`${t}%`})]})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsx(l,{className:r.metricCard,children:e.jsx(n,{title:"技术债务",value:s.codeQuality.technicalDebt})})}),e.jsx(a,{xs:24,sm:12,lg:6,children:e.jsx(l,{className:r.metricCard,children:e.jsx(n,{title:"代码异味",value:s.codeQuality.codeSmells,suffix:"个"})})})]})},{key:"build",label:"构建统计",children:e.jsxs(f,{gutter:[24,24],children:[e.jsx(a,{xs:24,lg:12,children:e.jsxs(l,{className:r.metricCard,children:[e.jsx(d,{level:5,children:"构建成功率"}),e.jsx(v,{percent:s.buildStats.successRate,strokeColor:{"0%":"#108ee9","100%":"#87d068"},size:"default"}),e.jsxs("div",{className:r.buildStats,children:[e.jsx("div",{children:e.jsxs(j,{type:"success",children:["成功: ",s.buildStats.success]})}),e.jsx("div",{children:e.jsxs(j,{type:"danger",children:["失败: ",s.buildStats.failed]})}),e.jsx("div",{children:e.jsxs(j,{children:["总计: ",s.buildStats.total]})})]})]})}),e.jsx(a,{xs:24,lg:12,children:e.jsxs(l,{className:r.metricCard,children:[e.jsx(d,{level:5,children:"事项完成情况"}),e.jsxs("div",{className:r.issueStats,children:[e.jsxs("div",{className:r.issueStat,children:[e.jsx(L,{style:{color:"#52c41a",fontSize:24}}),e.jsxs("div",{children:[e.jsx("div",{className:r.issueValue,children:s.issueStats.completed}),e.jsx("div",{className:r.issueLabel,children:"已完成"})]})]}),e.jsxs("div",{className:r.issueStat,children:[e.jsx(T,{style:{color:"#1890ff",fontSize:24}}),e.jsxs("div",{children:[e.jsx("div",{className:r.issueValue,children:s.issueStats.inProgress}),e.jsx("div",{className:r.issueLabel,children:"进行中"})]})]}),e.jsxs("div",{className:r.issueStat,children:[e.jsx($,{style:{color:"#999",fontSize:24}}),e.jsxs("div",{children:[e.jsx("div",{className:r.issueValue,children:s.issueStats.pending}),e.jsx("div",{className:r.issueLabel,children:"待处理"})]})]})]})]})})]})}];return e.jsxs("div",{className:r.container,children:[e.jsxs("div",{className:r.header,children:[e.jsx(d,{level:3,children:"效能度量"}),e.jsx(j,{type:"secondary",children:"基于 DORA 指标的研发效能分析"})]}),e.jsx(F,{items:y})]})};export{Oe as default};
