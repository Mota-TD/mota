import{r as o,a as b,b as z,j as e,L as N}from"./index-jJjkrASA.js";import{u as C}from"./api-DUmAbDc_.js";import{F as t}from"./index-CNgAusFm.js";import{I as i}from"./index-DR1THxsW.js";import{R}from"./UserOutlined-eSGHSk0-.js";import{R as O}from"./MailOutlined-oI0r4Pgz.js";import{R as g}from"./LockOutlined-IKnLZhyG.js";import{B as n}from"./button-Bv8EyRxh.js";import{I as w}from"./compact-item-CfP0ZfjF.js";import{R as F}from"./SafetyOutlined-CC1al3Mu.js";import{R as p}from"./TeamOutlined-CpiuOpeO.js";import{C as P}from"./index-x8kxzmt0.js";import{S}from"./index-k5d85VRc.js";import{s as h}from"./index-C54hh6U9.js";import"./getAllowClear-DijkFjz0.js";import"./CloseCircleFilled-DzUWwAnM.js";import"./useForm-PTvZdMqb.js";import"./row-DbvWXo5m.js";import"./index-F9YRoaSd.js";import"./CheckCircleFilled-C1tkfSYQ.js";import"./ExclamationCircleFilled-CjD5Kf6C.js";import"./Input-BYqifNCC.js";import"./SearchOutlined-OiCr0NYv.js";import"./TextArea-D2UEp3z5.js";import"./RightOutlined-CFLGXWAw.js";import"./useBubbleLock-DgSu3aet.js";import"./index-DDCwCr0k.js";import"./CheckOutlined-CH83bvZX.js";import"./CloseOutlined-JFFLTca6.js";import"./progress-BfLFEfyG.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},$=function(m,c){return o.createElement(w,b({},m,{ref:c,icon:B}))},q=o.forwardRef($);const H="_registerContainer_7dkzy_1",M="_registerHeader_7dkzy_11",E="_steps_7dkzy_47",T="_stepContent_7dkzy_55",V="_codeInput_7dkzy_63",A="_stepButtons_7dkzy_91",D="_teamOptions_7dkzy_111",L="_teamOption_7dkzy_111",G="_active_7dkzy_153",J="_teamIcon_7dkzy_163",K="_teamInfo_7dkzy_173",Q="_registerFooter_7dkzy_199",s={registerContainer:H,registerHeader:M,steps:E,stepContent:T,codeInput:V,stepButtons:A,teamOptions:D,teamOption:L,active:G,teamIcon:J,teamInfo:K,registerFooter:Q},ze=()=>{const x=z(),[m,c]=o.useState(!1),[u,l]=o.useState(0),[d,j]=o.useState({}),I=r=>{j({...d,...r}),l(1)},v=r=>{j({...d,...r}),l(2)},y=async r=>{c(!0);try{const a={...d,...r};await C.register(a),h.success("注册成功！"),x("/login")}catch(a){h.error(a.message||"注册失败")}finally{c(!1)}},k=()=>{h.success("验证码已发送")},f=[{title:"基本信息",content:e.jsxs(t,{name:"basicInfo",onFinish:I,size:"large",layout:"vertical",children:[e.jsx(t.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],children:e.jsx(i,{prefix:e.jsx(R,{}),placeholder:"请输入您的姓名"})}),e.jsx(t.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(i,{prefix:e.jsx(O,{}),placeholder:"请输入邮箱地址"})}),e.jsx(t.Item,{name:"password",label:"密码",rules:[{required:!0,message:"请输入密码"},{min:8,message:"密码至少8位"}],children:e.jsx(i.Password,{prefix:e.jsx(g,{}),placeholder:"请设置密码（至少8位）"})}),e.jsx(t.Item,{name:"confirmPassword",label:"确认密码",dependencies:["password"],rules:[{required:!0,message:"请确认密码"},({getFieldValue:r})=>({validator(a,_){return!_||r("password")===_?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:e.jsx(i.Password,{prefix:e.jsx(g,{}),placeholder:"请再次输入密码"})}),e.jsx(t.Item,{children:e.jsx(n,{type:"primary",htmlType:"submit",block:!0,children:"下一步"})})]})},{title:"验证手机",content:e.jsxs(t,{name:"verifyPhone",onFinish:v,size:"large",layout:"vertical",children:[e.jsx(t.Item,{name:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的手机号"}],children:e.jsx(i,{prefix:e.jsx(q,{}),placeholder:"请输入手机号"})}),e.jsx(t.Item,{name:"code",label:"验证码",rules:[{required:!0,message:"请输入验证码"}],children:e.jsxs("div",{className:s.codeInput,children:[e.jsx(i,{prefix:e.jsx(F,{}),placeholder:"请输入验证码"}),e.jsx(n,{onClick:k,children:"获取验证码"})]})}),e.jsx(t.Item,{children:e.jsxs("div",{className:s.stepButtons,children:[e.jsx(n,{onClick:()=>l(0),children:"上一步"}),e.jsx(n,{type:"primary",htmlType:"submit",children:"下一步"})]})})]})},{title:"团队设置",content:e.jsxs(t,{name:"teamSetup",onFinish:y,size:"large",layout:"vertical",initialValues:{teamAction:"create"},children:[e.jsx(t.Item,{name:"teamAction",label:"团队设置",children:e.jsxs("div",{className:s.teamOptions,children:[e.jsxs("div",{className:`${s.teamOption} ${s.active}`,onClick:()=>{},children:[e.jsx(p,{className:s.teamIcon}),e.jsxs("div",{className:s.teamInfo,children:[e.jsx("h4",{children:"创建新团队"}),e.jsx("p",{children:"创建一个新的团队并成为管理员"})]})]}),e.jsxs("div",{className:s.teamOption,onClick:()=>{},children:[e.jsx(p,{className:s.teamIcon}),e.jsxs("div",{className:s.teamInfo,children:[e.jsx("h4",{children:"加入已有团队"}),e.jsx("p",{children:"通过邀请码加入已有团队"})]})]})]})}),e.jsx(t.Item,{name:"teamName",label:"团队名称",rules:[{required:!0,message:"请输入团队名称"}],children:e.jsx(i,{prefix:e.jsx(p,{}),placeholder:"请输入团队名称"})}),e.jsx(t.Item,{name:"agreement",valuePropName:"checked",rules:[{validator:(r,a)=>a?Promise.resolve():Promise.reject(new Error("请阅读并同意服务条款"))}],children:e.jsxs(P,{children:["我已阅读并同意 ",e.jsx("a",{href:"#",children:"服务条款"})," 和 ",e.jsx("a",{href:"#",children:"隐私政策"})]})}),e.jsx(t.Item,{children:e.jsxs("div",{className:s.stepButtons,children:[e.jsx(n,{onClick:()=>l(1),children:"上一步"}),e.jsx(n,{type:"primary",htmlType:"submit",loading:m,children:"完成注册"})]})})]})}];return e.jsxs("div",{className:s.registerContainer,children:[e.jsxs("div",{className:s.registerHeader,children:[e.jsx("h2",{children:"创建账号"}),e.jsx("p",{children:"开始您的摩塔之旅"})]}),e.jsx(S,{current:u,items:f.map(r=>({title:r.title})),className:s.steps}),e.jsx("div",{className:s.stepContent,children:f[u].content}),e.jsx("div",{className:s.registerFooter,children:e.jsxs("p",{children:["已有账号？",e.jsx(N,{to:"/login",children:"立即登录"})]})})]})};export{ze as default};
