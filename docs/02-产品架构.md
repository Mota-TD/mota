# 摩塔 Mota - 产品架构

> 版本：2.0  
> 日期：2025-12-27  
> 文档类型：产品设计稿

---

## 1. 整体架构概览

### 1.1 系统架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              用户层                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │   Web端     │  │   移动端    │  │   桌面端    │  │   API接入   │        │
│  │  (React)    │  │  (H5/App)   │  │  (Electron) │  │  (OpenAPI)  │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              网关层                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        API Gateway                                   │   │
│  │  • 路由转发  • 负载均衡  • 限流熔断  • 认证鉴权  • 日志监控        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              应用层                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │  项目服务   │  │  任务服务   │  │  用户服务   │  │  组织服务   │        │
│  │  Project    │  │  Task       │  │  User       │  │  Org        │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │  知识服务   │  │  文档服务   │  │  通知服务   │  │  日历服务   │        │
│  │  Knowledge  │  │  Document   │  │  Notify     │  │  Calendar   │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          AI服务集群                                  │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │   │
│  │  │ RAG服务 │  │方案生成 │  │任务分解 │  │智能分工 │  │进度分析 │   │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              数据层                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │   MySQL     │  │   Redis     │  │ Elasticsearch│  │   MinIO     │        │
│  │  业务数据   │  │  缓存/会话  │  │  全文检索   │  │  文件存储   │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                         │
│  │   Milvus    │  │   Neo4j     │  │   Kafka     │                         │
│  │  向量数据库 │  │  图数据库   │  │  消息队列   │                         │
│  └─────────────┘  └─────────────┘  └─────────────┘                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              AI模型层                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │   GPT-4     │  │   Claude    │  │  通义千问   │  │  本地模型   │        │
│  │  (OpenAI)   │  │ (Anthropic) │  │  (阿里云)   │  │  (私有化)   │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 架构分层说明

| 层级 | 职责 | 关键技术 |
|------|------|----------|
| 用户层 | 用户交互界面 | React、React Native、Electron |
| 网关层 | 请求路由、安全控制 | Spring Cloud Gateway、JWT |
| 应用层 | 业务逻辑处理 | Spring Boot、微服务 |
| 数据层 | 数据存储和检索 | MySQL、Redis、Milvus、Neo4j |
| AI模型层 | AI推理能力 | GPT-4、Claude、通义千问 |

---

## 2. 前端架构

### 2.1 技术栈

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              前端技术栈                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  框架层                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  React 18 + TypeScript                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  UI层                                                                       │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Ant Design 5.x + CSS Modules                                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  状态管理                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Zustand (轻量级状态管理)                                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  路由                                                                       │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  React Router v6                                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  构建工具                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Vite                                                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  HTTP客户端                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Axios                                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 目录结构

```
mota-web/
├── src/
│   ├── components/          # 公共组件
│   │   ├── AIProgressPrediction/    # AI进度预测
│   │   ├── KanbanBoard/             # 看板组件
│   │   ├── MilestoneTimeline/       # 里程碑时间线
│   │   ├── TaskComments/            # 任务评论
│   │   ├── ThemeSwitch/             # 主题切换
│   │   └── ...
│   │
│   ├── pages/               # 页面组件
│   │   ├── dashboard/       # 工作台
│   │   ├── projects/        # 项目管理
│   │   ├── my-tasks/        # 我的任务
│   │   ├── ai/              # AI功能模块
│   │   │   ├── assistant/   # AI助手
│   │   │   ├── solution/    # 方案生成
│   │   │   ├── ppt/         # PPT生成
│   │   │   ├── news/        # 智能新闻
│   │   │   └── knowledge-base/  # AI知识库
│   │   ├── knowledge/       # 知识管理
│   │   ├── documents/       # 文档管理
│   │   ├── departments/     # 部门管理
│   │   ├── members/         # 成员管理
│   │   └── ...
│   │
│   ├── layouts/             # 布局组件
│   │   ├── ConsoleLayout/   # 控制台布局
│   │   └── AuthLayout/      # 认证布局
│   │
│   ├── services/            # API服务
│   │   ├── api/             # API接口定义
│   │   └── request.ts       # 请求封装
│   │
│   ├── store/               # 状态管理
│   │   ├── auth.ts          # 认证状态
│   │   └── theme.ts         # 主题状态
│   │
│   ├── styles/              # 全局样式
│   │   ├── index.css        # 全局CSS
│   │   └── theme.css        # 主题变量
│   │
│   ├── router/              # 路由配置
│   │   └── index.tsx
│   │
│   └── utils/               # 工具函数
│
├── public/                  # 静态资源
├── index.html
├── package.json
├── tsconfig.json
└── vite.config.ts
```

### 2.3 页面架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              页面架构                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                           App.tsx                                    │   │
│  │                        (根组件/路由)                                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│           ┌────────────────────────┼────────────────────────┐               │
│           │                        │                        │               │
│           ▼                        ▼                        ▼               │
│  ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐     │
│  │   AuthLayout    │      │  ConsoleLayout  │      │   HomeLayout    │     │
│  │   (认证页面)    │      │   (控制台)      │      │   (官网)        │     │
│  └─────────────────┘      └─────────────────┘      └─────────────────┘     │
│           │                        │                        │               │
│           ▼                        ▼                        ▼               │
│  ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐     │
│  │  • Login        │      │  • Dashboard    │      │  • Home         │     │
│  │  • Register     │      │  • Projects     │      │  • Features     │     │
│  │  • ForgotPwd    │      │  • Tasks        │      │  • Pricing      │     │
│  └─────────────────┘      │  • AI Modules   │      └─────────────────┘     │
│                           │  • Knowledge    │                               │
│                           │  • Settings     │                               │
│                           └─────────────────┘                               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 后端架构

### 3.1 微服务架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              微服务架构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        Spring Cloud Gateway                          │   │
│  │                          (API网关)                                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│  ┌─────────────────────────────────┼─────────────────────────────────┐     │
│  │                                 │                                 │     │
│  ▼                                 ▼                                 ▼     │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐                   │
│  │ mota-project  │  │  mota-user    │  │  mota-ai      │                   │
│  │   项目服务    │  │   用户服务    │  │   AI服务      │                   │
│  │ ───────────── │  │ ───────────── │  │ ───────────── │                   │
│  │ • 项目管理    │  │ • 用户管理    │  │ • RAG检索     │                   │
│  │ • 任务管理    │  │ • 认证授权    │  │ • 方案生成    │                   │
│  │ • 里程碑      │  │ • 组织管理    │  │ • 任务分解    │                   │
│  │ • 进度追踪    │  │ • 权限控制    │  │ • 智能分工    │                   │
│  └───────────────┘  └───────────────┘  └───────────────┘                   │
│                                                                             │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐                   │
│  │mota-knowledge │  │ mota-notify   │  │ mota-calendar │                   │
│  │   知识服务    │  │   通知服务    │  │   日历服务    │                   │
│  │ ───────────── │  │ ───────────── │  │ ───────────── │                   │
│  │ • 知识库管理  │  │ • 消息推送    │  │ • 日程管理    │                   │
│  │ • 文档管理    │  │ • 邮件通知    │  │ • 日历订阅    │                   │
│  │ • 知识图谱    │  │ • 站内信      │  │ • 提醒服务    │                   │
│  │ • 智能检索    │  │ • WebSocket   │  │ • 冲突检测    │                   │
│  └───────────────┘  └───────────────┘  └───────────────┘                   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        公共组件                                      │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │   │
│  │  │ 配置中心 │  │ 注册中心 │  │ 链路追踪 │  │ 日志中心 │  │ 监控告警 │   │   │
│  │  │ Nacos   │  │ Nacos   │  │ Skywalking│ │ ELK     │  │Prometheus│   │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 服务职责

| 服务 | 职责 | 核心功能 |
|------|------|----------|
| mota-project | 项目管理 | 项目CRUD、任务管理、里程碑、进度追踪 |
| mota-user | 用户管理 | 用户认证、权限控制、组织管理 |
| mota-ai | AI服务 | RAG检索、方案生成、任务分解、智能分工 |
| mota-knowledge | 知识管理 | 知识库、文档管理、知识图谱 |
| mota-notify | 通知服务 | 消息推送、邮件、站内信 |
| mota-calendar | 日历服务 | 日程管理、日历订阅、提醒 |

---

## 4. AI架构

### 4.1 AI能力架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              AI能力架构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  应用层                                                                     │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │
│  │方案生成 │ │PPT生成  │ │任务分解 │ │智能分工 │ │进度分析 │ │报表洞察 │  │
│  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘  │
│       │           │           │           │           │           │        │
│  ─────┴───────────┴───────────┴───────────┴───────────┴───────────┴─────   │
│                                    │                                        │
│  能力层                            ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          RAG引擎                                     │   │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐            │   │
│  │  │   文档解析    │  │   向量检索    │  │   答案生成    │            │   │
│  │  │  • PDF解析    │  │  • 语义匹配   │  │  • 上下文组装 │            │   │
│  │  │  • Word解析   │  │  • 相似度计算 │  │  • Prompt构建 │            │   │
│  │  │  • 文本分块   │  │  • 重排序     │  │  • 流式输出   │            │   │
│  │  └───────────────┘  └───────────────┘  └───────────────┘            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        知识图谱引擎                                  │   │
│  │  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐            │   │
│  │  │   实体提取    │  │   关系构建    │  │   图谱查询    │            │   │
│  │  │  • NER识别    │  │  • 关系抽取   │  │  • 路径查询   │            │   │
│  │  │  • 实体链接   │  │  • 知识融合   │  │  • 推理查询   │            │   │
│  │  └───────────────┘  └───────────────┘  └───────────────┘            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│  数据层                            ▼                                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │  向量数据库 │  │  图数据库   │  │  文档存储   │  │  业务数据   │       │
│  │  (Milvus)   │  │  (Neo4j)    │  │  (MinIO)    │  │  (MySQL)    │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│                                    │                                        │
│  模型层                            ▼                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        多模型网关                                    │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                 │   │
│  │  │  GPT-4  │  │ Claude  │  │通义千问 │  │本地模型 │                 │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 RAG流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              RAG检索流程                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  1. 文档入库流程                                                            │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐                  │
│  │ 文档上传 │ -> │ 文档解析 │ -> │ 文本分块 │ -> │ 向量化  │                  │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘                  │
│                                                      │                      │
│                                                      ▼                      │
│                                               ┌─────────┐                   │
│                                               │ 向量存储 │                   │
│                                               │ (Milvus) │                   │
│                                               └─────────┘                   │
│                                                                             │
│  2. 检索生成流程                                                            │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐  │
│  │用户提问 │ -> │问题向量化│ -> │相似度检索│ -> │上下文组装│ -> │ LLM生成 │  │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘    └─────────┘  │
│                                     │                              │        │
│                                     ▼                              ▼        │
│                              ┌─────────┐                    ┌─────────┐    │
│                              │ Top-K   │                    │ 流式输出 │    │
│                              │ 文档块  │                    │ 给用户   │    │
│                              └─────────┘                    └─────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 数据架构

### 5.1 数据库设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              数据库架构                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  MySQL (业务数据)                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  用户域                    项目域                    知识域          │   │
│  │  ┌─────────────┐          ┌─────────────┐          ┌─────────────┐ │   │
│  │  │ users       │          │ projects    │          │ documents   │ │   │
│  │  │ departments │          │ tasks       │          │ knowledge   │ │   │
│  │  │ roles       │          │ milestones  │          │ categories  │ │   │
│  │  │ permissions │          │ comments    │          │ tags        │ │   │
│  │  └─────────────┘          └─────────────┘          └─────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  Redis (缓存/会话)                                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • 用户会话 (Session)                                                │   │
│  │  • 热点数据缓存                                                      │   │
│  │  • 分布式锁                                                          │   │
│  │  • 消息队列 (简单场景)                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  Milvus (向量数据库)                                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • 文档向量 (document_vectors)                                       │   │
│  │  • 问答向量 (qa_vectors)                                             │   │
│  │  • 用户画像向量 (user_profile_vectors)                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  Neo4j (图数据库)                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  节点类型：                                                          │   │
│  │  • Person (人员)                                                     │   │
│  │  • Project (项目)                                                    │   │
│  │  • Document (文档)                                                   │   │
│  │  • Concept (概念)                                                    │   │
│  │  • Skill (技能)                                                      │   │
│  │                                                                      │   │
│  │  关系类型：                                                          │   │
│  │  • BELONGS_TO (属于)                                                 │   │
│  │  • CREATED (创建)                                                    │   │
│  │  • RELATED_TO (相关)                                                 │   │
│  │  • HAS_SKILL (拥有技能)                                              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  MinIO (对象存储)                                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • 文档原文件                                                        │   │
│  │  • 图片附件                                                          │   │
│  │  • 导出文件                                                          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 5.2 核心数据模型

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              核心数据模型                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  用户模型                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  User                                                                │   │
│  │  ├── id: Long                                                        │   │
│  │  ├── username: String                                                │   │
│  │  ├── email: String                                                   │   │
│  │  ├── departmentId: Long                                              │   │
│  │  ├── role: String                                                    │   │
│  │  ├── skills: List<Skill>          // 技能标签                        │   │
│  │  ├── workload: Float              // 当前负载                        │   │
│  │  └── performanceScore: Float      // 绩效评分                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  项目模型                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Project                                                             │   │
│  │  ├── id: Long                                                        │   │
│  │  ├── name: String                                                    │   │
│  │  ├── description: String                                             │   │
│  │  ├── status: ProjectStatus                                           │   │
│  │  ├── startDate: Date                                                 │   │
│  │  ├── endDate: Date                                                   │   │
│  │  ├── progress: Float                                                 │   │
│  │  ├── milestones: List<Milestone>                                     │   │
│  │  └── members: List<ProjectMember>                                    │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  任务模型                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  Task                                                                │   │
│  │  ├── id: Long                                                        │   │
│  │  ├── title: String                                                   │   │
│  │  ├── description: String                                             │   │
│  │  ├── projectId: Long                                                 │   │
│  │  ├── milestoneId: Long                                               │   │
│  │  ├── assigneeId: Long                                                │   │
│  │  ├── status: TaskStatus                                              │   │
│  │  ├── priority: Priority                                              │   │
│  │  ├── estimatedHours: Float        // 预估工时                        │   │
│  │  ├── actualHours: Float           // 实际工时                        │   │
│  │  ├── dueDate: Date                                                   │   │
│  │  ├── dependencies: List<Long>     // 依赖任务                        │   │
│  │  └── requiredSkills: List<Skill>  // 所需技能                        │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  知识文档模型                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  KnowledgeDocument                                                   │   │
│  │  ├── id: Long                                                        │   │
│  │  ├── title: String                                                   │   │
│  │  ├── content: String                                                 │   │
│  │  ├── type: DocumentType                                              │   │
│  │  ├── categoryId: Long                                                │   │
│  │  ├── tags: List<String>                                              │   │
│  │  ├── vectorId: String             // 向量ID                          │   │
│  │  ├── graphNodeId: String          // 图谱节点ID                      │   │
│  │  └── metadata: Map<String, Object>                                   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 6. 部署架构

### 6.1 云原生部署

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Kubernetes集群                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          Ingress Controller                          │   │
│  │                        (Nginx / Traefik)                             │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                    │                                        │
│  ┌─────────────────────────────────┼─────────────────────────────────┐     │
│  │                                 │                                 │     │
│  ▼                                 ▼                                 ▼     │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐                   │
│  │   前端Pod     │  │   后端Pod     │  │   AI Pod      │                   │
│  │  (3 replicas) │  │  (3 replicas) │  │  (2 replicas) │                   │
│  │ ───────────── │  │ ───────────── │  │ ───────────── │                   │
│  │ • Nginx       │  │ • Gateway     │  │ • RAG服务     │                   │
│  │ • React App   │  │ • 业务服务    │  │ • 模型推理    │                   │
│  └───────────────┘  └───────────────┘  └───────────────┘                   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          数据层 (StatefulSet)                        │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │   │
│  │  │ MySQL   │  │ Redis   │  │ Milvus  │  │ Neo4j   │  │ MinIO   │   │   │
│  │  │ (主从)  │  │ (集群)  │  │ (集群)  │  │ (单节点)│  │ (集群)  │   │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                          监控运维                                    │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐                 │   │
│  │  │Prometheus│ │ Grafana │  │ Jaeger  │  │ ELK     │                 │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 6.2 私有化部署

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              私有化部署方案                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  最小配置（10人以下团队）                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  单机部署 (Docker Compose)                                           │   │
│  │  • 服务器：8核16G + 500G SSD                                         │   │
│  │  • 所有服务容器化部署                                                │   │
│  │  • 本地模型（可选）                                                  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  标准配置（50人以下团队）                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  3节点集群 (Kubernetes)                                              │   │
│  │  • 应用节点：8核16G x 2                                              │   │
│  │  • 数据节点：8核32G x 1                                              │   │
│  │  • GPU节点：A10 24G x 1（可选）                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  企业配置（100人以上团队）                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  高可用集群 (Kubernetes)                                             │   │
│  │  • 应用节点：8核16G x 4                                              │   │
│  │  • 数据节点：16核64G x 3                                             │   │
│  │  • GPU节点：A10 24G x 2                                              │   │
│  │  • 负载均衡、主从复制、自动备份                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

*文档结束*