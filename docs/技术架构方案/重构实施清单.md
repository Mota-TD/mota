# 摩塔 Mota - 重构实施清单

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | v1.1 |
| 创建日期 | 2026-01-07 |
| 更新日期 | 2026-01-07 |
| 总任务数 | 450+ |
| 预计工期 | 5-7个月 |

---

## 目录

1. [第一阶段：基础设施搭建](#第一阶段基础设施搭建)
2. [第二阶段：后端服务重构](#第二阶段后端服务重构)
3. [第三阶段：前端Web端重构](#第三阶段前端web端重构)
4. [第四阶段：移动App开发](#第四阶段移动app开发)
5. [第五阶段：运营管理后台开发](#第五阶段运营管理后台开发)
6. [第六阶段：监控与运维体系](#第六阶段监控与运维体系)

---

## 第一阶段：基础设施搭建

### 1.1 服务器环境准备

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.1.1 | 规划服务器资源（CPU、内存、存储） | P0 | 4h | ☐ |
| 1.1.2 | 准备服务器（云服务器或物理机） | P0 | 4h | ☐ |
| 1.1.3 | 安装Docker和Docker Compose | P0 | 2h | ☐ |
| 1.1.4 | 配置服务器安全组和防火墙 | P0 | 2h | ☐ |
| 1.1.5 | 配置SSH密钥登录 | P0 | 1h | ☐ |
| 1.1.6 | 创建部署用户和目录结构 | P0 | 1h | ☐ |
| 1.1.7 | 配置服务器时间同步（NTP） | P0 | 1h | ☐ |
| 1.1.8 | 编写服务器环境文档 | P1 | 2h | ☐ |

### 1.2 Nginx反向代理配置

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.2.1 | 安装Nginx | P0 | 1h | ☐ |
| 1.2.2 | 配置SSL证书（首选Let's Encrypt免费证书，备用付费证书） | P0 | 2h | ☐ |
| 1.2.3 | 配置反向代理规则（API路由） | P0 | 4h | ☐ |
| 1.2.4 | 配置静态资源服务 | P0 | 2h | ☐ |
| 1.2.5 | 配置Gzip压缩 | P0 | 1h | ☐ |
| 1.2.6 | 配置请求限流 | P1 | 2h | ☐ |
| 1.2.7 | 配置跨域CORS | P0 | 1h | ☐ |
| 1.2.8 | 配置访问日志 | P0 | 1h | ☐ |
| 1.2.9 | 配置健康检查 | P0 | 1h | ☐ |
| 1.2.10 | 编写Nginx配置文档 | P1 | 2h | ☐ |

### 1.3 Spring Cloud Gateway配置

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.3.1 | 重构Gateway路由配置 | P0 | 4h | ☐ |
| 1.3.2 | 配置JWT认证过滤器 | P0 | 4h | ☐ |
| 1.3.3 | 配置限流过滤器 | P0 | 4h | ☐ |
| 1.3.4 | 配置熔断降级 | P0 | 2h | ☐ |
| 1.3.5 | 配置跨域处理 | P0 | 1h | ☐ |
| 1.3.6 | 配置请求日志 | P1 | 2h | ☐ |
| 1.3.7 | 配置Prometheus监控端点 | P1 | 2h | ☐ |
| 1.3.8 | 配置IP黑白名单 | P1 | 2h | ☐ |
| 1.3.9 | 配置请求体大小限制 | P1 | 1h | ☐ |
| 1.3.10 | 编写Gateway配置文档 | P1 | 2h | ☐ |

### 1.4 中间件部署

#### 1.4.1 Nacos部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.1.1 | 编写Nacos Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.1.2 | 配置Nacos持久化（MySQL） | P0 | 2h | ☐ |
| 1.4.1.3 | 创建命名空间（dev, test, prod） | P0 | 1h | ☐ |
| 1.4.1.4 | 迁移现有配置到Nacos | P0 | 4h | ☐ |
| 1.4.1.5 | 配置Nacos鉴权 | P1 | 2h | ☐ |

#### 1.4.2 Redis部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.2.1 | 编写Redis Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.2.2 | 配置Redis持久化（RDB+AOF） | P0 | 2h | ☐ |
| 1.4.2.3 | 配置Redis密码认证 | P0 | 1h | ☐ |
| 1.4.2.4 | 配置Redis内存策略 | P0 | 1h | ☐ |
| 1.4.2.5 | 配置Redis慢查询日志 | P1 | 1h | ☐ |

#### 1.4.3 MySQL部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.3.1 | 编写MySQL Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.3.2 | 配置MySQL主从复制（可选） | P1 | 4h | ☐ |
| 1.4.3.3 | 创建各服务数据库（mota_user, mota_project等） | P0 | 2h | ☐ |
| 1.4.3.4 | 迁移现有数据 | P0 | 8h | ☐ |
| 1.4.3.5 | 配置MySQL备份策略 | P0 | 2h | ☐ |
| 1.4.3.6 | 配置MySQL慢查询日志 | P1 | 1h | ☐ |

#### 1.4.4 Kafka部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.4.1 | 编写Kafka Docker Compose配置（含Zookeeper） | P0 | 2h | ☐ |
| 1.4.4.2 | 创建Topic（mota.user.*, mota.task.*, mota.notification.*等） | P0 | 2h | ☐ |
| 1.4.4.3 | 配置Topic分区和副本 | P0 | 2h | ☐ |
| 1.4.4.4 | 部署Kafka UI（可选） | P1 | 1h | ☐ |

#### 1.4.5 Elasticsearch部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.5.1 | 编写Elasticsearch Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.5.2 | 配置ES索引模板 | P0 | 4h | ☐ |
| 1.4.5.3 | 配置ES ILM生命周期策略 | P1 | 2h | ☐ |
| 1.4.5.4 | 部署Kibana | P1 | 1h | ☐ |
| 1.4.5.5 | 迁移现有搜索数据 | P0 | 4h | ☐ |

#### 1.4.6 Milvus部署（向量数据库）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.6.1 | 编写Milvus Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.6.2 | 配置Milvus存储（MinIO） | P0 | 2h | ☐ |
| 1.4.6.3 | 创建向量集合（knowledge_vectors, news_vectors等） | P0 | 2h | ☐ |
| 1.4.6.4 | 迁移现有向量数据 | P0 | 4h | ☐ |
| 1.4.6.5 | 部署Attu（Milvus管理界面） | P1 | 1h | ☐ |

#### 1.4.7 MinIO部署（对象存储）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.4.7.1 | 编写MinIO Docker Compose配置 | P0 | 2h | ☐ |
| 1.4.7.2 | 创建Bucket（mota-files, mota-images, mota-documents等） | P0 | 1h | ☐ |
| 1.4.7.3 | 配置Bucket策略 | P0 | 2h | ☐ |
| 1.4.7.4 | 迁移现有文件 | P0 | 8h | ☐ |
| 1.4.7.5 | 配置CDN加速（可选） | P2 | 4h | ☐ |

### 1.5 Docker Compose编排

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.5.1 | 编写中间件docker-compose.yml | P0 | 4h | ☐ |
| 1.5.2 | 编写后端服务docker-compose.yml | P0 | 4h | ☐ |
| 1.5.3 | 编写前端服务docker-compose.yml | P0 | 2h | ☐ |
| 1.5.4 | 编写监控服务docker-compose.yml | P0 | 2h | ☐ |
| 1.5.5 | 配置Docker网络 | P0 | 1h | ☐ |
| 1.5.6 | 配置Docker数据卷 | P0 | 1h | ☐ |
| 1.5.7 | 编写环境变量配置文件 | P0 | 2h | ☐ |
| 1.5.8 | 编写部署脚本（deploy.sh） | P0 | 4h | ☐ |
| 1.5.9 | 编写备份脚本（backup.sh） | P0 | 4h | ☐ |
| 1.5.10 | 编写Docker Compose部署文档 | P1 | 4h | ☐ |

### 1.6 后端服务Dockerfile

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.6.1 | 编写Java服务基础Dockerfile | P0 | 2h | ☐ |
| 1.6.2 | 编写各微服务Dockerfile | P0 | 4h | ☐ |
| 1.6.3 | 编写NestJS BFF服务Dockerfile | P0 | 2h | ☐ |
| 1.6.4 | 优化镜像大小（多阶段构建） | P1 | 2h | ☐ |
| 1.6.5 | 配置健康检查 | P0 | 1h | ☐ |

### 1.7 前端应用Dockerfile

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 1.7.1 | 编写Next.js应用Dockerfile | P0 | 2h | ☐ |
| 1.7.2 | 编写管理后台Dockerfile | P0 | 2h | ☐ |
| 1.7.3 | 优化镜像大小 | P1 | 2h | ☐ |

---

## 第二阶段：后端服务重构

### 2.1 公共模块重构

#### 2.1.1 mota-common-core 重构

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.1.1 | 重构统一响应结果类（Result, PageResult） | P0 | 2h | ☐ |
| 2.1.1.2 | 重构统一异常处理（GlobalExceptionHandler） | P0 | 4h | ☐ |
| 2.1.1.3 | 重构业务异常类（BusinessException） | P0 | 2h | ☐ |
| 2.1.1.4 | 添加多租户上下文（TenantContext） | P0 | 4h | ☐ |
| 2.1.1.5 | 添加用户上下文（UserContext） | P0 | 2h | ☐ |
| 2.1.1.6 | 添加分布式ID生成器（Snowflake） | P0 | 2h | ☐ |
| 2.1.1.7 | 添加通用工具类（DateUtils, StringUtils等） | P1 | 4h | ☐ |
| 2.1.1.8 | 添加通用校验注解 | P1 | 2h | ☐ |
| 2.1.1.9 | 添加通用枚举类 | P1 | 2h | ☐ |
| 2.1.1.10 | 编写单元测试 | P1 | 4h | ☐ |

#### 2.1.2 mota-common-security 重构

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.2.1 | 重构JWT工具类（JwtUtils） | P0 | 4h | ☐ |
| 2.1.2.2 | 重构安全配置（SecurityConfig） | P0 | 4h | ☐ |
| 2.1.2.3 | 重构用户认证过滤器 | P0 | 4h | ☐ |
| 2.1.2.4 | 添加多租户认证支持 | P0 | 4h | ☐ |
| 2.1.2.5 | 添加权限注解（@RequirePermission） | P0 | 4h | ☐ |
| 2.1.2.6 | 添加数据权限注解（@DataScope） | P0 | 4h | ☐ |
| 2.1.2.7 | 添加登录用户信息类（LoginUser） | P0 | 2h | ☐ |
| 2.1.2.8 | 添加安全工具类（SecurityUtils） | P0 | 2h | ☐ |
| 2.1.2.9 | 添加密码加密工具 | P1 | 2h | ☐ |
| 2.1.2.10 | 编写单元测试 | P1 | 4h | ☐ |

#### 2.1.3 mota-common-mybatis 重构

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.3.1 | 重构MyBatis-Plus配置 | P0 | 2h | ☐ |
| 2.1.3.2 | 添加多租户插件配置 | P0 | 4h | ☐ |
| 2.1.3.3 | 添加数据权限插件 | P0 | 4h | ☐ |
| 2.1.3.4 | 添加自动填充处理器（创建时间、更新时间、租户ID等） | P0 | 2h | ☐ |
| 2.1.3.5 | 添加分页插件配置 | P0 | 1h | ☐ |
| 2.1.3.6 | 添加乐观锁插件 | P1 | 1h | ☐ |
| 2.1.3.7 | 添加SQL性能分析插件（开发环境） | P1 | 1h | ☐ |
| 2.1.3.8 | 添加基础实体类（BaseEntity） | P0 | 2h | ☐ |
| 2.1.3.9 | 添加基础Mapper接口 | P0 | 1h | ☐ |
| 2.1.3.10 | 编写单元测试 | P1 | 4h | ☐ |

#### 2.1.4 mota-common-redis 重构

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.4.1 | 重构Redis配置（支持Cluster） | P0 | 2h | ☐ |
| 2.1.4.2 | 重构RedisService工具类 | P0 | 4h | ☐ |
| 2.1.4.3 | 添加分布式锁工具（RedisLock） | P0 | 4h | ☐ |
| 2.1.4.4 | 添加缓存注解支持 | P1 | 2h | ☐ |
| 2.1.4.5 | 添加多租户缓存隔离 | P0 | 4h | ☐ |
| 2.1.4.6 | 添加缓存预热机制 | P1 | 2h | ☐ |
| 2.1.4.7 | 编写单元测试 | P1 | 4h | ☐ |

#### 2.1.5 mota-common-kafka 新增

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.5.1 | 创建Kafka配置类 | P0 | 2h | ☐ |
| 2.1.5.2 | 创建消息生产者模板 | P0 | 4h | ☐ |
| 2.1.5.3 | 创建消息消费者模板 | P0 | 4h | ☐ |
| 2.1.5.4 | 定义领域事件基类（DomainEvent） | P0 | 2h | ☐ |
| 2.1.5.5 | 定义集成事件基类（IntegrationEvent） | P0 | 2h | ☐ |
| 2.1.5.6 | 添加消息序列化配置 | P0 | 2h | ☐ |
| 2.1.5.7 | 添加消息重试机制 | P0 | 4h | ☐ |
| 2.1.5.8 | 添加死信队列处理 | P1 | 4h | ☐ |
| 2.1.5.9 | 编写单元测试 | P1 | 4h | ☐ |

#### 2.1.6 mota-common-feign 重构

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.1.6.1 | 重构Feign配置（FeignConfig） | P0 | 2h | ☐ |
| 2.1.6.2 | 重构错误解码器（FeignErrorDecoder） | P0 | 2h | ☐ |
| 2.1.6.3 | 添加请求拦截器（传递租户ID、用户ID） | P0 | 4h | ☐ |
| 2.1.6.4 | 添加熔断降级配置 | P0 | 4h | ☐ |
| 2.1.6.5 | 定义所有服务的Feign客户端接口 | P0 | 8h | ☐ |
| 2.1.6.6 | 定义所有服务的降级实现 | P0 | 8h | ☐ |
| 2.1.6.7 | 编写单元测试 | P1 | 4h | ☐ |

### 2.2 用户服务重构（mota-user-service）

#### 2.2.1 用户管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.2.1.1 | 重构用户注册接口 | UM-001 | P0 | 4h | ☐ |
| 2.2.1.2 | 重构用户登录接口 | UM-002 | P0 | 4h | ☐ |
| 2.2.1.3 | 实现SSO登录（OAuth2） | UM-003 | P0 | 8h | ☐ |
| 2.2.1.4 | 实现SSO登录（SAML） | UM-003 | P1 | 8h | ☐ |
| 2.2.1.5 | 实现SSO登录（LDAP） | UM-003 | P1 | 8h | ☐ |
| 2.2.1.6 | 实现SSO登录（CAS） | UM-003 | P2 | 8h | ☐ |
| 2.2.1.7 | 重构用户信息管理接口 | UM-004 | P0 | 4h | ☐ |
| 2.2.1.8 | 重构账号状态管理（激活/禁用） | UM-005 | P0 | 2h | ☐ |
| 2.2.1.9 | 重构密码策略 | UM-006 | P0 | 4h | ☐ |
| 2.2.1.10 | 重构登录日志记录 | UM-007 | P0 | 2h | ☐ |
| 2.2.1.11 | 添加多租户用户隔离 | - | P0 | 4h | ☐ |
| 2.2.1.12 | 添加用户头像上传 | - | P1 | 2h | ☐ |
| 2.2.1.13 | 添加用户偏好设置 | - | P1 | 4h | ☐ |

#### 2.2.2 组织架构功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.2.2.1 | 重构部门管理CRUD | OG-001 | P0 | 4h | ☐ |
| 2.2.2.2 | 重构团队管理CRUD | OG-002 | P0 | 4h | ☐ |
| 2.2.2.3 | 重构岗位管理CRUD | OG-003 | P0 | 4h | ☐ |
| 2.2.2.4 | 实现岗位层级管理 | OG-003 | P0 | 4h | ☐ |
| 2.2.2.5 | 实现岗位职责配置 | OG-003 | P1 | 2h | ☐ |
| 2.2.2.6 | 重构人员调动功能 | OG-004 | P0 | 4h | ☐ |
| 2.2.2.7 | 实现调动审批流程 | OG-004 | P1 | 8h | ☐ |
| 2.2.2.8 | 重构组织架构图可视化 | OG-005 | P1 | 4h | ☐ |
| 2.2.2.9 | 实现架构快照功能 | OG-005 | P2 | 4h | ☐ |

#### 2.2.3 角色权限功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.2.3.1 | 重构角色定义CRUD | RP-001 | P0 | 4h | ☐ |
| 2.2.3.2 | 重构权限配置功能 | RP-002 | P0 | 4h | ☐ |
| 2.2.3.3 | 重构数据权限控制 | RP-003 | P0 | 8h | ☐ |
| 2.2.3.4 | 实现数据权限规则（全部/本人/本部门/本部门及下级/自定义） | RP-003 | P0 | 8h | ☐ |
| 2.2.3.5 | 重构功能权限控制 | RP-004 | P0 | 4h | ☐ |
| 2.2.3.6 | 完善RBAC模型实现 | RP-005 | P0 | 4h | ☐ |
| 2.2.3.7 | 添加权限缓存机制 | - | P1 | 4h | ☐ |

### 2.3 租户服务新建（mota-tenant-service）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.3.1 | 创建租户服务项目结构 | P0 | 2h | ☐ |
| 2.3.2 | 设计租户数据库表结构 | P0 | 4h | ☐ |
| 2.3.3 | 实现租户CRUD接口 | P0 | 4h | ☐ |
| 2.3.4 | 实现租户状态管理（试用/正式/过期/禁用） | P0 | 4h | ☐ |
| 2.3.5 | 实现套餐管理CRUD | P0 | 4h | ☐ |
| 2.3.6 | 实现套餐功能配置 | P0 | 4h | ☐ |
| 2.3.7 | 实现资源配额管理 | P0 | 8h | ☐ |
| 2.3.8 | 实现配额使用统计 | P0 | 4h | ☐ |
| 2.3.9 | 实现计费计量功能 | P0 | 8h | ☐ |
| 2.3.10 | 实现账单生成 | P1 | 8h | ☐ |
| 2.3.11 | 实现支付集成（支付宝/微信） | P1 | 16h | ☐ |
| 2.3.12 | 实现租户配置管理 | P0 | 4h | ☐ |
| 2.3.13 | 实现租户数据初始化 | P0 | 4h | ☐ |
| 2.3.14 | 实现租户数据隔离验证 | P0 | 4h | ☐ |
| 2.3.15 | 编写单元测试 | P1 | 8h | ☐ |

### 2.4 项目服务重构（mota-project-service）

#### 2.4.1 项目管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.4.1.1 | 重构项目CRUD接口 | - | P0 | 4h | ☐ |
| 2.4.1.2 | 重构项目成员管理 | - | P0 | 4h | ☐ |
| 2.4.1.3 | 重构项目角色管理 | - | P0 | 4h | ☐ |
| 2.4.1.4 | 添加多租户项目隔离 | - | P0 | 4h | ☐ |
| 2.4.1.5 | 重构项目模板功能 | TP-007 | P1 | 4h | ☐ |
| 2.4.1.6 | 重构项目归档功能 | - | P1 | 2h | ☐ |
| 2.4.1.7 | 重构项目复制功能 | - | P1 | 4h | ☐ |

#### 2.4.2 里程碑管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.4.2.1 | 重构里程碑CRUD接口 | PT-002 | P0 | 4h | ☐ |
| 2.4.2.2 | 重构里程碑进度计算 | PT-002 | P0 | 4h | ☐ |
| 2.4.2.3 | 重构里程碑提醒功能 | PT-002 | P0 | 2h | ☐ |
| 2.4.2.4 | 重构里程碑关联任务 | PT-002 | P0 | 4h | ☐ |

#### 2.4.3 进度跟踪功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.4.3.1 | 重构项目进度计算 | PT-001 | P0 | 4h | ☐ |
| 2.4.3.2 | 重构逾期提醒功能 | PT-003 | P0 | 4h | ☐ |
| 2.4.3.3 | 重构进度报告生成 | PT-004 | P0 | 4h | ☐ |
| 2.4.3.4 | 重构燃尽图数据接口 | PT-005 | P0 | 4h | ☐ |
| 2.4.3.5 | 重构燃起图数据接口 | PT-006 | P0 | 4h | ☐ |
| 2.4.3.6 | 重构速度趋势数据接口 | PT-007 | P0 | 4h | ☐ |
| 2.4.3.7 | 重构AI进度预测接口 | PT-008 | P1 | 8h | ☐ |

#### 2.4.4 资源管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.4.4.1 | 重构工作量统计接口 | RM-001 | P0 | 4h | ☐ |
| 2.4.4.2 | 重构团队分布接口 | RM-002 | P0 | 4h | ☐ |
| 2.4.4.3 | 重构工作量预警接口 | RM-003 | P0 | 4h | ☐ |
| 2.4.4.4 | 重构资源日历接口 | RM-004 | P0 | 4h | ☐ |
| 2.4.4.5 | 重构资源利用率接口 | RM-005 | P0 | 4h | ☐ |
| 2.4.4.6 | 重构跨项目冲突检测 | RM-006 | P1 | 8h | ☐ |

#### 2.4.5 报表分析功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.4.5.1 | 重构项目仪表盘接口 | RP-001 | P0 | 4h | ☐ |
| 2.4.5.2 | 重构任务状态分布接口 | RP-002 | P0 | 2h | ☐ |
| 2.4.5.3 | 重构进度趋势图接口 | RP-003 | P0 | 4h | ☐ |
| 2.4.5.4 | 重构团队效能指标接口 | RP-004 | P0 | 4h | ☐ |
| 2.4.5.5 | 重构任务完成率接口 | RP-005 | P0 | 2h | ☐ |
| 2.4.5.6 | 重构平均完成时间接口 | RP-006 | P0 | 2h | ☐ |
| 2.4.5.7 | 重构逾期率统计接口 | RP-007 | P0 | 2h | ☐ |
| 2.4.5.8 | 重构成员贡献度接口 | RP-008 | P0 | 4h | ☐ |

### 2.5 任务服务新建（mota-task-service）

#### 2.5.1 任务管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.5.1.1 | 创建任务服务项目结构 | - | P0 | 2h | ☐ |
| 2.5.1.2 | 迁移任务相关数据库表 | - | P0 | 4h | ☐ |
| 2.5.1.3 | 迁移任务创建接口 | TK-001 | P0 | 4h | ☐ |
| 2.5.1.4 | 迁移任务编辑接口 | TK-002 | P0 | 4h | ☐ |
| 2.5.1.5 | 迁移任务删除接口 | TK-003 | P0 | 2h | ☐ |
| 2.5.1.6 | 迁移任务分配接口 | TK-004 | P0 | 4h | ☐ |
| 2.5.1.7 | 迁移优先级管理接口 | TK-005 | P0 | 2h | ☐ |
| 2.5.1.8 | 迁移任务标签接口 | TK-006 | P0 | 2h | ☐ |
| 2.5.1.9 | 迁移任务评论接口 | TK-007 | P0 | 4h | ☐ |
| 2.5.1.10 | 迁移任务附件接口 | TK-008 | P0 | 4h | ☐ |
| 2.5.1.11 | 迁移时间估算接口 | TK-009 | P0 | 2h | ☐ |
| 2.5.1.12 | 迁移实际工时接口 | TK-010 | P0 | 2h | ☐ |

#### 2.5.2 子任务和检查清单功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.5.2.1 | 迁移创建子任务接口 | ST-001 | P0 | 4h | ☐ |
| 2.5.2.2 | 迁移多级子任务接口 | ST-002 | P0 | 4h | ☐ |
| 2.5.2.3 | 迁移子任务进度汇总接口 | ST-003 | P0 | 4h | ☐ |
| 2.5.2.4 | 迁移检查清单接口 | CL-001 | P0 | 4h | ☐ |
| 2.5.2.5 | 迁移检查项完成接口 | CL-002 | P0 | 2h | ☐ |
| 2.5.2.6 | 迁移检查项排序接口 | CL-003 | P0 | 2h | ☐ |

#### 2.5.3 任务依赖关系功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.5.3.1 | 迁移完成-开始依赖接口 | TD-001 | P0 | 4h | ☐ |
| 2.5.3.2 | 迁移开始-开始依赖接口 | TD-002 | P0 | 2h | ☐ |
| 2.5.3.3 | 迁移完成-完成依赖接口 | TD-003 | P0 | 2h | ☐ |
| 2.5.3.4 | 迁移开始-完成依赖接口 | TD-004 | P0 | 2h | ☐ |
| 2.5.3.5 | 迁移依赖可视化接口 | TD-005 | P0 | 4h | ☐ |
| 2.5.3.6 | 迁移依赖冲突检测接口 | TD-006 | P0 | 4h | ☐ |
| 2.5.3.7 | 迁移关键路径计算接口 | TD-007 | P0 | 8h | ☐ |

#### 2.5.4 工作流功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.5.4.1 | 迁移自定义工作流接口 | PM-007 | P0 | 8h | ☐ |
| 2.5.4.2 | 迁移工作流模板接口 | PM-007 | P0 | 4h | ☐ |
| 2.5.4.3 | 迁移状态流转规则接口 | PM-007 | P0 | 4h | ☐ |
| 2.5.4.4 | 迁移任务模板接口 | TP-006 | P0 | 4h | ☐ |

### 2.6 协作服务新建（mota-collab-service）

#### 2.6.1 文档协作功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.6.1.1 | 创建协作服务项目结构 | - | P0 | 2h | ☐ |
| 2.6.1.2 | 设计协作数据库表结构 | - | P0 | 4h | ☐ |
| 2.6.1.3 | 实现Markdown编辑接口 | DC-001 | P0 | 4h | ☐ |
| 2.6.1.4 | 实现富文本编辑接口 | DC-002 | P0 | 4h | ☐ |
| 2.6.1.5 | 实现代码编辑接口 | DC-003 | P0 | 4h | ☐ |
| 2.6.1.6 | 实现实时协作（CRDT/Yjs） | DC-004 | P0 | 16h | ☐ |
| 2.6.1.7 | 实现光标同步 | DC-005 | P0 | 8h | ☐ |
| 2.6.1.8 | 实现冲突合并 | DC-006 | P0 | 8h | ☐ |
| 2.6.1.9 | 实现在线状态显示 | DC-007 | P0 | 4h | ☐ |
| 2.6.1.10 | 实现行内评论 | DC-008 | P0 | 4h | ☐ |
| 2.6.1.11 | 实现区域批注 | DC-009 | P0 | 4h | ☐ |
| 2.6.1.12 | 实现@提醒功能 | DC-010 | P0 | 4h | ☐ |
| 2.6.1.13 | 实现版本历史 | DC-011 | P0 | 4h | ☐ |
| 2.6.1.14 | 实现版本对比 | DC-012 | P0 | 8h | ☐ |
| 2.6.1.15 | 实现版本回滚 | DC-013 | P0 | 4h | ☐ |

#### 2.6.2 文档管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.6.2.1 | 实现文件夹管理 | DM-001 | P0 | 4h | ☐ |
| 2.6.2.2 | 实现文档标签 | DM-002 | P0 | 2h | ☐ |
| 2.6.2.3 | 实现收藏夹功能 | DM-003 | P0 | 4h | ☐ |
| 2.6.2.4 | 实现最近访问 | DM-004 | P0 | 2h | ☐ |
| 2.6.2.5 | 实现权限控制 | DM-005 | P0 | 4h | ☐ |
| 2.6.2.6 | 实现导出PDF | DM-006 | P0 | 4h | ☐ |
| 2.6.2.7 | 实现导出Word | DM-007 | P0 | 4h | ☐ |
| 2.6.2.8 | 实现导出Markdown | DM-008 | P0 | 2h | ☐ |

### 2.7 知识服务重构（mota-knowledge-service）

#### 2.7.1 文档上传和管理功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.7.1.1 | 重构拖拽上传接口 | KM-001 | P0 | 2h | ☐ |
| 2.7.1.2 | 重构批量上传接口 | KM-002 | P0 | 2h | ☐ |
| 2.7.1.3 | 重构大文件分片上传 | KM-003 | P0 | 8h | ☐ |
| 2.7.1.4 | 重构文件预览接口 | KM-004 | P0 | 4h | ☐ |
| 2.7.1.5 | 重构缩略图生成 | KM-005 | P0 | 4h | ☐ |
| 2.7.1.6 | 重构标签系统 | KM-006 | P0 | 4h | ☐ |
| 2.7.1.7 | 重构分类体系 | KM-007 | P0 | 4h | ☐ |
| 2.7.1.8 | 重构智能分类 | KM-008 | P1 | 8h | ☐ |

#### 2.7.2 版本控制功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.7.2.1 | 重构自动版本保存 | VC-001 | P0 | 4h | ☐ |
| 2.7.2.2 | 重构版本历史查询 | VC-002 | P0 | 2h | ☐ |
| 2.7.2.3 | 重构版本对比 | VC-003 | P0 | 4h | ☐ |
| 2.7.2.4 | 重构版本回滚 | VC-004 | P0 | 4h | ☐ |
| 2.7.2.5 | 重构变更记录 | VC-005 | P0 | 2h | ☐ |

#### 2.7.3 知识图谱功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.7.3.1 | 迁移实体识别接口 | KG-001 | P0 | 4h | ☐ |
| 2.7.3.2 | 迁移关系抽取接口 | KG-002 | P0 | 4h | ☐ |
| 2.7.3.3 | 迁移属性提取接口 | KG-003 | P0 | 4h | ☐ |
| 2.7.3.4 | 迁移知识融合接口 | KG-004 | P0 | 8h | ☐ |
| 2.7.3.5 | 迁移图谱可视化接口 | KG-005 | P0 | 4h | ☐ |
| 2.7.3.6 | 迁移节点聚类接口 | KG-006 | P1 | 4h | ☐ |
| 2.7.3.7 | 迁移路径查询接口 | KG-007 | P0 | 4h | ☐ |
| 2.7.3.8 | 迁移子图筛选接口 | KG-008 | P1 | 4h | ☐ |
| 2.7.3.9 | 迁移知识导航接口 | KG-009 | P0 | 4h | ☐ |
| 2.7.3.10 | 迁移关联推荐接口 | KG-010 | P0 | 4h | ☐ |

#### 2.7.4 模板库功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.7.4.1 | 重构系统模板接口 | TP-001 | P0 | 4h | ☐ |
| 2.7.4.2 | 重构自定义模板接口 | TP-002 | P0 | 4h | ☐ |
| 2.7.4.3 | 重构模板分类接口 | TP-003 | P0 | 2h | ☐ |
| 2.7.4.4 | 重构模板共享接口 | TP-004 | P0 | 4h | ☐ |
| 2.7.4.5 | 重构模板使用接口 | TP-005 | P0 | 2h | ☐ |
| 2.7.4.6 | 重构任务模板接口 | TP-006 | P0 | 4h | ☐ |
| 2.7.4.7 | 重构项目模板接口 | TP-007 | P0 | 4h | ☐ |
| 2.7.4.8 | 重构模板统计接口 | TP-008 | P1 | 2h | ☐ |

#### 2.7.5 知识使用统计功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.7.5.1 | 迁移访问统计接口 | KS-001 | P0 | 4h | ☐ |
| 2.7.5.2 | 迁移热门排行接口 | KS-002 | P0 | 2h | ☐ |
| 2.7.5.3 | 迁移访问趋势接口 | KS-003 | P0 | 4h | ☐ |
| 2.7.5.4 | 迁移复用率接口 | KS-004 | P0 | 4h | ☐ |
| 2.7.5.5 | 迁移搜索热词接口 | KS-005 | P0 | 2h | ☐ |
| 2.7.5.6 | 迁移知识缺口接口 | KS-006 | P1 | 4h | ☐ |

### 2.8 AI服务重构（mota-ai-service）

#### 2.8.1 AI知识库功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.1.1 | 重构文档解析接口 | AI-001 | P0 | 4h | ☐ |
| 2.8.1.2 | 重构OCR识别接口 | AI-002 | P0 | 4h | ☐ |
| 2.8.1.3 | 重构语音转文字接口 | AI-003 | P1 | 8h | ☐ |
| 2.8.1.4 | 重构表格提取接口 | AI-004 | P0 | 4h | ☐ |
| 2.8.1.5 | 重构关键信息提取接口 | AI-005 | P0 | 4h | ☐ |
| 2.8.1.6 | 重构自动摘要接口 | AI-006 | P0 | 4h | ☐ |
| 2.8.1.7 | 重构主题分类接口 | AI-007 | P0 | 4h | ☐ |
| 2.8.1.8 | 重构自动标签接口 | AI-008 | P0 | 4h | ☐ |
| 2.8.1.9 | 重构向量化存储接口 | AI-009 | P0 | 8h | ☐ |
| 2.8.1.10 | 重构语义检索接口 | AI-010 | P0 | 8h | ☐ |

#### 2.8.2 智能新闻推送功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.2.1 | 重构行业识别接口 | NW-001 | P0 | 4h | ☐ |
| 2.8.2.2 | 重构业务理解接口 | NW-002 | P0 | 4h | ☐ |
| 2.8.2.3 | 重构新闻采集接口 | NW-003 | P0 | 8h | ☐ |
| 2.8.2.4 | 重构政策监控接口 | NW-004 | P0 | 4h | ☐ |
| 2.8.2.5 | 重构智能匹配接口 | NW-005 | P0 | 8h | ☐ |
| 2.8.2.6 | 重构个性化推送接口 | NW-006 | P0 | 4h | ☐ |
| 2.8.2.7 | 重构推送优化接口 | NW-007 | P1 | 4h | ☐ |
| 2.8.2.8 | 重构新闻收藏接口 | NW-008 | P0 | 2h | ☐ |
| 2.8.2.9 | 重构新闻分类接口 | NW-009 | P0 | 2h | ☐ |

#### 2.8.3 AI方案生成功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.3.1 | 重构意图识别接口 | AG-001 | P0 | 4h | ☐ |
| 2.8.3.2 | 重构需求解析接口 | AG-002 | P0 | 4h | ☐ |
| 2.8.3.3 | 重构知识检索接口 | AG-003 | P0 | 4h | ☐ |
| 2.8.3.4 | 重构历史参考接口 | AG-004 | P0 | 4h | ☐ |
| 2.8.3.5 | 重构方案生成接口 | AG-005 | P0 | 8h | ☐ |
| 2.8.3.6 | 重构章节编排接口 | AG-006 | P0 | 4h | ☐ |
| 2.8.3.7 | 重构图表建议接口 | AG-007 | P1 | 4h | ☐ |
| 2.8.3.8 | 重构质量检查接口 | AG-008 | P0 | 4h | ☐ |
| 2.8.3.9 | 重构多轮优化接口 | AG-009 | P0 | 8h | ☐ |
| 2.8.3.10 | 重构方案导出接口 | AG-010 | P0 | 4h | ☐ |

#### 2.8.4 智能搜索功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.4.1 | 重构全文检索接口 | SS-001 | P0 | 4h | ☐ |
| 2.8.4.2 | 重构语义搜索接口 | SS-002 | P0 | 8h | ☐ |
| 2.8.4.3 | 重构向量检索接口 | SS-003 | P0 | 8h | ☐ |
| 2.8.4.4 | 重构混合检索接口 | SS-004 | P0 | 8h | ☐ |
| 2.8.4.5 | 重构意图识别接口 | SS-005 | P0 | 4h | ☐ |
| 2.8.4.6 | 重构自动纠错接口 | SS-006 | P1 | 4h | ☐ |
| 2.8.4.7 | 重构智能补全接口 | SS-007 | P1 | 4h | ☐ |
| 2.8.4.8 | 重构相关推荐接口 | SS-008 | P0 | 4h | ☐ |

#### 2.8.5 AI助手功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.5.1 | 重构智能问答接口 | AA-001 | P0 | 8h | ☐ |
| 2.8.5.2 | 重构任务指令接口 | AA-002 | P0 | 4h | ☐ |
| 2.8.5.3 | 重构工作建议接口 | AA-003 | P0 | 4h | ☐ |
| 2.8.5.4 | 重构文档摘要接口 | AA-004 | P0 | 4h | ☐ |
| 2.8.5.5 | 重构翻译功能接口 | AA-005 | P1 | 4h | ☐ |
| 2.8.5.6 | 重构数据分析接口 | AA-006 | P1 | 8h | ☐ |
| 2.8.5.7 | 重构日程建议接口 | AA-007 | P1 | 4h | ☐ |
| 2.8.5.8 | 重构报告生成接口 | AA-008 | P0 | 8h | ☐ |

#### 2.8.6 多模型支持功能

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.8.6.1 | 重构GPT-4支持 | MM-001 | P0 | 4h | ☐ |
| 2.8.6.2 | 重构GPT-3.5支持 | MM-002 | P0 | 2h | ☐ |
| 2.8.6.3 | 重构Claude支持 | MM-003 | P0 | 4h | ☐ |
| 2.8.6.4 | 重构通义千问支持 | MM-004 | P0 | 4h | ☐ |
| 2.8.6.5 | 重构文心一言支持 | MM-005 | P0 | 4h | ☐ |
| 2.8.6.6 | 重构模型路由 | MM-006 | P0 | 8h | ☐ |
| 2.8.6.7 | 重构降级策略 | MM-007 | P0 | 4h | ☐ |
| 2.8.6.8 | 重构成本控制 | MM-008 | P0 | 8h | ☐ |
| 2.8.6.9 | 集成LiteLLM网关 | - | P0 | 8h | ☐ |

### 2.9 通知服务重构（mota-notify-service）

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.9.1 | 重构站内通知接口 | NT-001 | P0 | 4h | ☐ |
| 2.9.2 | 重构邮件通知接口 | NT-002 | P0 | 4h | ☐ |
| 2.9.3 | 实现移动推送接口 | NT-003 | P0 | 8h | ☐ |
| 2.9.4 | 实现企微推送接口 | NT-004 | P1 | 8h | ☐ |
| 2.9.5 | 实现钉钉推送接口 | NT-005 | P1 | 8h | ☐ |
| 2.9.6 | 重构通知聚合接口 | NT-006 | P0 | 4h | ☐ |
| 2.9.7 | 重构智能分类接口 | NT-007 | P0 | 4h | ☐ |
| 2.9.8 | 重构重要置顶接口 | NT-008 | P0 | 2h | ☐ |
| 2.9.9 | 重构低优先级折叠接口 | NT-009 | P0 | 2h | ☐ |
| 2.9.10 | 重构免打扰模式接口 | NT-010 | P0 | 4h | ☐ |
| 2.9.11 | 重构订阅管理接口 | NT-011 | P0 | 4h | ☐ |
| 2.9.12 | 实现Kafka消息消费 | - | P0 | 8h | ☐ |
| 2.9.13 | 实现通知模板管理 | - | P1 | 4h | ☐ |

### 2.10 日历服务重构（mota-calendar-service）

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 2.10.1 | 重构个人日历接口 | CA-001 | P0 | 4h | ☐ |
| 2.10.2 | 重构团队日历接口 | CA-002 | P0 | 4h | ☐ |
| 2.10.3 | 重构项目日历接口 | CA-003 | P0 | 4h | ☐ |
| 2.10.4 | 重构任务日历接口 | CA-004 | P0 | 4h | ☐ |
| 2.10.5 | 重构日视图接口 | CA-005 | P0 | 2h | ☐ |
| 2.10.6 | 重构周视图接口 | CA-006 | P0 | 2h | ☐ |
| 2.10.7 | 重构月视图接口 | CA-007 | P0 | 2h | ☐ |
| 2.10.8 | 重构议程视图接口 | CA-008 | P0 | 2h | ☐ |
| 2.10.9 | 重构创建事件接口 | CA-009 | P0 | 4h | ☐ |
| 2.10.10 | 重构循环事件接口 | CA-010 | P0 | 8h | ☐ |
| 2.10.11 | 重构事件提醒接口 | CA-011 | P0 | 4h | ☐ |
| 2.10.12 | 重构颜色标记接口 | CA-012 | P0 | 2h | ☐ |
| 2.10.13 | 重构日历订阅接口 | CA-013 | P0 | 4h | ☐ |
| 2.10.14 | 实现任务-日历同步（Feign调用） | - | P0 | 8h | ☐ |

### 2.11 搜索服务新建（mota-search-service）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.11.1 | 创建搜索服务项目结构 | P0 | 2h | ☐ |
| 2.11.2 | 设计搜索索引结构 | P0 | 4h | ☐ |
| 2.11.3 | 实现全文检索接口 | P0 | 4h | ☐ |
| 2.11.4 | 实现语义搜索接口 | P0 | 8h | ☐ |
| 2.11.5 | 实现向量检索接口 | P0 | 8h | ☐ |
| 2.11.6 | 实现混合检索接口 | P0 | 8h | ☐ |
| 2.11.7 | 实现搜索建议接口 | P0 | 4h | ☐ |
| 2.11.8 | 实现搜索统计接口 | P1 | 4h | ☐ |
| 2.11.9 | 实现索引同步（Kafka消费） | P0 | 8h | ☐ |
| 2.11.10 | 编写单元测试 | P1 | 8h | ☐ |

### 2.12 文件服务新建（mota-file-service）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.12.1 | 创建文件服务项目结构 | P0 | 2h | ☐ |
| 2.12.2 | 实现文件上传接口 | P0 | 4h | ☐ |
| 2.12.3 | 实现分片上传接口 | P0 | 8h | ☐ |
| 2.12.4 | 实现断点续传接口 | P0 | 8h | ☐ |
| 2.12.5 | 实现秒传接口 | P1 | 4h | ☐ |
| 2.12.6 | 实现文件预览接口 | P0 | 8h | ☐ |
| 2.12.7 | 实现缩略图生成接口 | P0 | 4h | ☐ |
| 2.12.8 | 实现格式转换接口 | P1 | 8h | ☐ |
| 2.12.9 | 实现CDN分发配置 | P2 | 4h | ☐ |
| 2.12.10 | 实现文件清理任务 | P1 | 4h | ☐ |
| 2.12.11 | 编写单元测试 | P1 | 8h | ☐ |

### 2.13 报表服务新建（mota-report-service）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.13.1 | 创建报表服务项目结构 | P0 | 2h | ☐ |
| 2.13.2 | 设计报表数据库表结构 | P0 | 4h | ☐ |
| 2.13.3 | 实现数据统计接口 | P0 | 8h | ☐ |
| 2.13.4 | 实现报表生成接口 | P0 | 8h | ☐ |
| 2.13.5 | 实现数据导出接口（Excel/PDF） | P0 | 8h | ☐ |
| 2.13.6 | 实现仪表盘数据接口 | P0 | 8h | ☐ |
| 2.13.7 | 实现定时报表任务 | P1 | 4h | ☐ |
| 2.13.8 | 实现报表订阅功能 | P1 | 4h | ☐ |
| 2.13.9 | 编写单元测试 | P1 | 8h | ☐ |

### 2.14 BFF服务开发

#### 2.14.1 用户端BFF（mota-user-bff）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.14.1.1 | 创建NestJS项目结构 | P0 | 2h | ☐ |
| 2.14.1.2 | 实现认证模块 | P0 | 4h | ☐ |
| 2.14.1.3 | 实现项目聚合接口 | P0 | 8h | ☐ |
| 2.14.1.4 | 实现任务聚合接口 | P0 | 8h | ☐ |
| 2.14.1.5 | 实现仪表盘聚合接口 | P0 | 8h | ☐ |
| 2.14.1.6 | 实现AI功能聚合接口 | P0 | 8h | ☐ |
| 2.14.1.7 | 实现知识库聚合接口 | P0 | 8h | ☐ |
| 2.14.1.8 | 实现通知聚合接口 | P0 | 4h | ☐ |
| 2.14.1.9 | 实现日历聚合接口 | P0 | 4h | ☐ |
| 2.14.1.10 | 实现缓存优化 | P1 | 8h | ☐ |
| 2.14.1.11 | 编写单元测试 | P1 | 8h | ☐ |

#### 2.14.2 移动端BFF（mota-app-bff）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.14.2.1 | 创建NestJS项目结构 | P0 | 2h | ☐ |
| 2.14.2.2 | 实现认证模块（支持Token刷新） | P0 | 4h | ☐ |
| 2.14.2.3 | 实现任务列表聚合接口 | P0 | 4h | ☐ |
| 2.14.2.4 | 实现任务详情聚合接口 | P0 | 4h | ☐ |
| 2.14.2.5 | 实现通知聚合接口 | P0 | 4h | ☐ |
| 2.14.2.6 | 实现日程聚合接口 | P0 | 4h | ☐ |
| 2.14.2.7 | 实现离线数据同步接口 | P0 | 8h | ☐ |
| 2.14.2.8 | 实现数据压缩 | P1 | 4h | ☐ |
| 2.14.2.9 | 编写单元测试 | P1 | 8h | ☐ |

#### 2.14.3 管理端BFF（mota-admin-bff）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 2.14.3.1 | 创建NestJS项目结构 | P0 | 2h | ☐ |
| 2.14.3.2 | 实现管理员认证模块 | P0 | 4h | ☐ |
| 2.14.3.3 | 实现租户管理聚合接口 | P0 | 8h | ☐ |
| 2.14.3.4 | 实现用户管理聚合接口 | P0 | 8h | ☐ |
| 2.14.3.5 | 实现数据统计聚合接口 | P0 | 8h | ☐ |
| 2.14.3.6 | 实现系统配置聚合接口 | P0 | 4h | ☐ |
| 2.14.3.7 | 实现AI管理聚合接口 | P0 | 4h | ☐ |
| 2.14.3.8 | 实现权限校验 | P0 | 4h | ☐ |
| 2.14.3.9 | 编写单元测试 | P1 | 8h | ☐ |

---

## 第三阶段：前端Web端重构

### 3.1 项目结构重构（迁移到Next.js）

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 3.1.1 | 创建Next.js 14项目 | P0 | 2h | ☐ |
| 3.1.2 | 配置TypeScript | P0 | 1h | ☐ |
| 3.1.3 | 配置ESLint和Prettier | P0 | 1h | ☐ |
| 3.1.4 | 配置Tailwind CSS | P0 | 1h | ☐ |
| 3.1.5 | 配置Ant Design | P0 | 2h | ☐ |
| 3.1.6 | 配置Zustand状态管理 | P0 | 2h | ☐ |
| 3.1.7 | 配置TanStack Query | P0 | 2h | ☐ |
| 3.1.8 | 配置API客户端（Axios） | P0 | 2h | ☐ |
| 3.1.9 | 配置环境变量 | P0 | 1h | ☐ |
| 3.1.10 | 配置路由结构（App Router） | P0 | 4h | ☐ |

### 3.2 公共组件迁移

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 3.2.1 | 迁移布局组件（AuthLayout, ConsoleLayout） | P0 | 4h | ☐ |
| 3.2.2 | 迁移导航组件（Sidebar, Header） | P0 | 4h | ☐ |
| 3.2.3 | 迁移主题切换组件（ThemeSwitch） | P0 | 2h | ☐ |
| 3.2.4 | 迁移加载组件（Loading, Skeleton） | P0 | 2h | ☐ |
| 3.2.5 | 迁移错误边界组件 | P0 | 2h | ☐ |
| 3.2.6 | 迁移空状态组件 | P0 | 1h | ☐ |
| 3.2.7 | 迁移确认对话框组件 | P0 | 1h | ☐ |
| 3.2.8 | 迁移文件上传组件 | P0 | 4h | ☐ |
| 3.2.9 | 迁移富文本编辑器组件 | P0 | 8h | ☐ |
| 3.2.10 | 迁移代码编辑器组件（CodeEditor） | P0 | 4h | ☐ |

### 3.3 认证模块迁移

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 3.3.1 | 迁移登录页面 | P0 | 4h | ☐ |
| 3.3.2 | 迁移注册页面 | P0 | 4h | ☐ |
| 3.3.3 | 迁移忘记密码页面 | P0 | 2h | ☐ |
| 3.3.4 | 迁移认证状态管理 | P0 | 4h | ☐ |
| 3.3.5 | 实现SSO登录页面 | P1 | 4h | ☐ |
| 3.3.6 | 实现Token刷新机制 | P0 | 4h | ☐ |
| 3.3.7 | 实现路由守卫 | P0 | 4h | ☐ |

### 3.4 项目管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.4.1 | 迁移项目列表页面 | - | P0 | 4h | ☐ |
| 3.4.2 | 迁移项目创建页面 | - | P0 | 4h | ☐ |
| 3.4.3 | 迁移项目详情页面 | - | P0 | 8h | ☐ |
| 3.4.4 | 迁移看板视图组件 | PM-001 | P0 | 8h | ☐ |
| 3.4.5 | 迁移列表视图组件 | PM-002 | P0 | 4h | ☐ |
| 3.4.6 | 迁移甘特图视图组件 | PM-003 | P0 | 8h | ☐ |
| 3.4.7 | 迁移日历视图组件 | PM-004 | P0 | 4h | ☐ |
| 3.4.8 | 迁移时间线视图组件 | PM-005 | P0 | 4h | ☐ |
| 3.4.9 | 迁移视图切换组件 | PM-006 | P0 | 2h | ☐ |
| 3.4.10 | 迁移工作流编辑器组件（WorkflowEditor） | PM-007 | P0 | 8h | ☐ |
| 3.4.11 | 迁移视图保存组件（ViewSaver） | PM-008 | P0 | 4h | ☐ |

### 3.5 任务管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.5.1 | 迁移任务列表页面 | - | P0 | 4h | ☐ |
| 3.5.2 | 迁移任务详情页面 | - | P0 | 8h | ☐ |
| 3.5.3 | 迁移任务表单组件（TaskForm） | TK-001~010 | P0 | 8h | ☐ |
| 3.5.4 | 迁移任务看板组件（TaskKanban） | - | P0 | 8h | ☐ |
| 3.5.5 | 迁移任务树组件（TaskTree） | - | P0 | 4h | ☐ |
| 3.5.6 | 迁移子任务列表组件（SubtaskList） | ST-001~003 | P0 | 4h | ☐ |
| 3.5.7 | 迁移检查清单组件（ChecklistPanel） | CL-001~003 | P0 | 4h | ☐ |
| 3.5.8 | 迁移任务评论组件（TaskComments） | TK-007 | P0 | 4h | ☐ |
| 3.5.9 | 迁移任务依赖组件 | TD-001~007 | P0 | 8h | ☐ |
| 3.5.10 | 迁移任务模板选择器（TaskTemplateSelector） | TP-006 | P0 | 4h | ☐ |
| 3.5.11 | 迁移任务分解向导（TaskDecomposeWizard） | - | P1 | 8h | ☐ |

### 3.6 进度跟踪模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.6.1 | 迁移进度跟踪页面 | - | P0 | 4h | ☐ |
| 3.6.2 | 迁移燃尽图组件（BurndownChart） | PT-005 | P0 | 4h | ☐ |
| 3.6.3 | 迁移燃起图组件（BurnupChart） | PT-006 | P0 | 4h | ☐ |
| 3.6.4 | 迁移速度趋势组件（VelocityTrend） | PT-007 | P0 | 4h | ☐ |
| 3.6.5 | 迁移AI进度预测组件 | PT-008 | P1 | 4h | ☐ |

### 3.7 资源管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.7.1 | 迁移资源管理页面 | - | P0 | 4h | ☐ |
| 3.7.2 | 迁移工作量统计组件（WorkloadStats） | RM-001 | P0 | 4h | ☐ |
| 3.7.3 | 迁移团队分布组件（TeamDistribution） | RM-002 | P0 | 4h | ☐ |
| 3.7.4 | 迁移工作量预警组件（WorkloadAlert） | RM-003 | P0 | 4h | ☐ |
| 3.7.5 | 迁移资源日历组件（ResourceCalendar） | RM-004 | P0 | 4h | ☐ |
| 3.7.6 | 迁移资源利用率组件（ResourceUtilization） | RM-005 | P0 | 4h | ☐ |
| 3.7.7 | 迁移项目冲突组件（ProjectConflict） | RM-006 | P1 | 4h | ☐ |

### 3.8 报表分析模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.8.1 | 迁移报表分析页面 | - | P0 | 4h | ☐ |
| 3.8.2 | 迁移团队效能组件（TeamEfficiency） | RP-004 | P0 | 4h | ☐ |
| 3.8.3 | 迁移平均完成时间组件（AvgCompletionTime） | RP-006 | P0 | 4h | ☐ |
| 3.8.4 | 迁移逾期率组件（OverdueRate） | RP-007 | P0 | 4h | ☐ |
| 3.8.5 | 迁移成员贡献度组件（MemberContribution） | RP-008 | P0 | 4h | ☐ |

### 3.9 文档协作模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.9.1 | 迁移文档管理页面 | - | P0 | 4h | ☐ |
| 3.9.2 | 迁移协作编辑器组件（CollaborativeEditor） | DC-004~007 | P0 | 16h | ☐ |
| 3.9.3 | 迁移行内评论组件（InlineComment） | DC-008~010 | P0 | 8h | ☐ |
| 3.9.4 | 迁移版本对比组件（VersionDiff） | DC-011~013 | P0 | 8h | ☐ |
| 3.9.5 | 迁移收藏夹页面 | DM-003 | P0 | 4h | ☐ |

### 3.10 日程管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.10.1 | 迁移日历页面 | - | P0 | 4h | ☐ |
| 3.10.2 | 迁移日历组件（支持四种视图） | CA-005~008 | P0 | 8h | ☐ |
| 3.10.3 | 迁移事件创建组件 | CA-009~012 | P0 | 4h | ☐ |
| 3.10.4 | 迁移日历订阅组件 | CA-013 | P0 | 4h | ☐ |

### 3.11 通知中心模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.11.1 | 迁移通知中心页面 | - | P0 | 4h | ☐ |
| 3.11.2 | 迁移通知列表组件 | NT-001~009 | P0 | 8h | ☐ |
| 3.11.3 | 迁移免打扰设置组件 | NT-010 | P0 | 4h | ☐ |
| 3.11.4 | 迁移订阅管理组件 | NT-011 | P0 | 4h | ☐ |
| 3.11.5 | 实现WebSocket实时通知 | - | P0 | 8h | ☐ |

### 3.12 知识管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.12.1 | 迁移知识管理页面 | - | P0 | 4h | ☐ |
| 3.12.2 | 迁移分片上传组件（ChunkUploader） | KM-003 | P0 | 8h | ☐ |
| 3.12.3 | 迁移文件缩略图组件（FileThumbnail） | KM-005 | P0 | 4h | ☐ |
| 3.12.4 | 迁移AI分类组件（AIClassifier） | KM-008 | P0 | 4h | ☐ |
| 3.12.5 | 迁移版本控制组件（FileVersionControl） | VC-001~005 | P0 | 8h | ☐ |
| 3.12.6 | 迁移知识图谱组件（KnowledgeGraphEnhanced） | KG-001~010 | P0 | 16h | ☐ |
| 3.12.7 | 迁移知识统计页面 | KS-001~006 | P0 | 8h | ☐ |
| 3.12.8 | 迁移模板库组件（TemplateLibrary） | TP-001~008 | P0 | 8h | ☐ |

### 3.13 AI模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.13.1 | 迁移AI知识库页面 | AI-001~010 | P0 | 8h | ☐ |
| 3.13.2 | 迁移智能新闻推送页面 | NW-001~009 | P0 | 8h | ☐ |
| 3.13.3 | 迁移AI方案生成页面 | AG-001~010 | P0 | 16h | ☐ |
| 3.13.4 | 迁移智能搜索页面 | SS-001~008 | P0 | 8h | ☐ |
| 3.13.5 | 迁移AI助手页面 | AA-001~008 | P0 | 16h | ☐ |
| 3.13.6 | 迁移多模型管理页面 | MM-001~008 | P0 | 8h | ☐ |

### 3.14 系统管理模块迁移

| 序号 | 任务 | 功能编号 | 优先级 | 预计工时 | 状态 |
|------|------|---------|--------|---------|------|
| 3.14.1 | 迁移系统管理页面 | - | P0 | 4h | ☐ |
| 3.14.2 | 迁移SSO登录配置 | UM-003 | P0 | 4h | ☐ |
| 3.14.3 | 迁移岗位管理 | OG-003 | P0 | 4h | ☐ |
| 3.14.4 | 迁移人员调动 | OG-004 | P0 | 4h | ☐ |
| 3.14.5 | 迁移组织架构图 | OG-005 | P0 | 4h | ☐ |
| 3.14.6 | 迁移数据权限配置 | RP-003 | P0 | 4h | ☐ |
| 3.14.7 | 迁移新闻源配置 | SC-002 | P0 | 4h | ☐ |
| 3.14.8 | 迁移外部集成配置 | SC-004 | P0 | 4h | ☐ |
| 3.14.9 | 迁移数据变更日志 | AL-003 | P0 | 4h | ☐ |
| 3.14.10 | 迁移审计报告 | AL-004 | P0 | 4h | ☐ |
| 3.14.11 | 迁移合规检查 | AL-005 | P0 | 4h | ☐ |

### 3.15 其他页面迁移

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 3.15.1 | 迁移仪表盘页面 | P0 | 8h | ☐ |
| 3.15.2 | 迁移个人资料页面 | P0 | 4h | ☐ |
| 3.15.3 | 迁移设置页面 | P0 | 4h | ☐ |
| 3.15.4 | 迁移帮助中心页面 | P1 | 4h | ☐ |
| 3.15.5 | 迁移部门管理页面 | P0 | 4h | ☐ |
| 3.15.6 | 迁移成员管理页面 | P0 | 4h | ☐ |
| 3.15.7 | 迁移企业管理页面 | P0 | 4h | ☐ |
| 3.15.8 | 迁移404页面 | P0 | 1h | ☐ |

---

## 第四阶段：移动App开发

### 4.1 项目初始化

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.1.1 | 创建Expo项目 | P0 | 2h | ☐ |
| 4.1.2 | 配置TypeScript | P0 | 1h | ☐ |
| 4.1.3 | 配置ESLint和Prettier | P0 | 1h | ☐ |
| 4.1.4 | 配置React Navigation | P0 | 2h | ☐ |
| 4.1.5 | 配置React Native Paper | P0 | 2h | ☐ |
| 4.1.6 | 配置Zustand状态管理 | P0 | 2h | ☐ |
| 4.1.7 | 配置TanStack Query | P0 | 2h | ☐ |
| 4.1.8 | 配置API客户端 | P0 | 2h | ☐ |
| 4.1.9 | 配置环境变量 | P0 | 1h | ☐ |
| 4.1.10 | 配置App图标和启动页 | P0 | 2h | ☐ |

### 4.2 认证模块

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.2.1 | 实现登录页面 | P0 | 4h | ☐ |
| 4.2.2 | 实现注册页面 | P0 | 4h | ☐ |
| 4.2.3 | 实现忘记密码页面 | P0 | 2h | ☐ |
| 4.2.4 | 实现Token存储（SecureStore） | P0 | 2h | ☐ |
| 4.2.5 | 实现Token刷新机制 | P0 | 4h | ☐ |
| 4.2.6 | 实现生物识别登录 | P1 | 4h | ☐ |
| 4.2.7 | 实现SSO登录（WebView） | P1 | 8h | ☐ |

### 4.3 首页/仪表盘

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.3.1 | 实现首页布局 | P0 | 4h | ☐ |
| 4.3.2 | 实现今日任务卡片 | P0 | 4h | ☐ |
| 4.3.3 | 实现项目进度卡片 | P0 | 4h | ☐ |
| 4.3.4 | 实现快捷操作入口 | P0 | 2h | ☐ |
| 4.3.5 | 实现下拉刷新 | P0 | 2h | ☐ |

### 4.4 任务模块

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.4.1 | 实现任务列表页面 | P0 | 4h | ☐ |
| 4.4.2 | 实现任务筛选功能 | P0 | 4h | ☐ |
| 4.4.3 | 实现任务详情页面 | P0 | 8h | ☐ |
| 4.4.4 | 实现任务状态更新 | P0 | 2h | ☐ |
| 4.4.5 | 实现任务评论功能 | P0 | 4h | ☐ |
| 4.4.6 | 实现子任务列表 | P0 | 4h | ☐ |
| 4.4.7 | 实现检查清单 | P0 | 4h | ☐ |
| 4.4.8 | 实现快速创建任务 | P0 | 4h | ☐ |
| 4.4.9 | 实现任务搜索 | P0 | 4h | ☐ |

### 4.5 日程模块

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.5.1 | 实现日程列表页面 | P0 | 4h | ☐ |
| 4.5.2 | 实现日历视图 | P0 | 8h | ☐ |
| 4.5.3 | 实现事件详情页面 | P0 | 4h | ☐ |
| 4.5.4 | 实现创建事件 | P0 | 4h | ☐ |
| 4.5.5 | 实现事件提醒 | P0 | 4h | ☐ |

### 4.6 通知模块

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.6.1 | 实现通知列表页面 | P0 | 4h | ☐ |
| 4.6.2 | 实现通知详情页面 | P0 | 2h | ☐ |
| 4.6.3 | 实现通知标记已读 | P0 | 2h | ☐ |
| 4.6.4 | 实现推送通知（Expo Notifications） | P0 | 8h | ☐ |
| 4.6.5 | 实现通知设置 | P0 | 4h | ☐ |

### 4.7 个人中心

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.7.1 | 实现个人中心页面 | P0 | 4h | ☐ |
| 4.7.2 | 实现个人信息编辑 | P0 | 4h | ☐ |
| 4.7.3 | 实现头像上传 | P0 | 4h | ☐ |
| 4.7.4 | 实现密码修改 | P0 | 2h | ☐ |
| 4.7.5 | 实现设置页面 | P0 | 4h | ☐ |
| 4.7.6 | 实现关于页面 | P1 | 2h | ☐ |
| 4.7.7 | 实现退出登录 | P0 | 1h | ☐ |

### 4.8 离线支持

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.8.1 | 配置WatermelonDB | P0 | 4h | ☐ |
| 4.8.2 | 设计离线数据模型 | P0 | 4h | ☐ |
| 4.8.3 | 实现任务离线存储 | P0 | 8h | ☐ |
| 4.8.4 | 实现日程离线存储 | P0 | 4h | ☐ |
| 4.8.5 | 实现离线操作队列 | P0 | 8h | ☐ |
| 4.8.6 | 实现数据同步机制 | P0 | 16h | ☐ |
| 4.8.7 | 实现冲突解决 | P0 | 8h | ☐ |
| 4.8.8 | 实现网络状态监听 | P0 | 2h | ☐ |

### 4.9 其他功能

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.9.1 | 实现扫码功能 | P1 | 4h | ☐ |
| 4.9.2 | 实现语音输入 | P2 | 8h | ☐ |
| 4.9.3 | 实现文件查看 | P0 | 8h | ☐ |
| 4.9.4 | 实现图片查看 | P0 | 4h | ☐ |
| 4.9.5 | 实现分享功能 | P1 | 4h | ☐ |
| 4.9.6 | 实现深度链接 | P1 | 4h | ☐ |

### 4.10 发布准备

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 4.10.1 | 配置iOS证书和描述文件 | P0 | 4h | ☐ |
| 4.10.2 | 配置Android签名 | P0 | 2h | ☐ |
| 4.10.3 | 配置EAS Build | P0 | 4h | ☐ |
| 4.10.4 | 准备App Store截图和描述 | P0 | 8h | ☐ |
| 4.10.5 | 准备Google Play截图和描述 | P0 | 8h | ☐ |
| 4.10.6 | 提交App Store审核 | P0 | 4h | ☐ |
| 4.10.7 | 提交Google Play审核 | P0 | 4h | ☐ |
| 4.10.8 | 配置OTA更新 | P1 | 4h | ☐ |

---

## 第五阶段：运营管理后台开发

### 5.1 项目初始化

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.1.1 | 创建Ant Design Pro项目 | P0 | 2h | ☐ |
| 5.1.2 | 配置TypeScript | P0 | 1h | ☐ |
| 5.1.3 | 配置路由和菜单 | P0 | 4h | ☐ |
| 5.1.4 | 配置权限管理 | P0 | 4h | ☐ |
| 5.1.5 | 配置API客户端 | P0 | 2h | ☐ |
| 5.1.6 | 配置环境变量 | P0 | 1h | ☐ |

### 5.2 运营仪表盘

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.2.1 | 实现总览页面 | P0 | 8h | ☐ |
| 5.2.2 | 实现用户统计卡片 | P0 | 4h | ☐ |
| 5.2.3 | 实现租户统计卡片 | P0 | 4h | ☐ |
| 5.2.4 | 实现收入统计卡片 | P0 | 4h | ☐ |
| 5.2.5 | 实现活跃度趋势图 | P0 | 4h | ☐ |
| 5.2.6 | 实现实时监控页面 | P1 | 8h | ☐ |
| 5.2.7 | 实现数据分析页面 | P1 | 8h | ☐ |

### 5.3 租户管理

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.3.1 | 实现租户列表页面 | P0 | 4h | ☐ |
| 5.3.2 | 实现租户详情页面 | P0 | 8h | ☐ |
| 5.3.3 | 实现租户创建/编辑 | P0 | 4h | ☐ |
| 5.3.4 | 实现租户状态管理 | P0 | 2h | ☐ |
| 5.3.5 | 实现套餐管理页面 | P0 | 8h | ☐ |
| 5.3.6 | 实现计费管理页面 | P0 | 8h | ☐ |
| 5.3.7 | 实现账单列表 | P0 | 4h | ☐ |
| 5.3.8 | 实现配额管理 | P0 | 4h | ☐ |

### 5.4 用户管理

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.4.1 | 实现用户列表页面 | P0 | 4h | ☐ |
| 5.4.2 | 实现用户详情页面 | P0 | 4h | ☐ |
| 5.4.3 | 实现用户审核页面 | P0 | 4h | ☐ |
| 5.4.4 | 实现用户封禁/解封 | P0 | 2h | ☐ |
| 5.4.5 | 实现用户反馈页面 | P1 | 4h | ☐ |
| 5.4.6 | 实现用户行为分析 | P1 | 8h | ☐ |

### 5.5 内容管理

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.5.1 | 实现新闻管理页面 | P0 | 8h | ☐ |
| 5.5.2 | 实现新闻创建/编辑 | P0 | 4h | ☐ |
| 5.5.3 | 实现新闻审核 | P0 | 4h | ☐ |
| 5.5.4 | 实现模板管理页面 | P0 | 8h | ☐ |
| 5.5.5 | 实现模板创建/编辑 | P0 | 4h | ☐ |
| 5.5.6 | 实现内容审核页面 | P1 | 8h | ☐ |

### 5.6 AI管理

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.6.1 | 实现模型管理页面 | P0 | 8h | ☐ |
| 5.6.2 | 实现模型配置 | P0 | 4h | ☐ |
| 5.6.3 | 实现使用统计页面 | P0 | 8h | ☐ |
| 5.6.4 | 实现成本控制页面 | P0 | 8h | ☐ |
| 5.6.5 | 实现预算管理 | P0 | 4h | ☐ |
| 5.6.6 | 实现告警配置 | P1 | 4h | ☐ |

### 5.7 系统管理

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 5.7.1 | 实现系统配置页面 | P0 | 8h | ☐ |
| 5.7.2 | 实现操作日志页面 | P0 | 4h | ☐ |
| 5.7.3 | 实现登录日志页面 | P0 | 4h | ☐ |
| 5.7.4 | 实现系统监控页面 | P1 | 8h | ☐ |
| 5.7.5 | 实现管理员管理 | P0 | 4h | ☐ |
| 5.7.6 | 实现角色权限管理 | P0 | 8h | ☐ |

---

## 第六阶段：监控与运维体系

### 6.1 监控系统部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.1.1 | 编写Prometheus Docker Compose配置 | P0 | 2h | ☐ |
| 6.1.2 | 配置Prometheus服务发现 | P0 | 4h | ☐ |
| 6.1.3 | 配置Prometheus告警规则 | P0 | 8h | ☐ |
| 6.1.4 | 编写Grafana Docker Compose配置 | P0 | 2h | ☐ |
| 6.1.5 | 配置Grafana数据源 | P0 | 2h | ☐ |
| 6.1.6 | 创建基础设施监控面板 | P0 | 8h | ☐ |
| 6.1.7 | 创建应用监控面板 | P0 | 8h | ☐ |
| 6.1.8 | 创建业务监控面板 | P0 | 8h | ☐ |
| 6.1.9 | 部署AlertManager | P0 | 4h | ☐ |
| 6.1.10 | 配置告警通知（钉钉/邮件） | P0 | 4h | ☐ |

### 6.2 日志系统部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.2.1 | 编写Elasticsearch Docker Compose配置（日志专用） | P0 | 2h | ☐ |
| 6.2.2 | 编写Logstash Docker Compose配置 | P0 | 2h | ☐ |
| 6.2.3 | 配置Logstash管道 | P0 | 8h | ☐ |
| 6.2.4 | 编写Filebeat Docker Compose配置 | P0 | 2h | ☐ |
| 6.2.5 | 配置Filebeat采集规则 | P0 | 4h | ☐ |
| 6.2.6 | 部署Kibana | P0 | 2h | ☐ |
| 6.2.7 | 创建日志索引模板 | P0 | 4h | ☐ |
| 6.2.8 | 创建日志查询面板 | P0 | 4h | ☐ |
| 6.2.9 | 配置日志保留策略 | P0 | 2h | ☐ |
| 6.2.10 | 配置日志告警 | P1 | 4h | ☐ |

### 6.3 链路追踪部署

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.3.1 | 编写SkyWalking Docker Compose配置 | P0 | 2h | ☐ |
| 6.3.2 | 配置SkyWalking Agent | P0 | 4h | ☐ |
| 6.3.3 | 配置服务追踪 | P0 | 8h | ☐ |
| 6.3.4 | 配置采样策略 | P0 | 2h | ☐ |
| 6.3.5 | 创建追踪查询面板 | P0 | 4h | ☐ |

### 6.4 安全加固

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.4.1 | 配置Nginx WAF规则 | P0 | 8h | ☐ |
| 6.4.2 | 配置DDoS防护（云服务商） | P1 | 4h | ☐ |
| 6.4.3 | 配置SSL/TLS证书（首选Let's Encrypt免费证书） | P0 | 2h | ☐ |
| 6.4.4 | 配置安全扫描 | P1 | 4h | ☐ |
| 6.4.5 | 配置漏洞检测 | P1 | 4h | ☐ |
| 6.4.6 | 配置数据加密 | P0 | 8h | ☐ |
| 6.4.7 | 配置密钥管理 | P0 | 4h | ☐ |

### 6.5 备份与容灾

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.5.1 | 配置MySQL备份策略（定时备份脚本） | P0 | 4h | ☐ |
| 6.5.2 | 配置Redis备份策略 | P0 | 2h | ☐ |
| 6.5.3 | 配置ES备份策略 | P0 | 2h | ☐ |
| 6.5.4 | 配置MinIO备份策略 | P0 | 2h | ☐ |
| 6.5.5 | 配置异地备份（可选） | P2 | 8h | ☐ |
| 6.5.6 | 编写灾难恢复预案 | P0 | 8h | ☐ |
| 6.5.7 | 进行灾难恢复演练 | P1 | 8h | ☐ |

### 6.6 运维文档

| 序号 | 任务 | 优先级 | 预计工时 | 状态 |
|------|------|--------|---------|------|
| 6.6.1 | 编写部署文档 | P0 | 8h | ☐ |
| 6.6.2 | 编写运维手册 | P0 | 8h | ☐ |
| 6.6.3 | 编写故障排查指南 | P0 | 8h | ☐ |
| 6.6.4 | 编写应急响应流程 | P0 | 4h | ☐ |
| 6.6.5 | 编写变更管理流程 | P1 | 4h | ☐ |
| 6.6.6 | 编写监控告警手册 | P0 | 4h | ☐ |

---

## 附录A：功能清单完整映射（203个功能点）

### A.1 用户管理模块（7个功能点）

| 功能编号 | 功能名称 | 所属服务 | 前端页面 | App支持 | 管理后台 |
|---------|---------|---------|---------|---------|---------|
| UM-001 | 用户注册 | mota-user-service | 注册页 | ✓ | ✓ |
| UM-002 | 用户登录 | mota-user-service | 登录页 | ✓ | ✓ |
| UM-003 | SSO登录 | mota-user-service | 登录页 | ✓ | ✓ |
| UM-004 | 用户信息管理 | mota-user-service | 个人资料页 | ✓ | ✓ |
| UM-005 | 账号状态管理 | mota-user-service | - | - | ✓ |
| UM-006 | 密码策略 | mota-user-service | 设置页 | ✓ | ✓ |
| UM-007 | 登录日志 | mota-user-service | - | - | ✓ |

### A.2 组织架构模块（5个功能点）

| 功能编号 | 功能名称 | 所属服务 | 前端页面 | App支持 | 管理后台 |
|---------|---------|---------|---------|---------|---------|
| OG-001 | 部门管理 | mota-user-service | 部门管理页 | - | ✓ |
| OG-002 | 团队管理 | mota-user-service | 团队管理页 | - | ✓ |
| OG-003 | 岗位管理 | mota-user-service | 岗位管理页 | - | ✓ |
| OG-004 | 人员调动 | mota-user-service | 人员调动页 | - | ✓ |
| OG-005 | 组织架构图 | mota-user-service | 组织架构页 | - | ✓ |

### A.3 角色权限模块（5个功能点）

| 功能编号 | 功能名称 | 所属服务 | 前端页面 | App支持 | 管理后台 |
|---------|---------|---------|---------|---------|---------|
| RP-001 | 角色定义 | mota-user-service | 角色管理页 | - | ✓ |
| RP-002 | 权限配置 | mota-user-service | 权限配置页 | - | ✓ |
| RP-003 | 数据权限 | mota-user-service | 数据权限页 | - | ✓ |
| RP-004 | 功能权限 | mota-user-service | 功能权限页 | - | ✓ |
| RP-005 | RBAC模型 | mota-user-service | - | - | ✓ |

### A.4 项目管理模块（8个功能点）

| 功能编号 | 功能名称 | 所属服务 | 前端页面 | App支持 | 管理后台 |
|---------|---------|---------|---------|---------|---------|
| PM-001 | 看板视图 | mota-project-service | 项目详情页 | - | - |
| PM-002 | 列表视图 | mota-project-service | 项目详情页 | ✓ | - |
| PM-003 | 甘特图视图 | mota-project-service | 项目详情页 | - | - |
| PM-004 | 日历视图 | mota-project-service | 项目详情页 | - | - |
| PM-005 | 时间线视图 | mota-project-service | 项目详情页 | - | - |
| PM-006 | 视图切换 | mota-project-service | 项目详情页 | - | - |
| PM-007 | 自定义工作流 | mota-task-service | 工作流编辑页 | - | - |
| PM-008 | 视图保存 | mota-project-service | 项目详情页 | - | - |

### A.5 任务管理模块（10个功能点）

| 功能编号 | 功能名称 | 所属服务 | 前端页面 | App支持 | 管理后台 |
|---------|---------|---------|---------|---------|---------|
| TK-001 | 任务创建 | mota-task-service | 任务表单 | ✓ | - |
| TK-002 | 任务编辑 | mota-task-service | 任务详情页 | ✓ | - |
| TK-003 | 任务删除 | mota-task-service | 任务详情页 | ✓ | - |
| TK-004 | 任务分配 | mota-task-service | 任务详情页 | ✓ | - |
| TK-005 | 优先级管理 | mota-task-service | 任务详情页 | ✓ | - |
| TK-006 | 任务标签 | mota-task-service | 任务详情页 | ✓ | - |
| TK-007 | 任务评论 | mota-task-service | 任务详情页 | ✓ | - |
| TK-008 | 任务附件 | mota-task-service | 任务详情页 | ✓ | - |
| TK-009 | 时间估算 | mota-task-service | 任务详情页 | ✓ | - |
| TK-010 | 实际工时 | mota-task-service | 任务详情页 | ✓ | - |

*（其他功能模块映射表与原文档保持一致，此处省略以节省篇幅）*

---

## 附录B：服务依赖关系图

```
┌─────────────────────────────────────────────────────────────────┐
│                           Nginx                                  │
│                    (反向代理 + 负载均衡)                          │
└─────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────┐
│                   Spring Cloud Gateway                           │
│                    (API网关 + 认证)                               │
└─────────────────────────────────────────────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │                           │                           │
        ▼                           ▼                           ▼
┌───────────────┐         ┌───────────────┐         ┌───────────────┐
│  user-bff     │         │   app-bff     │         │  admin-bff    │
│  (NestJS)     │         │   (NestJS)    │         │  (NestJS)     │
└───────────────┘         └───────────────┘         └───────────────┘
        │                           │                           │
        └───────────────────────────┼───────────────────────────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │           │           │           │           │       │
        ▼           ▼           ▼           ▼           ▼       ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│  user   │ │ project │ │  task   │ │ collab  │ │knowledge│ │   ai    │
│ service │ │ service │ │ service │ │ service │ │ service │ │ service │
└─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘
        │           │           │           │           │       │
        └───────────┴───────────┴───────────┴───────────┴───────┘
                                    │
        ┌───────────────────────────┼───────────────────────────┐
        │           │           │           │           │       │
        ▼           ▼           ▼           ▼           ▼       ▼
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│ notify  │ │calendar │ │ search  │ │  file   │ │ report  │ │ tenant  │
│ service │ │ service │ │ service │ │ service │ │ service │ │ service │
└─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘
```

---

## 附录C：数据库分库规划

| 数据库名 | 所属服务 | 主要表 |
|---------|---------|--------|
| mota_user | mota-user-service | user, department, team, role, permission |
| mota_tenant | mota-tenant-service | tenant, package, quota, billing |
| mota_project | mota-project-service | project, milestone, project_member |
| mota_task | mota-task-service | task, subtask, checklist, dependency, workflow |
| mota_collab | mota-collab-service | document, comment, version |
| mota_knowledge | mota-knowledge-service | knowledge_file, template, category, tag |
| mota_ai | mota-ai-service | ai_history, ai_news, ai_vector |
| mota_notify | mota-notify-service | notification, subscription, preference |
| mota_calendar | mota-calendar-service | event, calendar, reminder |
| mota_report | mota-report-service | report, dashboard, metric |

---

## 附录D：里程碑计划

### 里程碑1：基础设施就绪（第1-2周）
- [ ] 服务器环境准备完成
- [ ] Nginx反向代理配置完成
- [ ] 中间件Docker Compose部署完成
- [ ] 部署脚本编写完成

### 里程碑2：核心服务重构（第3-8周）
- [ ] 公共模块重构完成
- [ ] 用户服务重构完成
- [ ] 租户服务开发完成
- [ ] 项目服务重构完成
- [ ] 任务服务拆分完成

### 里程碑3：业务服务重构（第9-14周）
- [ ] 协作服务开发完成
- [ ] 知识服务重构完成
- [ ] AI服务重构完成
- [ ] 通知服务重构完成
- [ ] 日历服务重构完成
- [ ] 搜索服务开发完成
- [ ] 文件服务开发完成
- [ ] 报表服务开发完成

### 里程碑4：BFF层开发（第15-17周）
- [ ] 用户端BFF开发完成
- [ ] 移动端BFF开发完成
- [ ] 管理端BFF开发完成

### 里程碑5：前端Web重构（第18-22周）
- [ ] Next.js项目搭建完成
- [ ] 公共组件迁移完成
- [ ] 所有业务模块迁移完成

### 里程碑6：移动App开发（第23-28周）
- [ ] Expo项目搭建完成
- [ ] 核心功能开发完成
- [ ] 离线支持开发完成
- [ ] App Store/Google Play上架

### 里程碑7：运营管理后台（第29-32周）
- [ ] Ant Design Pro项目搭建完成
- [ ] 所有管理功能开发完成

### 里程碑8：监控运维体系（第33-34周）
- [ ] 监控系统部署完成
- [ ] 日志系统部署完成
- [ ] 链路追踪部署完成
- [ ] 安全加固完成
- [ ] 备份容灾配置完成

---

## 附录E：风险与应对

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|---------|
| 数据迁移失败 | 高 | 中 | 制定详细迁移计划，多次演练，准备回滚方案 |
| 服务拆分导致性能下降 | 中 | 中 | 引入缓存，优化数据库查询，使用异步处理 |
| 团队技术栈不熟悉 | 中 | 高 | 提前培训，引入技术顾问，渐进式采用新技术 |
| 工期延误 | 高 | 中 | 预留缓冲时间，优先核心功能，灵活调整范围 |
| 第三方服务不稳定 | 中 | 低 | 实现降级策略，多供应商备份 |

---

## 附录F：功能统计汇总

| 模块分类 | 功能点数量 |
|---------|-----------|
| 用户管理 | 7 |
| 组织架构 | 5 |
| 角色权限 | 5 |
| 项目管理 | 8 |
| 任务管理 | 10 |
| 子任务 | 3 |
| 检查清单 | 3 |
| 任务依赖 | 7 |
| 进度跟踪 | 8 |
| 资源管理 | 6 |
| 报表分析 | 8 |
| 文档协作 | 13 |
| 文档管理 | 8 |
| 日程管理 | 13 |
| 通知管理 | 11 |
| 知识管理 | 8 |
| 版本控制 | 5 |
| 知识图谱 | 10 |
| 模板库 | 8 |
| 知识统计 | 6 |
| AI知识库 | 10 |
| 智能新闻 | 9 |
| AI方案生成 | 10 |
| 智能搜索 | 8 |
| AI助手 | 8 |
| 多模型支持 | 8 |
| 系统配置 | 4 |
| 审计日志 | 5 |
| **总计** | **203** |

---

## 文档更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|---------|--------|
| v1.0 | 2026-01-07 | 初始版本，包含完整的重构实施清单 | AI |
| v1.1 | 2026-01-07 | 移除K8s和CI/CD相关任务，改用Docker Compose + Nginx简化部署方案 | AI |