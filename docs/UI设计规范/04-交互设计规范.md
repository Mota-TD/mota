# 摩塔 Mota - 交互设计规范

## 1. 交互设计原则

### 1.1 核心原则

| 原则 | 描述 | 实践指南 |
|-----|------|---------|
| **即时反馈** | 用户操作后立即给予视觉或听觉反馈 | 按钮点击变色、加载动画、操作提示 |
| **可预测性** | 相同操作产生相同结果 | 统一的交互模式、一致的反馈方式 |
| **可撤销性** | 允许用户撤销误操作 | 删除确认、操作历史、撤销功能 |
| **容错性** | 预防错误并提供恢复方案 | 输入验证、错误提示、自动保存 |
| **高效性** | 减少用户操作步骤 | 快捷键、批量操作、智能默认值 |

### 1.2 交互层级

```
┌─────────────────────────────────────────────────────────────────┐
│                        交互层级模型                               │
├─────────────────────────────────────────────────────────────────┤
│  Level 1: 微交互 - 按钮状态、输入反馈、加载动画                     │
│  Level 2: 组件交互 - 下拉菜单、弹窗、表单验证                       │
│  Level 3: 页面交互 - 页面切换、数据加载、状态变化                   │
│  Level 4: 流程交互 - 多步骤表单、引导流程、任务完成                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 鼠标交互

### 2.1 点击交互

#### 单击 (Click)

| 场景 | 行为 | 反馈 |
|-----|------|-----|
| 按钮点击 | 触发操作 | 颜色变化 + 微缩放 |
| 链接点击 | 页面跳转 | 颜色变化 |
| 列表项点击 | 选中/进入详情 | 背景色变化 |
| 复选框点击 | 切换选中状态 | 勾选动画 |
| 标签页点击 | 切换内容 | 下划线动画 |

**按钮点击反馈**
```css
.btn:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
}
```

#### 双击 (Double Click)

| 场景 | 行为 |
|-----|------|
| 表格行双击 | 进入编辑模式 |
| 文件双击 | 打开文件 |
| 文本双击 | 选中单词 |

### 2.2 悬停交互 (Hover)

#### 悬停效果类型

| 元素 | 悬停效果 |
|-----|---------|
| 按钮 | 颜色加深 + 微上移 |
| 链接 | 颜色变化 + 下划线 |
| 卡片 | 阴影加深 + 微上移 |
| 表格行 | 背景色变化 |
| 图标按钮 | 背景色 + 颜色变化 |
| 头像 | 边框颜色变化 |

**卡片悬停效果**
```css
.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transition: all 0.2s ease;
}
```

**按钮悬停效果**
```css
.btn-primary:hover {
    background: linear-gradient(135deg, #1a6dd6 0%, #1560c0 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(43, 125, 233, 0.3);
}
```

#### 悬停提示 (Tooltip)

- 延迟显示：300ms
- 位置：默认上方，自动调整
- 动画：淡入淡出
- 最大宽度：300px

```css
.tooltip::after {
    opacity: 0;
    visibility: hidden;
    transition: all 0.15s ease;
}

.tooltip:hover::after {
    opacity: 1;
    visibility: visible;
}
```

### 2.3 拖拽交互 (Drag & Drop)

#### 拖拽场景

| 场景 | 行为 |
|-----|------|
| 看板卡片 | 拖拽改变状态 |
| 列表排序 | 拖拽调整顺序 |
| 文件上传 | 拖拽上传文件 |
| 布局调整 | 拖拽调整大小 |

#### 拖拽反馈

**拖拽开始**
- 被拖拽元素：透明度降低 (0.5)
- 鼠标样式：`cursor: grabbing`

**拖拽过程**
- 显示拖拽预览
- 目标位置显示占位符
- 有效区域高亮

**拖拽结束**
- 平滑动画到目标位置
- 恢复元素透明度
- 更新数据状态

```css
.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.drop-target {
    border: 2px dashed #2b7de9;
    background: rgba(43, 125, 233, 0.05);
}

.drop-placeholder {
    height: 4px;
    background: #2b7de9;
    border-radius: 2px;
}
```

### 2.4 右键菜单 (Context Menu)

#### 菜单规范

- 位置：鼠标点击位置
- 最小宽度：160px
- 动画：缩放淡入
- 层级：z-index: 1000

#### 常见菜单项

| 场景 | 菜单项 |
|-----|-------|
| 事项 | 编辑、复制、移动、删除 |
| 文件 | 打开、下载、重命名、删除 |
| 表格行 | 查看详情、编辑、复制、删除 |

---

## 3. 键盘交互

### 3.1 快捷键设计

#### 全局快捷键

| 快捷键 | 功能 |
|-------|------|
| `⌘/Ctrl + K` | 打开全局搜索 |
| `⌘/Ctrl + N` | 新建事项 |
| `⌘/Ctrl + S` | 保存 |
| `⌘/Ctrl + Z` | 撤销 |
| `⌘/Ctrl + Shift + Z` | 重做 |
| `Escape` | 关闭弹窗/取消操作 |

#### 导航快捷键

| 快捷键 | 功能 |
|-------|------|
| `G + D` | 跳转到工作台 |
| `G + P` | 跳转到项目 |
| `G + I` | 跳转到事项 |
| `G + S` | 跳转到设置 |

#### 列表快捷键

| 快捷键 | 功能 |
|-------|------|
| `↑/↓` | 上下移动选择 |
| `Enter` | 进入/确认 |
| `Space` | 选中/取消选中 |
| `⌘/Ctrl + A` | 全选 |
| `Delete` | 删除选中项 |

### 3.2 焦点管理

#### 焦点顺序

- 遵循 DOM 顺序
- 逻辑分组内循环
- 弹窗内焦点陷阱

#### 焦点样式

```css
:focus {
    outline: none;
}

:focus-visible {
    outline: 2px solid #2b7de9;
    outline-offset: 2px;
}

.btn:focus-visible {
    box-shadow: 0 0 0 3px rgba(43, 125, 233, 0.3);
}

.form-input:focus {
    border-color: #2b7de9;
    box-shadow: 0 0 0 3px rgba(43, 125, 233, 0.1);
}
```

#### Tab 导航

- 所有交互元素可 Tab 访问
- 跳过装饰性元素
- 提供跳过链接

### 3.3 表单键盘交互

| 快捷键 | 功能 |
|-------|------|
| `Tab` | 下一个字段 |
| `Shift + Tab` | 上一个字段 |
| `Enter` | 提交表单（单行输入） |
| `Escape` | 取消/关闭 |
| `Space` | 切换复选框/单选框 |

---

## 4. 表单交互

### 4.1 输入交互

#### 输入状态

| 状态 | 样式 | 说明 |
|-----|------|-----|
| 默认 | 灰色边框 | 未交互状态 |
| 悬停 | 边框加深 | 鼠标悬停 |
| 聚焦 | 主色边框 + 阴影 | 正在输入 |
| 错误 | 红色边框 | 验证失败 |
| 禁用 | 灰色背景 | 不可编辑 |

#### 输入反馈

**实时验证**
- 输入时：不显示错误
- 失焦时：显示验证结果
- 提交时：显示所有错误

**字符计数**
```html
<div class="input-wrapper">
    <textarea maxlength="500"></textarea>
    <span class="char-count">0/500</span>
</div>
```

**密码强度**
```html
<div class="password-strength">
    <div class="strength-bar" data-strength="weak"></div>
    <span class="strength-text">密码强度：弱</span>
</div>
```

### 4.2 选择交互

#### 下拉选择

**单选下拉**
- 点击展开选项
- 选中后自动关闭
- 支持键盘导航
- 支持搜索过滤

**多选下拉**
- 点击展开选项
- 选中后保持展开
- 显示已选标签
- 支持全选/清空

#### 日期选择

**日期选择器**
- 点击输入框展开日历
- 支持年/月快速切换
- 支持日期范围选择
- 支持快捷选项（今天、本周等）

### 4.3 表单验证

#### 验证时机

| 时机 | 场景 |
|-----|------|
| 实时验证 | 格式验证（邮箱、手机号） |
| 失焦验证 | 必填验证、长度验证 |
| 提交验证 | 完整性验证、业务验证 |

#### 错误提示

**行内错误**
```html
<div class="form-group error">
    <label>邮箱</label>
    <input type="email" class="form-input error">
    <span class="form-error">请输入有效的邮箱地址</span>
</div>
```

**汇总错误**
```html
<div class="form-errors">
    <p>请修正以下错误：</p>
    <ul>
        <li>邮箱格式不正确</li>
        <li>密码长度不足8位</li>
    </ul>
</div>
```

### 4.4 表单提交

#### 提交状态

1. **提交前**：按钮可点击
2. **提交中**：按钮禁用 + 加载动画
3. **提交成功**：成功提示 + 页面跳转/关闭
4. **提交失败**：错误提示 + 保留数据

```html
<!-- 提交中状态 -->
<button class="btn btn-primary" disabled>
    <span class="loading"></span>
    <span>提交中...</span>
</button>
```

---

## 5. 导航交互

### 5.1 页面导航

#### 导航方式

| 方式 | 场景 |
|-----|------|
| 侧边栏导航 | 主要功能模块切换 |
| 标签页导航 | 同一页面内容切换 |
| 面包屑导航 | 层级路径展示 |
| 分页导航 | 列表数据翻页 |

#### 导航反馈

**激活状态**
```css
.sidebar-item.active {
    background: #e6f0fc;
    color: #2b7de9;
}

.tab-item.active {
    color: #2b7de9;
    border-bottom: 2px solid #2b7de9;
}
```

**页面切换**
- 淡入淡出动画
- 保持滚动位置（返回时）
- 加载状态指示

### 5.2 弹窗交互

#### 弹窗类型

| 类型 | 场景 | 特点 |
|-----|------|-----|
| 模态弹窗 | 重要操作确认 | 阻断式，需用户响应 |
| 抽屉弹窗 | 详情查看/编辑 | 侧边滑出，可同时查看列表 |
| 气泡弹窗 | 快捷操作 | 轻量级，点击外部关闭 |

#### 弹窗动画

**模态弹窗**
```css
@keyframes modalIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.modal {
    animation: modalIn 0.2s ease;
}
```

**抽屉弹窗**
```css
@keyframes drawerIn {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0);
    }
}

.drawer {
    animation: drawerIn 0.3s ease;
}
```

#### 弹窗关闭

- 点击关闭按钮
- 点击遮罩层（可配置）
- 按 Escape 键
- 完成操作后自动关闭

### 5.3 下拉菜单

#### 展开方式

| 方式 | 场景 |
|-----|------|
| 点击展开 | 操作菜单、选择器 |
| 悬停展开 | 导航菜单 |

#### 菜单动画

```css
.dropdown-menu {
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.15s ease;
}

.dropdown.active .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
```

#### 菜单定位

- 默认：下方左对齐
- 自动调整：避免超出视口
- 支持：上/下/左/右

---

## 6. 数据交互

### 6.1 数据加载

#### 加载状态

| 场景 | 加载方式 |
|-----|---------|
| 页面加载 | 骨架屏 |
| 列表加载 | 表格骨架屏 |
| 按钮操作 | 按钮 loading |
| 局部刷新 | 区域 loading |

**骨架屏**
```css
.skeleton {
    background: linear-gradient(90deg, #f5f7fa 25%, #e8e9eb 50%, #f5f7fa 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}
```

#### 加载时机

- 首次加载：显示骨架屏
- 刷新数据：显示 loading 遮罩
- 加载更多：底部 loading
- 搜索/筛选：内容区 loading

### 6.2 数据刷新

#### 刷新方式

| 方式 | 场景 |
|-----|------|
| 手动刷新 | 点击刷新按钮 |
| 自动刷新 | 定时轮询 |
| 实时更新 | WebSocket 推送 |
| 下拉刷新 | 移动端 |

#### 刷新反馈

```html
<!-- 刷新按钮 -->
<button class="refresh-btn" onclick="refresh()">
    <svg class="refresh-icon">...</svg>
</button>

<!-- 刷新中 -->
<button class="refresh-btn" disabled>
    <svg class="refresh-icon spin">...</svg>
</button>
```

### 6.3 数据操作

#### 操作确认

**危险操作确认**
```html
<div class="confirm-modal">
    <div class="confirm-icon danger">⚠️</div>
    <h3>确认删除？</h3>
    <p>此操作不可撤销，删除后数据将无法恢复。</p>
    <div class="confirm-actions">
        <button class="btn btn-secondary">取消</button>
        <button class="btn btn-danger">确认删除</button>
    </div>
</div>
```

#### 操作反馈

| 操作 | 反馈方式 |
|-----|---------|
| 创建成功 | Toast 提示 + 列表刷新 |
| 更新成功 | Toast 提示 + 数据更新 |
| 删除成功 | Toast 提示 + 列表刷新 |
| 操作失败 | Toast 错误提示 |

### 6.4 批量操作

#### 选择模式

```html
<div class="batch-actions">
    <span class="selected-count">已选择 5 项</span>
    <button class="btn btn-sm">批量编辑</button>
    <button class="btn btn-sm btn-danger">批量删除</button>
    <button class="btn btn-sm btn-ghost">取消选择</button>
</div>
```

#### 批量操作流程

1. 进入选择模式
2. 选择目标项
3. 执行批量操作
4. 显示操作结果
5. 退出选择模式

---

## 7. 反馈交互

### 7.1 消息提示 (Toast)

#### 提示类型

| 类型 | 颜色 | 场景 |
|-----|------|-----|
| 成功 | 绿色 | 操作成功 |
| 错误 | 红色 | 操作失败 |
| 警告 | 橙色 | 需要注意 |
| 信息 | 蓝色 | 一般提示 |

#### 提示规范

- 位置：页面底部居中
- 时长：3秒自动消失
- 动画：向上滑入，向下滑出
- 可手动关闭

```css
.toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    opacity: 0;
    transition: all 0.3s ease;
}

.toast.visible {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}
```

### 7.2 通知提示

#### 通知类型

| 类型 | 场景 |
|-----|------|
| 系统通知 | 系统公告、版本更新 |
| 业务通知 | 任务分配、评论回复 |
| 提醒通知 | 截止日期、会议提醒 |

#### 通知展示

**通知徽章**
```html
<button class="notification-btn">
    <svg>...</svg>
    <span class="notification-badge">3</span>
</button>
```

**通知列表**
```html
<div class="notification-dropdown">
    <div class="notification-header">
        <span>通知</span>
        <a href="#">查看全部</a>
    </div>
    <div class="notification-list">
        <div class="notification-item unread">
            <div class="notification-icon">...</div>
            <div class="notification-content">
                <p>李四 将事项 #1024 分配给了你</p>
                <span class="notification-time">5分钟前</span>
            </div>
        </div>
    </div>
</div>
```

### 7.3 进度反馈

#### 进度条

```html
<div class="progress">
    <div class="progress-bar" style="width: 65%"></div>
</div>
<span class="progress-text">65%</span>
```

#### 步骤指示

```html
<div class="steps">
    <div class="step completed">
        <div class="step-icon">✓</div>
        <div class="step-title">基本信息</div>
    </div>
    <div class="step active">
        <div class="step-icon">2</div>
        <div class="step-title">详细设置</div>
    </div>
    <div class="step">
        <div class="step-icon">3</div>
        <div class="step-title">完成</div>
    </div>
</div>
```

### 7.4 空状态

#### 空状态类型

| 类型 | 场景 |
|-----|------|
| 无数据 | 列表为空 |
| 无结果 | 搜索无结果 |
| 无权限 | 无访问权限 |
| 加载失败 | 数据加载失败 |

#### 空状态设计

```html
<div class="empty-state">
    <img src="empty-illustration.svg" alt="">
    <h3>暂无数据</h3>
    <p>还没有创建任何项目，点击下方按钮创建第一个项目</p>
    <button class="btn btn-primary">创建项目</button>
</div>
```

---

## 8. 动效规范

### 8.1 动效原则

| 原则 | 说明 |
|-----|------|
| 有意义 | 动效应传达信息或引导注意力 |
| 快速 | 动效时长控制在 150ms - 500ms |
| 自然 | 使用自然的缓动函数 |
| 一致 | 相同场景使用相同动效 |

### 8.2 动效时长

| 类型 | 时长 | 场景 |
|-----|------|-----|
| 快速 | 150ms | 按钮状态、图标变化 |
| 标准 | 300ms | 弹窗、下拉菜单 |
| 慢速 | 500ms | 页面切换、复杂动画 |

### 8.3 缓动函数

| 函数 | 场景 |
|-----|------|
| `ease` | 通用过渡 |
| `ease-out` | 元素进入 |
| `ease-in` | 元素退出 |
| `ease-in-out` | 状态切换 |
| `cubic-bezier(0.4, 0, 0.2, 1)` | Material Design 标准 |

### 8.4 常用动效

**淡入**
```css
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
```

**向上滑入**
```css
@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
```

**缩放进入**
```css
@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}
```

**旋转加载**
```css
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}
```

---

## 9. 无障碍交互

### 9.1 键盘可访问性

- 所有交互元素可通过 Tab 键访问
- 焦点状态清晰可见
- 支持 Enter/Space 触发操作
- 支持 Escape 关闭弹窗
- 提供跳过导航链接

### 9.2 屏幕阅读器支持

**ARIA 属性**
```html
<!-- 按钮 -->
<button aria-label="关闭弹窗">×</button>

<!-- 弹窗 -->
<div role="dialog" aria-labelledby="modal-title" aria-modal="true">
    <h2 id="modal-title">弹窗标题</h2>
</div>

<!-- 加载状态 -->
<div aria-live="polite" aria-busy="true">加载中...</div>

<!-- 错误提示 -->
<input aria-invalid="true" aria-describedby="error-msg">
<span id="error-msg" role="alert">请输入有效的邮箱</span>
```

### 9.3 颜色对比度

- 正文文字：对比度 ≥ 4.5:1
- 大号文字：对比度 ≥ 3:1
- 图形元素：对比度 ≥ 3:1

### 9.4 触摸目标

- 最小触摸目标：44px × 44px
- 触摸目标间距：≥ 8px

---

## 10. 移动端交互

### 10.1 手势交互

| 手势 | 功能 |
|-----|------|
| 点击 | 触发操作 |
| 长按 | 显示上下文菜单 |
| 滑动 | 列表滚动、切换页面 |
| 下拉 | 刷新数据 |
| 捏合 | 缩放内容 |

### 10.2 触摸反馈

```css
.touchable {
    -webkit-tap-highlight-color: transparent;
}

.touchable:active {
    background: rgba(0, 0, 0, 0.05);
}
```

### 10.3 移动端适配

- 增大点击区域
- 简化操作步骤
- 优化表单输入
- 支持手势操作

---

*摩塔 Mota - 为研发团队打造的高效协作平台*